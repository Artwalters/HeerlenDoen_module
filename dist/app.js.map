{
  "version": 3,
  "sources": ["../bin/live-reload.js", "../src/modules/config.js", "../src/modules/boundaryUtils.js", "../src/modules/state.js", "../src/modules/dataLoader.js", "../src/modules/localStorage.js", "../src/modules/filters.js", "../src/modules/geolocation.js", "../src/modules/markers.js", "../src/modules/popups.js", "../src/modules/mapInteractions.js", "../src/modules/mapInit.js", "../src/modules/poi.js", "../src/modules/threejs.js", "../src/modules/toggle3D.js", "../src/modules/tour.js", "../src/app.js"],
  "sourcesContent": ["new EventSource(`${SERVE_ORIGIN}/esbuild`).addEventListener('change', () => location.reload());\n", "// Configuration and constants for the Heerlen Interactive Map\n\nexport const CONFIG = {\n  MAP: {\n    center: [5.979642, 50.887634],\n    zoom: 15.5,\n    pitch: 45,\n    bearing: -17.6,\n    boundary: {\n      center: [5.977105864037915, 50.88774161029858],\n      radius: 0.6,\n    },\n  },\n  MARKER_ZOOM: {\n    min: 10,\n    small: 14,\n    medium: 16,\n    large: 18,\n  },\n};\n\n// Mapbox access token\nexport const MAPBOX_ACCESS_TOKEN =\n  'pk.eyJ1IjoicHJvamVjdGhlZXJsZW4iLCJhIjoiY2x4eWVmcXBvMWozZTJpc2FqbWgzcnAyeCJ9.SVOVbBG6o1lHs6TwCudR9g';\n\n// Map style\nexport const MAP_STYLE = 'mapbox://styles/projectheerlen/cm9lkc2ge005301qs86xncirv';\n\n// Local storage key\nexport const LOCAL_STORAGE_KEY = 'heerlenActiveFilters';\n\n// Map options\nexport const MAP_OPTIONS = {\n  container: 'map',\n  style: MAP_STYLE,\n  center: CONFIG.MAP.center,\n  zoom: CONFIG.MAP.zoom,\n  pitch: CONFIG.MAP.pitch,\n  bearing: CONFIG.MAP.bearing,\n  antialias: true,\n  interactive: true,\n  renderWorldCopies: false,\n  preserveDrawingBuffer: false,\n  maxParallelImageRequests: 16,\n  fadeDuration: 0,\n};\n", "// Boundary utilities and teleport functionality\n\nimport { CONFIG } from './config.js';\n\n/**\n * Calculate distance between two points using Haversine formula\n * @param {number} lat1 - Latitude of first point\n * @param {number} lon1 - Longitude of first point\n * @param {number} lat2 - Latitude of second point\n * @param {number} lon2 - Longitude of second point\n * @return {number} Distance in kilometers\n */\nexport function calculateDistance(lat1, lon1, lat2, lon2) {\n  // Haversine formula\n  const toRad = (deg) => deg * (Math.PI / 180);\n\n  const dLat = toRad(lat2 - lat1);\n  const dLon = toRad(lon2 - lon1);\n\n  const a =\n    Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n    Math.cos(toRad(lat1)) * Math.cos(toRad(lat2)) * Math.sin(dLon / 2) * Math.sin(dLon / 2);\n\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n  return 6371 * c; // Earth radius in km\n}\n\n/**\n * Setup boundary checking for map movement\n * @param {Object} map - The mapbox map instance\n */\nexport function setupBoundaryCheck(map) {\n  map.on('moveend', () => {\n    // Skip this check if we're flying back\n    if (map.isEasing()) return;\n\n    const currentCenter = map.getCenter();\n    const boundaryCenter = {\n      lng: CONFIG.MAP.boundary.center[0],\n      lat: CONFIG.MAP.boundary.center[1],\n    };\n\n    // Calculate distance from current center to Heerlen center\n    const distance = calculateDistance(\n      currentCenter.lat,\n      currentCenter.lng,\n      boundaryCenter.lat,\n      boundaryCenter.lng\n    );\n\n    // If we're too far away (more than 1 km), fly back\n    if (distance > 1) {\n      // Create blocker overlay\n      const overlay = document.createElement('div');\n      overlay.id = 'interaction-blocker';\n      document.body.appendChild(overlay);\n\n      // Fly back to center\n      map.flyTo({\n        center: CONFIG.MAP.center,\n        zoom: 17,\n        pitch: 45,\n        bearing: -17.6,\n        speed: 0.8,\n        curve: 1.5,\n        essential: true,\n      });\n\n      // Fade overlay\n      gsap.to(overlay, {\n        duration: 2,\n        backgroundColor: 'rgba(255,255,255,0)',\n        onComplete: () => {\n          overlay.remove();\n        },\n      });\n    }\n  });\n}", "// Global state management for the application\n\n// Global state object\nexport const state = {\n  activePopup: null,\n  markersAdded: false,\n  modelsAdded: false,\n  mapLocations: {\n    type: 'FeatureCollection',\n    features: [],\n  },\n  activeFilters: new Set(),\n  map: null, // Will be initialized in main app\n};\n\n// State update functions\nexport function setActivePopup(popup) {\n  state.activePopup = popup;\n}\n\nexport function setMarkersAdded(value) {\n  state.markersAdded = value;\n}\n\nexport function setModelsAdded(value) {\n  state.modelsAdded = value;\n}\n\nexport function setMap(map) {\n  state.map = map;\n}\n\nexport function getActiveFilters() {\n  return state.activeFilters;\n}\n\nexport function setActiveFilters(filters) {\n  state.activeFilters = filters;\n}\n", "// Data loading module - loads location data from Webflow\n\nimport { state } from './state.js';\n\n/**\n * Helper function to safely get a value from an element within a parent.\n * Logs warnings if elements or properties are missing.\n */\nfunction getRobustValue(\n  parentElement,\n  selector,\n  property = 'value',\n  defaultValue = null,\n  isRequired = false,\n  itemIndex = -1,\n  itemType = 'item'\n) {\n  if (!parentElement) {\n    console.warn(`[getRobustValue] Invalid parentElement provided for selector '${selector}'`);\n    return defaultValue;\n  }\n\n  const targetElement = parentElement.querySelector(selector);\n\n  if (targetElement) {\n    // Check if the specific property exists (e.g., 'value' for input, 'innerHTML' for div)\n    if (property in targetElement) {\n      return targetElement[property];\n    }\n    // Log if the property doesn't exist on the found element\n    console.warn(\n      `[Data Loading] Property '${property}' not found on element with selector '${selector}' in ${itemType} item ${itemIndex}. Using default.`\n    );\n    return defaultValue;\n  }\n  // Log if a required element is missing\n  if (isRequired) {\n    console.warn(\n      `[Data Loading] Required element with selector '${selector}' not found in ${itemType} item ${itemIndex}. Cannot process fully.`\n    );\n  }\n  // Return default even if not required, just don't log unless required\n  return defaultValue;\n}\n\n/**\n * Load location data from CMS DOM elements robustly.\n * Skips items with invalid coordinates.\n */\nexport function getGeoData() {\n  console.log('[Data Loading] Starting getGeoData...');\n  const locationList = document.getElementById('location-list');\n  let loadedCount = 0;\n  let skippedCount = 0;\n\n  if (!locationList) {\n    console.error(\n      \"[Data Loading] CRITICAL: Element with ID 'location-list' not found. Cannot load geo data.\"\n    );\n    return; // Stop if the main container is missing\n  }\n\n  // Filter out non-element nodes (like text nodes, comments)\n  Array.from(locationList.childNodes)\n    .filter((node) => node.nodeType === Node.ELEMENT_NODE)\n    .forEach((element, index) => {\n      // --- Get Essential Data First ---\n      const rawLat = getRobustValue(\n        element,\n        '#locationLatitude',\n        'value',\n        null,\n        true,\n        index,\n        'location'\n      );\n      const rawLong = getRobustValue(\n        element,\n        '#locationLongitude',\n        'value',\n        null,\n        true,\n        index,\n        'location'\n      );\n      const locationID = getRobustValue(\n        element,\n        '#locationID',\n        'value',\n        `missing-id-${index}`,\n        true,\n        index,\n        'location'\n      ); // ID is usually important\n\n      // --- Validate Essential Data ---\n      const locationLat = parseFloat(rawLat);\n      const locationLong = parseFloat(rawLong);\n\n      if (isNaN(locationLat) || isNaN(locationLong)) {\n        console.warn(\n          `[Data Loading] Skipping location item ${index} (Attempted ID: ${locationID}) due to invalid or missing coordinates. Lat='${rawLat}', Long='${rawLong}'`\n        );\n        skippedCount++;\n        return; // Go to the next iteration/element\n      }\n\n      // --- Get Optional/Other Data Safely ---\n      const locationData = {\n        // Essential (already validated)\n        locationLat: locationLat,\n        locationLong: locationLong,\n        locationID: locationID, // Use the validated/defaulted ID\n        // Other data with defaults\n        name: getRobustValue(element, '#name', 'value', 'Naamloos', false, index, 'location'),\n        locationInfo: getRobustValue(\n          element,\n          '.locations-map_card',\n          'innerHTML',\n          '<p>Geen informatie beschikbaar</p>',\n          false,\n          index,\n          'location'\n        ),\n        ondernemerkleur: getRobustValue(\n          element,\n          '#ondernemerkleur',\n          'value',\n          '#A0A0A0',\n          false,\n          index,\n          'location'\n        ), // Grey default color\n        descriptionv2: getRobustValue(\n          element,\n          '#descriptionv2',\n          'value',\n          '',\n          false,\n          index,\n          'location'\n        ),\n        icon: getRobustValue(element, '#icon', 'value', null, false, index, 'location'), // Let Mapbox handle missing icon later if needed\n        image: getRobustValue(element, '#image', 'value', null, false, index, 'location'),\n        category: getRobustValue(element, '#category', 'value', 'Overig', false, index, 'location'), // Default category\n        telefoonummer: getRobustValue(\n          element,\n          '#telefoonnummer',\n          'value',\n          '',\n          false,\n          index,\n          'location'\n        ),\n        locatie: getRobustValue(element, '#locatie', 'value', '', false, index, 'location'),\n        maps: getRobustValue(element, '#maps', 'value', null, false, index, 'location'),\n        website: getRobustValue(element, '#website', 'value', null, false, index, 'location'),\n        instagram: getRobustValue(element, '#instagram', 'value', null, false, index, 'location'),\n        facebook: getRobustValue(element, '#facebook', 'value', null, false, index, 'location'),\n      };\n\n      // --- Create Feature ---\n      const feature = {\n        type: 'Feature',\n        geometry: {\n          type: 'Point',\n          coordinates: [locationData.locationLong, locationData.locationLat], // Use validated coords\n        },\n        properties: {\n          id: locationData.locationID,\n          description: locationData.locationInfo,\n          arrayID: index, // Keep original index for potential reference\n          color: locationData.ondernemerkleur,\n          name: locationData.name,\n          icon: locationData.icon,\n          image: locationData.image,\n          category: locationData.category,\n          telefoonummer: locationData.telefoonummer,\n          locatie: locationData.locatie,\n          maps: locationData.maps,\n          website: locationData.website,\n          descriptionv2: locationData.descriptionv2,\n          instagram: locationData.instagram,\n          facebook: locationData.facebook,\n        },\n      };\n\n      // --- Add Feature (if not duplicate ID) ---\n      if (\n        !state.mapLocations.features.some((feat) => feat.properties.id === locationData.locationID)\n      ) {\n        state.mapLocations.features.push(feature);\n        loadedCount++;\n      } else {\n        console.warn(\n          `[Data Loading] Duplicate location ID found and skipped: ${locationData.locationID} at index ${index}`\n        );\n        skippedCount++;\n      }\n    });\n\n  console.log(\n    `[Data Loading] getGeoData finished. Loaded: ${loadedCount}, Skipped (invalid/duplicate): ${skippedCount}`\n  );\n}\n\n/**\n * Load AR location data from CMS DOM elements robustly.\n * Skips items with invalid coordinates.\n */\nexport function getARData() {\n  console.log('[Data Loading] Starting getARData...');\n  const arLocationList = document.getElementById('location-ar-list');\n  let loadedCount = 0;\n  let skippedCount = 0;\n  const startIndex = state.mapLocations.features.length; // Start index after regular locations\n\n  if (!arLocationList) {\n    console.error(\n      \"[Data Loading] CRITICAL: Element with ID 'location-ar-list' not found. Cannot load AR data.\"\n    );\n    return; // Stop if the main container is missing\n  }\n\n  // Filter out non-element nodes\n  Array.from(arLocationList.childNodes)\n    .filter((node) => node.nodeType === Node.ELEMENT_NODE)\n    .forEach((element, index) => {\n      const itemIndexForLog = index; // Use original index for logging\n\n      // --- Get Essential Data First ---\n      const rawLat = getRobustValue(\n        element,\n        '#latitude_ar',\n        'value',\n        null,\n        true,\n        itemIndexForLog,\n        'AR'\n      );\n      const rawLong = getRobustValue(\n        element,\n        '#longitude_ar',\n        'value',\n        null,\n        true,\n        itemIndexForLog,\n        'AR'\n      );\n      const name_ar = getRobustValue(\n        element,\n        '#name_ar',\n        'value',\n        `AR Item ${itemIndexForLog}`,\n        true,\n        itemIndexForLog,\n        'AR'\n      ); // Name is likely important\n\n      // --- Validate Essential Data ---\n      const latitude_ar = parseFloat(rawLat);\n      const longitude_ar = parseFloat(rawLong);\n\n      if (isNaN(latitude_ar) || isNaN(longitude_ar)) {\n        console.warn(\n          `[Data Loading] Skipping AR item ${itemIndexForLog} (Name: ${name_ar}) due to invalid or missing coordinates. Lat='${rawLat}', Long='${rawLong}'`\n        );\n        skippedCount++;\n        return; // Go to the next iteration/element\n      }\n\n      // --- Get Optional/Other Data Safely ---\n      const arData = {\n        // Essential (already validated)\n        latitude_ar: latitude_ar,\n        longitude_ar: longitude_ar,\n        name_ar: name_ar,\n        // Other data with defaults\n        slug_ar: getRobustValue(element, '#slug_ar', 'value', '', false, itemIndexForLog, 'AR'),\n        image_ar: getRobustValue(element, '#image_ar', 'value', null, false, itemIndexForLog, 'AR'),\n        description_ar: getRobustValue(\n          element,\n          '#description_ar',\n          'value',\n          'Geen beschrijving.',\n          false,\n          itemIndexForLog,\n          'AR'\n        ),\n        arkleur: getRobustValue(element, '#arkleur', 'value', '#A0A0A0', false, index, 'location'), // Grey default color\n        icon_ar: getRobustValue(element, '#icon_ar', 'value', null, false, itemIndexForLog, 'AR'), // Default icon?\n        // Nieuwe velden\n        instructie: getRobustValue(\n          element,\n          '#instructie',\n          'value',\n          'Geen instructie beschikbaar.',\n          false,\n          itemIndexForLog,\n          'AR'\n        ),\n        link_ar_mobile: getRobustValue(\n          element,\n          '#link_ar_mobile',\n          'value',\n          null,\n          false,\n          itemIndexForLog,\n          'AR'\n        ),\n        link_ar_desktop: getRobustValue(\n          element,\n          '#link_ar_desktop',\n          'value',\n          null,\n          false,\n          itemIndexForLog,\n          'AR'\n        ),\n        category: getRobustValue(element, '#category', 'value', null, false, itemIndexForLog, 'AR'),\n      };\n\n      // Check if required AR links are present\n      if (!arData.link_ar_mobile && !arData.link_ar_desktop) {\n        console.warn(\n          `[Data Loading] Skipping AR item ${itemIndexForLog} (Name: ${name_ar}) due to missing required AR links (both mobile and desktop).`\n        );\n        skippedCount++;\n        return;\n      }\n\n      // --- Create Feature ---\n      const feature = {\n        type: 'Feature',\n        geometry: {\n          type: 'Point',\n          coordinates: [arData.longitude_ar, arData.latitude_ar], // Use validated coords\n        },\n        properties: {\n          type: 'ar', // Mark as AR type\n          name: arData.name_ar,\n          slug: arData.slug_ar,\n          description: arData.description_ar,\n          arrayID: startIndex + index, // Ensure unique arrayID across both lists\n          image: arData.image_ar,\n          arkleur: arData.arkleur,\n          icon: arData.icon_ar,\n          // Nieuwe velden\n          instructie: arData.instructie,\n          link_ar_mobile: arData.link_ar_mobile,\n          link_ar_desktop: arData.link_ar_desktop,\n          category: arData.category,\n        },\n      };\n\n      // --- Add Feature ---\n      state.mapLocations.features.push(feature);\n      loadedCount++;\n    });\n\n  console.log(\n    `[Data Loading] getARData finished. Loaded: ${loadedCount}, Skipped (invalid/missing required): ${skippedCount}`\n  );\n}\n\n/**\n * Main function to load all location data\n */\nexport async function loadLocationData() {\n  console.log('[Data Loading] Starting location data loading...');\n\n  // Reset mapLocations in case this script runs multiple times\n  state.mapLocations.features = [];\n\n  // Load both types of data\n  getGeoData();\n  getARData();\n\n  console.log('[Data Loading] Location data loading completed');\n\n  // Return the loaded data\n  return state.mapLocations;\n}\n\n/**\n * Update map source with loaded data\n */\nexport function updateMapSource(map) {\n  // Optional: After loading, update the map source if it exists\n  if (map.getSource('locations')) {\n    map.getSource('locations').setData(state.mapLocations);\n    console.log(\"[Data Loading] Map source 'locations' updated.\");\n  } else {\n    console.log(\"[Data Loading] Map source 'locations' not found yet, will be added later.\");\n  }\n}\n\n// Initialize data loading when DOM is ready\ndocument.addEventListener('DOMContentLoaded', () => {\n  loadLocationData();\n});\n", "// Local storage utilities for filter management\n\nimport { LOCAL_STORAGE_KEY } from './config.js';\nimport { setActiveFilters, state } from './state.js';\n\n// Save current activeFilters Set to localStorage\nexport function saveMapFiltersToLocalStorage() {\n  try {\n    const filtersArray = Array.from(state.activeFilters);\n    localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(filtersArray));\n  } catch (e) {\n    console.error('Kon kaartfilters niet opslaan in localStorage:', e);\n  }\n}\n\n// Update the Set, map filters and button UI based on categories array\nexport function updateMapState(activeCategories = []) {\n  setActiveFilters(new Set(activeCategories));\n\n  // Update visual state of buttons\n  document.querySelectorAll('.filter-btn').forEach((button) => {\n    const { category } = button.dataset;\n    if (category) {\n      button.classList.toggle('is--active', state.activeFilters.has(category));\n    }\n  });\n\n  // Apply filters to map layers - this function will be imported from filters module\n  if (typeof window.applyMapFilters === 'function') {\n    window.applyMapFilters();\n  }\n}\n\n// Load filters from localStorage and update the map\nexport function loadFiltersAndUpdateMap() {\n  try {\n    const storedFilters = localStorage.getItem(LOCAL_STORAGE_KEY);\n    const activeCategories = storedFilters ? JSON.parse(storedFilters) : [];\n    updateMapState(activeCategories);\n  } catch (e) {\n    console.error('Kon filters niet laden/parsen uit localStorage voor kaart:', e);\n    updateMapState([]);\n  }\n}\n", "// Filter management module\n\nimport { saveMapFiltersToLocalStorage } from './localStorage.js';\nimport { state } from './state.js';\n\n/**\n * Apply active filters to map markers\n */\nexport function applyMapFilters() {\n  console.log('Applying map filters:', Array.from(state.activeFilters));\n  \n  let filterExpression;\n\n  if (state.activeFilters.size === 0) {\n    // No filter - show everything\n    filterExpression = null;\n  } else {\n    // Combine active filters WITH markers without category\n    filterExpression = [\n      'any', // OR condition\n      ['in', ['get', 'category'], ['literal', Array.from(state.activeFilters)]], // Markers with active categories\n      ['!', ['has', 'category']], // Markers without category property\n      ['==', ['get', 'category'], ''], // Markers with empty category\n    ];\n  }\n\n  // Apply filter to all marker-related layers (if loaded)\n  const layersToFilter = ['location-markers', 'location-icons', 'location-labels'];\n  layersToFilter.forEach((layerId) => {\n    if (state.map && state.map.getLayer(layerId)) {\n      try {\n        state.map.setFilter(layerId, filterExpression);\n      } catch (e) {\n        console.warn(`Could not apply filter to layer ${layerId}:`, e);\n        // Can happen if layer is not fully ready yet\n      }\n    }\n  });\n\n  // Save filters to localStorage\n  saveMapFiltersToLocalStorage();\n}\n\n/**\n * Toggle a filter category\n */\nexport function toggleFilter(category) {\n  if (!category) return; // Skip buttons without category\n\n  // Update the Set\n  if (state.activeFilters.has(category)) {\n    state.activeFilters.delete(category);\n  } else {\n    state.activeFilters.add(category);\n  }\n\n  // Apply the map filters\n  applyMapFilters();\n}\n\n/**\n * Setup location filter buttons\n */\nexport function setupLocationFilters() {\n  document.querySelectorAll('.filter-btn').forEach((button) => {\n    button.addEventListener('click', () => {\n      const { category } = button.dataset; // UPPERCASE expected\n      if (!category) return; // Skip buttons without category\n\n      // Update the Set\n      if (state.activeFilters.has(category)) {\n        state.activeFilters.delete(category);\n        button.classList.remove('is--active'); // Explicitly remove\n      } else {\n        state.activeFilters.add(category);\n        button.classList.add('is--active'); // Explicitly add\n      }\n\n      // Apply the map filters\n      applyMapFilters();\n    });\n  });\n}\n\n/**\n * Update filter button states based on active filters\n */\nexport function updateFilterButtonStates() {\n  document.querySelectorAll('.filter-btn').forEach((button) => {\n    const { category } = button.dataset;\n    if (category) {\n      button.classList.toggle('is--active', state.activeFilters.has(category));\n    }\n  });\n}\n\n/**\n * Clear all active filters\n */\nexport function clearAllFilters() {\n  state.activeFilters.clear();\n  updateFilterButtonStates();\n  applyMapFilters();\n}\n\n/**\n * Set specific filters\n */\nexport function setFilters(categories) {\n  state.activeFilters.clear();\n  categories.forEach(category => state.activeFilters.add(category));\n  updateFilterButtonStates();\n  applyMapFilters();\n}\n\n// Make applyMapFilters available globally for localStorage module\nwindow.applyMapFilters = applyMapFilters;", "// Geolocation management for the Heerlen Interactive Map\n\nimport { CONFIG } from './config.js';\nimport { state } from './state.js';\n\nexport class GeolocationManager {\n  constructor(map) {\n    this.map = map;\n    this.searchRadiusId = 'search-radius';\n    this.searchRadiusOuterId = 'search-radius-outer';\n    this.radiusInMeters = 25;\n    this.boundaryLayerIds = ['boundary-fill', 'boundary-line', 'boundary-label'];\n    this.distanceMarkers = [];\n    this.isPopupOpen = false;\n    this.centerPoint = CONFIG.MAP.boundary.center;\n    this.boundaryRadius = CONFIG.MAP.boundary.radius;\n    console.log('[DEBUG] GeolocationManager initialized.');\n    console.log('[DEBUG] Boundary Center:', this.centerPoint);\n    console.log('[DEBUG] Boundary Radius (km):', this.boundaryRadius);\n    this.initialize();\n  }\n\n  /**\n   * Initialize geolocation features\n   */\n  initialize() {\n    this.setupGeolocateControl();\n    this.setupSearchRadius();\n    this.setupBoundaryCheck();\n  }\n\n  /**\n   * Pause geolocation tracking while keeping user location visible\n   */\n  pauseTracking() {\n    if (this.geolocateControl && this.geolocateControl._watchState === 'ACTIVE_LOCK') {\n      this.wasTracking = true;\n      this.geolocateControl._watchState = 'ACTIVE_ERROR';\n      console.log('Geolocation tracking paused');\n    }\n  }\n\n  /**\n   * Resume geolocation tracking if it was paused\n   */\n  resumeTracking() {\n    if (this.geolocateControl && this.wasTracking) {\n      this.geolocateControl._watchState = 'ACTIVE_LOCK';\n      this.wasTracking = false;\n      console.log('Geolocation tracking resumed');\n    }\n  }\n\n  /**\n   * Create and update distance markers based on user location\n   */\n  updateDistanceMarkers(userPosition) {\n    // Clear existing markers\n    if (this.distanceMarkers) {\n      this.distanceMarkers.forEach((marker) => marker.remove());\n      this.distanceMarkers = [];\n    }\n\n    // Add new markers for features within radius\n    state.mapLocations.features.forEach((feature) => {\n      const featureCoords = feature.geometry.coordinates;\n      const distance =\n        1000 *\n        this.calculateDistance(\n          userPosition[1],\n          userPosition[0],\n          featureCoords[1],\n          featureCoords[0]\n        );\n\n      if (distance <= this.radiusInMeters) {\n        const markerEl = document.createElement('div');\n        markerEl.className = 'distance-marker';\n        markerEl.innerHTML = `<span class=\"distance-marker-distance\">${Math.round(distance)}m</span>`;\n\n        const marker = new mapboxgl.Marker({ element: markerEl })\n          .setLngLat(featureCoords)\n          .addTo(this.map);\n\n        // Add click handler\n        markerEl.addEventListener('click', () => {\n          this.map.fire('click', {\n            lngLat: featureCoords,\n            point: this.map.project(featureCoords),\n            features: [feature],\n          });\n        });\n\n        this.distanceMarkers.push(marker);\n      }\n    });\n  }\n\n  // Handle user location updates\n  handleUserLocation(position) {\n    const userPosition = [position.coords.longitude, position.coords.latitude];\n    console.log('[DEBUG] handleUserLocation - User Position:', userPosition);\n\n    if (this.isWithinBoundary(userPosition)) {\n      console.log('[DEBUG] handleUserLocation - User is INSIDE boundary.');\n      this.updateSearchRadius(userPosition);\n      this.updateDistanceMarkers(userPosition);\n\n      if (!this.isPopupOpen) {\n        if (this.isFirstLocation) {\n          console.log('[DEBUG] handleUserLocation - First location detected, flying to user.');\n          this.map.flyTo({\n            center: userPosition,\n            zoom: 17.5,\n            pitch: 45,\n            duration: 2000,\n            bearing: position.coords.heading || 0,\n          });\n          this.isFirstLocation = false;\n        } else {\n          const mapCenter = this.map.getCenter();\n          const distanceChange = this.calculateDistance(\n            mapCenter.lat,\n            mapCenter.lng,\n            userPosition[1],\n            userPosition[0]\n          );\n\n          if (distanceChange > 0.05) {\n            console.log('[DEBUG] handleUserLocation - Easing to new user position.');\n            this.map.easeTo({\n              center: userPosition,\n              duration: 1000,\n            });\n          }\n        }\n      } else {\n        console.log('[DEBUG] handleUserLocation - Popup is open, map movement skipped.');\n      }\n    } else {\n      console.warn('[DEBUG] handleUserLocation - User is OUTSIDE boundary. Stopping tracking.');\n      this.geolocateControl._watchState = 'OFF';\n      if (this.geolocateControl._geolocateButton) {\n        this.geolocateControl._geolocateButton.classList.remove('mapboxgl-ctrl-geolocate-active');\n        this.geolocateControl._geolocateButton.classList.remove('mapboxgl-ctrl-geolocate-waiting');\n      }\n\n      // Clear any existing user location indicators\n      this.clearSearchRadius();\n      if (this.distanceMarkers) {\n        this.distanceMarkers.forEach((marker) => marker.remove());\n        this.distanceMarkers = [];\n      }\n\n      console.log(\n        '[DEBUG] handleUserLocation - Calling showBoundaryPopup because user moved outside.'\n      );\n      this.showBoundaryPopup();\n\n      console.log('[DEBUG] handleUserLocation - Flying to Heerlen center.');\n      this.map.flyTo({\n        center: this.centerPoint,\n        zoom: 14,\n        pitch: 0,\n        bearing: 0,\n        duration: 1500,\n      });\n    }\n  }\n\n  /**\n   * Setup geolocate control with event handlers\n   */\n  setupGeolocateControl() {\n    // Remove any existing controls\n    document\n      .querySelectorAll('.mapboxgl-ctrl-top-right .mapboxgl-ctrl-group')\n      .forEach((el) => el.remove());\n    document\n      .querySelectorAll('.mapboxgl-ctrl-bottom-right .mapboxgl-ctrl-group')\n      .forEach((el) => el.remove());\n\n    // Create geolocate control\n    this.geolocateControl = new mapboxgl.GeolocateControl({\n      positionOptions: {\n        enableHighAccuracy: true,\n        maximumAge: 1000,\n        timeout: 6000,\n      },\n      trackUserLocation: true,\n      showUserHeading: true,\n      showAccuracyCircle: false,\n      fitBoundsOptions: {\n        maxZoom: 17.5,\n        animate: true,\n      },\n    });\n\n    this.isFirstLocation = true;\n    this.isTracking = false;\n    this.userInitiatedGeolocation = false;\n\n    // Override the original _onSuccess method from the geolocate control\n    const originalOnSuccess = this.geolocateControl._onSuccess;\n    this.geolocateControl._onSuccess = (position) => {\n      const userPosition = [position.coords.longitude, position.coords.latitude];\n      console.log('[DEBUG] _onSuccess - Position received:', userPosition);\n\n      const isWithin = this.isWithinBoundary(userPosition);\n      console.log(\n        '[DEBUG] _onSuccess - Before check: userInitiatedGeolocation =',\n        this.userInitiatedGeolocation,\n        ', isWithinBoundary =',\n        isWithin\n      );\n\n      // Only do boundary check if user clicked the button\n      if (this.userInitiatedGeolocation && !isWithin) {\n        console.warn(\n          '[DEBUG] _onSuccess - User clicked AND is outside boundary. Preventing geolocation and showing popup.'\n        );\n\n        // Reset geolocate control state\n        this.geolocateControl._watchState = 'OFF';\n        if (this.geolocateControl._geolocateButton) {\n          this.geolocateControl._geolocateButton.classList.remove('mapboxgl-ctrl-geolocate-active');\n          this.geolocateControl._geolocateButton.classList.remove(\n            'mapboxgl-ctrl-geolocate-waiting'\n          );\n          console.log('[DEBUG] _onSuccess - Geolocate button classes removed.');\n        }\n\n        // Show boundary popup and highlight boundary\n        this.showBoundaryLayers();\n        console.log('[DEBUG] _onSuccess - Calling showBoundaryPopup().');\n        this.showBoundaryPopup();\n\n        // Remove any user location marker that might have been added\n        if (this.geolocateControl._userLocationDotMarker) {\n          console.log('[DEBUG] _onSuccess - Removing user location dot marker.');\n          this.geolocateControl._userLocationDotMarker.remove();\n        }\n\n        this.userInitiatedGeolocation = false;\n        console.log('[DEBUG] _onSuccess - userInitiatedGeolocation flag reset to false.');\n        return;\n      }\n\n      console.log(\n        '[DEBUG] _onSuccess - User is within boundary OR check was not user-initiated. Proceeding with original _onSuccess.'\n      );\n      originalOnSuccess.call(this.geolocateControl, position);\n      this.userInitiatedGeolocation = false;\n      console.log(\n        '[DEBUG] _onSuccess - userInitiatedGeolocation flag reset after normal processing.'\n      );\n    };\n\n    // Handle errors\n    this.geolocateControl.on('error', (error) => {\n      console.error('[DEBUG] Geolocation error event triggered:', error);\n      if (this.userInitiatedGeolocation) {\n        console.warn('[DEBUG] Geolocation error occurred after user initiated the request.');\n        this.handleGeolocationError(error);\n      } else {\n        console.log(\n          '[DEBUG] Geolocation error occurred during automatic tracking or initial load.'\n        );\n      }\n      this.userInitiatedGeolocation = false;\n      console.log('[DEBUG] Geolocation error - userInitiatedGeolocation flag reset.');\n    });\n\n    // Setup the button click handler\n    this.map.once('idle', () => {\n      const geolocateButton = document.querySelector('.mapboxgl-ctrl-geolocate');\n      if (geolocateButton && geolocateButton.parentElement) {\n        geolocateButton.addEventListener(\n          'click',\n          (event) => {\n            console.log(\n              '[DEBUG] Geolocate button CLICKED. Setting userInitiatedGeolocation = true.'\n            );\n            this.userInitiatedGeolocation = true;\n            console.log('[DEBUG] Geolocate button click - Showing boundary layers.');\n            this.showBoundaryLayers();\n          },\n          true\n        );\n      } else {\n        console.warn('[DEBUG] Could not find geolocate button after map idle.');\n      }\n    });\n\n    this.geolocateControl.on('trackuserlocationstart', () => {\n      console.log('Location tracking started');\n      console.log('[DEBUG] trackuserlocationstart event - Showing boundary layers.');\n      this.isTracking = true;\n      this.showBoundaryLayers();\n    });\n\n    this.geolocateControl.on('trackuserlocationend', () => {\n      console.log('Location tracking ended');\n      this.isTracking = false;\n      this.isFirstLocation = true;\n      this.map.easeTo({ bearing: 0, pitch: 45 });\n      this.clearSearchRadius();\n\n      if (this.distanceMarkers) {\n        this.distanceMarkers.forEach((marker) => marker.remove());\n        this.distanceMarkers = [];\n      }\n    });\n\n    // Add controls to map\n    this.map.addControl(this.geolocateControl, 'bottom-right');\n    this.map.addControl(new mapboxgl.NavigationControl(), 'top-right');\n  }\n\n  /**\n   * Setup search radius visualization\n   */\n  setupSearchRadius() {\n    this.map.on('load', () => {\n      if (this.map.getSource(this.searchRadiusId)) {\n        console.log('[DEBUG] Search radius source already exists on load.');\n        return;\n      }\n      // Setup inner radius\n      this.map.addSource(this.searchRadiusId, {\n        type: 'geojson',\n        data: {\n          type: 'Feature',\n          geometry: { type: 'Polygon', coordinates: [[]] },\n        },\n      });\n\n      this.map.addLayer({\n        id: this.searchRadiusId,\n        type: 'fill-extrusion',\n        source: this.searchRadiusId,\n        paint: {\n          'fill-extrusion-color': '#4B83F2',\n          'fill-extrusion-opacity': 0.08,\n          'fill-extrusion-height': 1,\n          'fill-extrusion-base': 0,\n        },\n      });\n\n      // Setup outer radius\n      this.map.addSource(this.searchRadiusOuterId, {\n        type: 'geojson',\n        data: {\n          type: 'Feature',\n          geometry: { type: 'Polygon', coordinates: [[]] },\n        },\n      });\n\n      this.map.addLayer({\n        id: this.searchRadiusOuterId,\n        type: 'fill-extrusion',\n        source: this.searchRadiusOuterId,\n        paint: {\n          'fill-extrusion-color': '#4B83F2',\n          'fill-extrusion-opacity': 0.04,\n          'fill-extrusion-height': 2,\n          'fill-extrusion-base': 0,\n        },\n      });\n      console.log('[DEBUG] Search radius layers added.');\n    });\n  }\n\n  /**\n   * Setup boundary circle visualization\n   */\n  setupBoundaryCheck() {\n    this.map.on('load', () => {\n      if (this.map.getSource('boundary-circle')) {\n        console.log('[DEBUG] Boundary circle source already exists on load.');\n        return;\n      }\n      this.map.addSource('boundary-circle', {\n        type: 'geojson',\n        data: this.createBoundaryCircle(),\n      });\n\n      this.map.addLayer({\n        id: 'boundary-fill',\n        type: 'fill',\n        source: 'boundary-circle',\n        paint: {\n          'fill-color': '#4B83F2',\n          'fill-opacity': 0.03,\n        },\n        layout: {\n          visibility: 'none',\n        },\n      });\n\n      this.map.addLayer({\n        id: 'boundary-line',\n        type: 'line',\n        source: 'boundary-circle',\n        paint: {\n          'line-color': '#4B83F2',\n          'line-width': 2,\n          'line-dasharray': [3, 3],\n        },\n        layout: {\n          visibility: 'none',\n        },\n      });\n      console.log('[DEBUG] Boundary check layers added.');\n    });\n  }\n\n  /**\n   * Show boundary visualization with animation\n   */\n  showBoundaryLayers() {\n    console.log('[DEBUG] showBoundaryLayers called.');\n    this.boundaryLayerIds.forEach((layerId) => {\n      if (this.map.getLayer(layerId)) {\n        this.map.setLayoutProperty(layerId, 'visibility', 'visible');\n\n        if (layerId === 'boundary-fill') {\n          let opacity = 0;\n          const animateOpacity = () => {\n            if (opacity < 0.03) {\n              opacity += 0.005;\n              this.map.setPaintProperty(layerId, 'fill-opacity', opacity);\n              requestAnimationFrame(animateOpacity);\n            }\n          };\n          animateOpacity();\n        }\n      } else {\n        console.warn(`[DEBUG] Layer ${layerId} not found in showBoundaryLayers.`);\n      }\n    });\n  }\n\n  /**\n   * Hide boundary visualization with animation\n   */\n  hideBoundaryLayers() {\n    console.log('[DEBUG] hideBoundaryLayers called.');\n    this.boundaryLayerIds.forEach((layerId) => {\n      if (this.map.getLayer(layerId)) {\n        if (layerId === 'boundary-fill') {\n          let opacity = this.map.getPaintProperty(layerId, 'fill-opacity') || 0.03;\n          const animateOpacity = () => {\n            if (opacity > 0) {\n              opacity -= 0.005;\n              const currentOpacity = Math.max(0, opacity);\n              this.map.setPaintProperty(layerId, 'fill-opacity', currentOpacity);\n              if (currentOpacity > 0) {\n                requestAnimationFrame(animateOpacity);\n              } else {\n                this.map.setLayoutProperty(layerId, 'visibility', 'none');\n              }\n            } else {\n              this.map.setLayoutProperty(layerId, 'visibility', 'none');\n            }\n          };\n          animateOpacity();\n        } else {\n          this.map.setLayoutProperty(layerId, 'visibility', 'none');\n        }\n      } else {\n        console.warn(`[DEBUG] Layer ${layerId} not found in hideBoundaryLayers.`);\n      }\n    });\n  }\n\n  /**\n   * Update search radius visualization around user\n   */\n  updateSearchRadius(center) {\n    if (!this.map.getSource(this.searchRadiusId)) {\n      console.warn('[DEBUG] updateSearchRadius - Source not found:', this.searchRadiusId);\n      return;\n    }\n\n    // Create circle coordinates\n    const generateCircle = (center, radiusInM, pointCount = 64) => {\n      const point = {\n        latitude: center[1],\n        longitude: center[0],\n      };\n\n      const radiusKm = radiusInM / 1000;\n      const points = [];\n\n      // Convert km to degrees based on latitude\n      const degreesLongPerKm = radiusKm / (111.32 * Math.cos((point.latitude * Math.PI) / 180));\n      const degreesLatPerKm = radiusKm / 110.574;\n\n      // Generate points around the circle\n      for (let i = 0; i < pointCount; i++) {\n        const angle = (i / pointCount) * (2 * Math.PI);\n        const dx = degreesLongPerKm * Math.cos(angle);\n        const dy = degreesLatPerKm * Math.sin(angle);\n        points.push([point.longitude + dx, point.latitude + dy]);\n      }\n\n      // Close the loop\n      points.push(points[0]);\n      return points;\n    };\n\n    const circleCoords = generateCircle(center, this.radiusInMeters);\n\n    // Update both radius layers\n    [this.searchRadiusId, this.searchRadiusOuterId].forEach((sourceId) => {\n      const source = this.map.getSource(sourceId);\n      if (source) {\n        source.setData({\n          type: 'Feature',\n          geometry: {\n            type: 'Polygon',\n            coordinates: [circleCoords],\n          },\n        });\n      } else {\n        console.warn(`[DEBUG] updateSearchRadius - Source not found during update: ${sourceId}`);\n      }\n    });\n  }\n\n  /**\n   * Clear search radius visualization\n   */\n  clearSearchRadius() {\n    if (this.map.getSource(this.searchRadiusId)) {\n      [this.searchRadiusId, this.searchRadiusOuterId].forEach((sourceId) => {\n        const source = this.map.getSource(sourceId);\n        if (source) {\n          source.setData({\n            type: 'Feature',\n            geometry: {\n              type: 'Polygon',\n              coordinates: [[]],\n            },\n          });\n        } else {\n          console.warn(`[DEBUG] clearSearchRadius - Source not found: ${sourceId}`);\n        }\n      });\n    } else {\n      console.warn('[DEBUG] clearSearchRadius - Source not found initially:', this.searchRadiusId);\n    }\n  }\n\n  /**\n   * Handle geolocation errors\n   */\n  handleGeolocationError(error) {\n    console.error('[DEBUG] handleGeolocationError called with error:', error);\n    console.error('Geolocation error code:', error.code);\n    console.error('Geolocation error message:', error.message);\n\n    const errorMessages = {\n      1: 'Locatie toegang geweigerd. Schakel het in bij je instellingen.',\n      2: 'Locatie niet beschikbaar. Controleer je apparaat instellingen.',\n      3: 'Verzoek verlopen. Probeer opnieuw.',\n      default: 'Er is een fout opgetreden bij het ophalen van je locatie.',\n    };\n\n    this.showNotification(errorMessages[error.code] || errorMessages.default);\n  }\n\n  /**\n   * Show notification to user\n   */\n  showNotification(message) {\n    console.log('[DEBUG] Displaying notification:', message);\n    const notification = document.createElement('div');\n    notification.className = 'geolocation-error-notification';\n    notification.textContent = message;\n    document.body.appendChild(notification);\n\n    setTimeout(() => notification.remove(), 5000);\n  }\n\n  /**\n   * Create boundary circle GeoJSON\n   */\n  createBoundaryCircle() {\n    const center = {\n      latitude: this.centerPoint[1],\n      longitude: this.centerPoint[0],\n    };\n\n    const radiusKm = this.boundaryRadius;\n    const points = [];\n\n    // Convert km to degrees based on latitude\n    const degreesLongPerKm = radiusKm / (111.32 * Math.cos((center.latitude * Math.PI) / 180));\n    const degreesLatPerKm = radiusKm / 110.574;\n\n    // Generate points around the circle\n    for (let i = 0; i <= 64; i++) {\n      const angle = (i / 64) * (2 * Math.PI);\n      const dx = degreesLongPerKm * Math.cos(angle);\n      const dy = degreesLatPerKm * Math.sin(angle);\n      points.push([center.longitude + dx, center.latitude + dy]);\n    }\n\n    return {\n      type: 'Feature',\n      properties: {},\n      geometry: {\n        type: 'Polygon',\n        coordinates: [points],\n      },\n    };\n  }\n\n  /**\n   * Check if position is within boundary\n   */\n  isWithinBoundary(position) {\n    const distance = this.calculateDistance(\n      position[1],\n      position[0],\n      this.centerPoint[1],\n      this.centerPoint[0]\n    );\n    const isWithin = distance <= this.boundaryRadius;\n    return isWithin;\n  }\n\n  /**\n   * Calculate distance between coordinates in km\n   */\n  calculateDistance(lat1, lon1, lat2, lon2) {\n    // Haversine formula\n    const toRad = (deg) => deg * (Math.PI / 180);\n\n    const dLat = toRad(lat2 - lat1);\n    const dLon = toRad(lon2 - lon1);\n\n    const a =\n      Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n      Math.cos(toRad(lat1)) * Math.cos(toRad(lat2)) * Math.sin(dLon / 2) * Math.sin(dLon / 2);\n\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    return 6371 * c; // Earth radius in km\n  }\n\n  /**\n   * Show boundary popup when user is outside boundary\n   */\n  showBoundaryPopup() {\n    console.log('[DEBUG] showBoundaryPopup started.');\n\n    // Remove existing popup if any\n    const existingPopup = document.querySelector('.location-boundary-popup');\n    if (existingPopup) {\n      console.log('[DEBUG] Removing existing location-boundary-popup.');\n      existingPopup.remove();\n    }\n\n    // Create new popup\n    const popup = document.createElement('div');\n    popup.className = 'location-boundary-popup';\n    console.log('[DEBUG] Created new popup element.');\n\n    const heading = document.createElement('h3');\n    heading.textContent = 'Kom naar Heerlen';\n\n    const text = document.createElement('p');\n    text.textContent =\n      'Deze functie is alleen beschikbaar binnen de blauwe cirkel op de kaart. Kom naar het centrum van Heerlen om de interactieve kaart te gebruiken!';\n\n    const button = document.createElement('button');\n    button.textContent = 'Ik kom er aan!';\n\n    // Handle button click\n    const self = this;\n    button.addEventListener('click', function () {\n      console.log('[DEBUG] Boundary popup button clicked.');\n      if (window.innerWidth <= 768) {\n        popup.style.transform = 'translateY(100%)';\n      } else {\n        popup.style.transform = 'translateX(120%)';\n      }\n\n      setTimeout(() => {\n        console.log('[DEBUG] Removing boundary popup after click.');\n        popup.remove();\n      }, 600);\n\n      setTimeout(() => {\n        console.log('[DEBUG] Hiding boundary layers after popup button click.');\n        self.hideBoundaryLayers();\n      }, 200);\n\n      // Fly back to intro animation location\n      const finalZoom = window.matchMedia('(max-width: 479px)').matches ? 17 : 18;\n\n      console.log('[DEBUG] Flying back to intro location after popup button click.');\n      self.map.flyTo({\n        center: CONFIG.MAP.center,\n        zoom: finalZoom,\n        pitch: 55,\n        bearing: -17.6,\n        duration: 3000,\n        essential: true,\n        easing: (t) => t * (2 - t),\n      });\n    });\n\n    // Assemble popup\n    popup.appendChild(heading);\n    popup.appendChild(text);\n    popup.appendChild(button);\n    document.body.appendChild(popup);\n    console.log('[DEBUG] Boundary popup appended to document body.');\n\n    // Highlight boundary\n    if (this.map.getLayer('boundary-fill')) {\n      console.log('[DEBUG] Highlighting boundary layers.');\n      this.map.setPaintProperty('boundary-fill', 'fill-opacity', 0.05);\n      this.map.setPaintProperty('boundary-line', 'line-width', 3);\n\n      setTimeout(() => {\n        console.log('[DEBUG] Resetting boundary layer highlight.');\n        if (this.map.getLayer('boundary-fill')) {\n          this.map.setPaintProperty('boundary-fill', 'fill-opacity', 0.03);\n        }\n        if (this.map.getLayer('boundary-line')) {\n          this.map.setPaintProperty('boundary-line', 'line-width', 2);\n        }\n      }, 2000);\n    } else {\n      console.warn('[DEBUG] Boundary layers not found for highlighting in showBoundaryPopup.');\n    }\n\n    // Fly to center to show the boundary (only if not already flying)\n    if (!this.map.isMoving() && !this.map.isEasing()) {\n      console.log('[DEBUG] Flying to boundary center to show the area.');\n      this.map.flyTo({\n        center: this.centerPoint,\n        zoom: 14,\n        pitch: 0,\n        bearing: 0,\n        duration: 1500,\n      });\n    } else {\n      console.log(\n        '[DEBUG] Skipping flyTo center in showBoundaryPopup because map is already moving.'\n      );\n    }\n\n    // Show popup with animation\n    requestAnimationFrame(() => {\n      popup.offsetHeight;\n      popup.classList.add('show');\n      console.log(\"[DEBUG] Added 'show' class to boundary popup.\");\n    });\n\n    console.log('[DEBUG] showBoundaryPopup finished.');\n  }\n}\n", "// Marker management module\n\nimport { state } from './state.js';\nimport { CONFIG } from './config.js';\n\n/**\n * Load marker icons\n */\nexport function loadIcons(map) {\n  // Get unique icons from features\n  const uniqueIcons = [...new Set(state.mapLocations.features\n    .map((feature) => feature.properties.icon)\n    .filter((icon) => icon) // Filter out null/undefined icons\n  )];\n\n  // Load each icon\n  uniqueIcons.forEach((iconUrl) => {\n    map.loadImage(iconUrl, (error, image) => {\n      if (error) {\n        console.warn('Failed to load icon:', iconUrl, error);\n        return;\n      }\n      map.addImage(iconUrl, image);\n    });\n  });\n}\n\n/**\n * Add custom markers to map\n */\nexport function addMarkers(map) {\n  if (state.markersAdded) return;\n\n  console.log('Adding markers to map...');\n\n  // Load icons first\n  loadIcons(map);\n\n  // Add source\n  map.addSource('locations', {\n    type: 'geojson',\n    data: state.mapLocations,\n  });\n\n  // Add layers\n  const layers = [\n    // Circle marker layer\n    {\n      id: 'location-markers',\n      type: 'circle',\n      paint: {\n        'circle-color': [\n          'case',\n          ['==', ['get', 'type'], 'ar'],\n          ['get', 'arkleur'], // Use arkleur property for AR markers\n          ['get', 'color'], // Use normal color property for other markers\n        ],\n        'circle-radius': [\n          'interpolate',\n          ['linear'],\n          ['zoom'],\n          CONFIG.MARKER_ZOOM.min,\n          2,\n          CONFIG.MARKER_ZOOM.small,\n          5,\n          CONFIG.MARKER_ZOOM.medium,\n          8,\n          CONFIG.MARKER_ZOOM.large,\n          10,\n        ],\n        'circle-stroke-width': 1,\n        'circle-stroke-color': '#ffffff',\n        'circle-opacity': 0,\n      },\n    },\n    // Icon layer\n    {\n      id: 'location-icons',\n      type: 'symbol',\n      layout: {\n        'icon-image': ['get', 'icon'],\n        'icon-size': [\n          'interpolate',\n          ['linear'],\n          ['zoom'],\n          CONFIG.MARKER_ZOOM.min,\n          0.05,\n          CONFIG.MARKER_ZOOM.small,\n          0.08,\n          CONFIG.MARKER_ZOOM.medium,\n          0.12,\n          CONFIG.MARKER_ZOOM.large,\n          0.15,\n        ],\n        'icon-allow-overlap': true,\n        'icon-anchor': 'center',\n      },\n      paint: {\n        'icon-opacity': 0,\n      },\n    },\n    // Label layer\n    {\n      id: 'location-labels',\n      type: 'symbol',\n      layout: {\n        'text-field': ['get', 'name'],\n        'text-size': [\n          'interpolate',\n          ['linear'],\n          ['zoom'],\n          CONFIG.MARKER_ZOOM.min,\n          8,\n          CONFIG.MARKER_ZOOM.small,\n          10,\n          CONFIG.MARKER_ZOOM.medium,\n          11,\n          CONFIG.MARKER_ZOOM.large,\n          12,\n        ],\n        'text-offset': [0, 1],\n        'text-anchor': 'top',\n        'text-allow-overlap': false,\n      },\n      paint: {\n        'text-color': ['get', 'color'],\n        'text-halo-color': '#ffffff',\n        'text-halo-width': 2,\n        'text-opacity': 0,\n      },\n    },\n  ];\n\n  // Add each layer\n  layers.forEach((layer) => map.addLayer({ ...layer, source: 'locations' }));\n\n  // Setup marker hover effects\n  setupMarkerInteractions(map);\n\n  // Animate marker appearance\n  animateMarkerAppearance(map);\n\n  state.markersAdded = true;\n}\n\n/**\n * Animate marker appearance\n */\nfunction animateMarkerAppearance(map) {\n  let opacity = 0;\n  const animateMarkers = () => {\n    opacity += 0.1;\n    \n    // Check if layers still exist before setting paint properties\n    if (map.getLayer('location-markers')) {\n      map.setPaintProperty('location-markers', 'circle-opacity', opacity);\n    }\n    if (map.getLayer('location-icons')) {\n      map.setPaintProperty('location-icons', 'icon-opacity', opacity);\n    }\n    if (map.getLayer('location-labels')) {\n      map.setPaintProperty('location-labels', 'text-opacity', opacity);\n    }\n\n    if (opacity < 1) {\n      requestAnimationFrame(animateMarkers);\n    }\n  };\n\n  setTimeout(animateMarkers, 100);\n}\n\n/**\n * Setup marker hover effects\n */\nfunction setupMarkerInteractions(map) {\n  map.on('mouseenter', 'location-markers', () => {\n    map.getCanvas().style.cursor = 'pointer';\n  });\n\n  map.on('mouseleave', 'location-markers', () => {\n    map.getCanvas().style.cursor = '';\n  });\n}\n\n/**\n * Update marker visibility based on zoom level\n */\nexport function updateMarkerVisibility(map, zoom) {\n  console.log('Updating marker visibility for zoom:', zoom);\n  \n  // You can add zoom-based visibility logic here if needed\n  // For now, the visibility is handled by the interpolation expressions in the layer styles\n}\n\n/**\n * Create custom marker element\n */\nexport function createCustomMarker(location) {\n  const markerEl = document.createElement('div');\n  markerEl.className = 'custom-marker';\n  \n  // Add location-specific styling if needed\n  if (location.properties.color) {\n    markerEl.style.backgroundColor = location.properties.color;\n  }\n  \n  return markerEl;\n}\n\n/**\n * Update markers data source\n */\nexport function updateMarkersData(map) {\n  if (map.getSource('locations')) {\n    map.getSource('locations').setData(state.mapLocations);\n    console.log('Markers data updated');\n  }\n}", "// Popup management module\n\nimport { setActivePopup, state } from './state.js';\nimport { CONFIG } from './config.js';\n\n/**\n * Main function to create and show a popup for a location\n * @param {Object} location - The location feature object\n * @param {Object} map - The mapbox map instance\n */\nexport async function createPopup(location, map) {\n  const coordinates = location.geometry.coordinates.slice();\n  const { properties } = location;\n  const isAR = properties.type === 'ar';\n\n  // Calculate offset based on screen size\n  const offset = window.matchMedia('(max-width: 479px)').matches ? [0, 200] : [0, 250];\n\n  // Fly to marker\n  map.flyTo({\n    center: coordinates,\n    offset,\n    duration: 800,\n    essential: true,\n  });\n\n  // Handle existing sidebar items\n  const visibleItem = $('.locations-map_item.is--show');\n  if (visibleItem.length) {\n    visibleItem.css({\n      opacity: '0',\n      transform: 'translateY(40px) scale(0.6)',\n    });\n  }\n\n  // Handle existing popup\n  if (state.activePopup) {\n    const popupContent = state.activePopup.getElement().querySelector('.mapboxgl-popup-content');\n    popupContent.style.transition = 'all 400ms cubic-bezier(0.68, -0.55, 0.265, 1.55)';\n    popupContent.style.transform = 'rotate(-5deg) translateY(20px) scale(0.8)';\n    popupContent.style.opacity = '0';\n  }\n\n  // Wait for animations to complete\n  await new Promise((resolve) => setTimeout(resolve, 400));\n\n  // Remove existing popup\n  if (state.activePopup) {\n    state.activePopup.remove();\n    setActivePopup(null);\n  }\n\n  // Only show sidebar for non-AR markers\n  if (!isAR) {\n    // Reset all sidebar items\n    $('.locations-map_item').removeClass('is--show').css({\n      display: 'none',\n      transform: 'translateY(40px) scale(0.6)',\n      opacity: '0',\n    });\n\n    // Show sidebar\n    $('.locations-map_wrapper').addClass('is--show');\n\n    // Show current sidebar item\n    const currentItem = $('.locations-map_item').eq(properties.arrayID);\n    currentItem.css({\n      display: 'block',\n      opacity: '0',\n      transform: 'translateY(40px) scale(0.6)',\n    });\n\n    // Force reflow\n    currentItem[0].offsetHeight;\n\n    // Animate sidebar item appearance\n    requestAnimationFrame(() => {\n      currentItem\n        .css({\n          transition: 'all 400ms cubic-bezier(0.68, -0.55, 0.265, 1.55)',\n          opacity: '1',\n          transform: 'translateY(0) scale(1)',\n        })\n        .addClass('is--show');\n    });\n  } else {\n    // For AR markers, hide the sidebar if visible\n    $('.locations-map_wrapper').removeClass('is--show');\n    $('.locations-map_item').removeClass('is--show');\n  }\n\n  // Create new popup\n  const popup = new mapboxgl.Popup({\n    offset: {\n      bottom: [0, -5],\n      top: [0, 0],\n      left: [0, 0],\n      right: [0, 0],\n    },\n    className: 'custom-popup',\n    closeButton: false,\n    maxWidth: '300px',\n    closeOnClick: false,\n    anchor: 'bottom',\n  });\n\n  // Update geolocation manager state and PAUSE TRACKING\n  if (window.geolocationManager) {\n    window.geolocationManager.isPopupOpen = true;\n\n    // Explicitly pause location tracking when popup is opened\n    if (window.geolocationManager.geolocateControl) {\n      // Store tracking state to restore later if needed\n      window.geolocationManager.wasTracking =\n        window.geolocationManager.geolocateControl._watchState === 'ACTIVE_LOCK';\n\n      // Disable auto-centering on user location\n      window.geolocationManager.pauseTracking();\n    }\n  }\n\n  // Create and add popup content\n  const { styles, html } = createPopupContent(properties);\n  popup.setLngLat(coordinates).setHTML(`${styles}${html}`).addTo(map);\n  setActivePopup(popup);\n\n  // Add popup close handler to restore tracking\n  popup.on('close', () => {\n    if (window.geolocationManager) {\n      window.geolocationManager.isPopupOpen = false;\n\n      // Restore tracking if it was active before\n      if (window.geolocationManager.wasTracking) {\n        window.geolocationManager.resumeTracking();\n      }\n    }\n  });\n\n  // Setup popup interactions\n  setupPopupInteractions(popup, properties, coordinates);\n  \n  return popup;\n}\n\nexport function closeActivePopup() {\n  if (state.activePopup) {\n    state.activePopup.remove();\n    setActivePopup(null);\n  }\n}\n\n//! ============= POPUP MANAGEMENT =============\n\n/**\n * Detecteert apparaattype en geeft de juiste AR-link terug\n * @param {Object} properties - De properties van het feature met links\n * @return {Object} Object met de juiste link en een boolean of het beschikbaar is\n */\nexport function getARLinkForDevice(properties) {\n  // Detecteer of gebruiker op mobiel apparaat zit\n  const isMobile =\n    /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ||\n    window.innerWidth <= 768;\n\n  // Logica voor welke link te gebruiken\n  if (isMobile) {\n    return {\n      link: properties.link_ar_mobile,\n      available: !!properties.link_ar_mobile,\n      deviceType: 'mobile',\n    };\n  }\n  return {\n    link: properties.link_ar_desktop,\n    available: !!properties.link_ar_desktop,\n    deviceType: 'desktop',\n  };\n}\n\n/**\n * Genereert HTML voor AR-knop gebaseerd op apparaattype\n * @param {Object} properties - De properties van het feature\n * @param {string} buttonClass - CSS class voor de knop\n * @param {string} buttonText - Tekst voor de knop\n * @return {string} HTML voor de knop\n */\nexport function createARButton(\n  properties,\n  buttonClass = 'impressie-button button-base',\n  buttonText = 'Start AR'\n) {\n  const linkInfo = getARLinkForDevice(properties);\n\n  if (!linkInfo.available) {\n    // Link niet beschikbaar voor dit apparaat\n    if (linkInfo.deviceType === 'desktop') {\n      return `<button class=\"${buttonClass} disabled\" disabled title=\"Deze AR-ervaring is alleen beschikbaar op mobiele apparaten\">\n                ${buttonText} <span class=\"mobile-only\">\uD83D\uDCF1</span>\n              </button>`;\n    }\n    return ''; // Geen knop tonen als er geen link is voor mobiel\n  }\n\n  // Voor mobile Snapchat links, gebruik speciale handler\n  if (linkInfo.deviceType === 'mobile' && linkInfo.link.startsWith('snapchat://')) {\n    return `<button class=\"${buttonClass}\" onclick=\"handleSnapchatLink('${linkInfo.link}')\">${buttonText}</button>`;\n  }\n\n  // Voor alle andere links, gebruik normale window.open\n  return `<button class=\"${buttonClass}\" onclick=\"window.open('${linkInfo.link}', '_blank')\">${buttonText}</button>`;\n}\n\n// Functie om Snapchat links te behandelen met fallback voor niet-ge\u00EFnstalleerde app\nexport function handleSnapchatLink(snapchatUri) {\n  // Snapchat App Store/Google Play links\n  const appStoreLink = 'https://apps.apple.com/app/snapchat/id447188370';\n  const playStoreLink = 'https://play.google.com/store/apps/details?id=com.snapchat.android';\n\n  // Controleer of we op iOS of Android zijn\n  const isAndroid = /Android/i.test(navigator.userAgent);\n  const isIOS = /iPhone|iPad|iPod/i.test(navigator.userAgent);\n  const storeLink = isAndroid ? playStoreLink : appStoreLink;\n\n  // Probeer Snapchat te openen, met fallback\n  const now = Date.now();\n  const timeoutDuration = 1000; // 1 seconde wachttijd\n\n  // Poging om Snapchat te openen\n  window.location.href = snapchatUri;\n\n  // Check of de app is geopend na 1 seconde\n  setTimeout(function () {\n    // Als we nog steeds op dezelfde pagina zijn na 1 seconde,\n    // dan is de app waarschijnlijk niet ge\u00EFnstalleerd\n    if (Date.now() - now < timeoutDuration + 100) {\n      // Toon een melding en bied de mogelijkheid om Snapchat te downloaden\n      if (\n        confirm(\n          'Om deze AR ervaring te gebruiken heb je Snapchat nodig. Wil je Snapchat downloaden?'\n        )\n      ) {\n        window.location.href = storeLink;\n      }\n    }\n  }, timeoutDuration);\n};\n\nexport function createPopupContent(properties) {\n  const isAR = properties.type === 'ar';\n\n  // Common styles\n  const styles = `\n    <style>\n      .popup-side {\n        background-color: ${properties.color || '#6B46C1'};\n        clip-path: polygon(calc(100% - 0px) 26.5px, calc(100% - 0px) calc(100% - 26.5px), calc(100% - 0px) calc(100% - 26.5px), calc(100% - 0.34671999999995px) calc(100% - 22.20048px), calc(100% - 1.3505599999999px) calc(100% - 18.12224px), calc(100% - 2.95704px) calc(100% - 14.31976px), calc(100% - 5.11168px) calc(100% - 10.84752px), calc(100% - 7.76px) calc(100% - 7.76px), calc(100% - 10.84752px) calc(100% - 5.11168px), calc(100% - 14.31976px) calc(100% - 2.9570399999999px), calc(100% - 18.12224px) calc(100% - 1.35056px), calc(100% - 22.20048px) calc(100% - 0.34672px), calc(100% - 26.5px) calc(100% - 0px), calc(50% - -32.6px) calc(100% - 0px), calc(50% - -32.6px) calc(100% - 0px), calc(50% - -31.57121px) calc(100% - 0.057139999999947px), calc(50% - -30.56648px) calc(100% - 0.2255199999999px), calc(50% - -29.59427px) calc(100% - 0.50057999999996px), calc(50% - -28.66304px) calc(100% - 0.87775999999991px), calc(50% - -27.78125px) calc(100% - 1.3525px), calc(50% - -26.95736px) calc(100% - 1.92024px), calc(50% - -26.19983px) calc(100% - 2.57642px), calc(50% - -25.51712px) calc(100% - 3.31648px), calc(50% - -24.91769px) calc(100% - 4.13586px), calc(50% - -24.41px) calc(100% - 5.03px), calc(50% - -24.41px) calc(100% - 5.03px), calc(50% - -22.95654px) calc(100% - 7.6045699999999px), calc(50% - -21.23752px) calc(100% - 9.9929599999998px), calc(50% - -19.27298px) calc(100% - 12.17519px), calc(50% - -17.08296px) calc(100% - 14.13128px), calc(50% - -14.6875px) calc(100% - 15.84125px), calc(50% - -12.10664px) calc(100% - 17.28512px), calc(50% - -9.36042px) calc(100% - 18.44291px), calc(50% - -6.46888px) calc(100% - 19.29464px), calc(50% - -3.45206px) calc(100% - 19.82033px), calc(50% - -0.32999999999998px) calc(100% - 20px), calc(50% - -0.32999999999998px) calc(100% - 20px), calc(50% - 2.79179px) calc(100% - 19.82033px), calc(50% - 5.8079199999999px) calc(100% - 19.29464px), calc(50% - 8.69853px) calc(100% - 18.44291px), calc(50% - 11.44376px) calc(100% - 17.28512px), calc(50% - 14.02375px) calc(100% - 15.84125px), calc(50% - 16.41864px) calc(100% - 14.13128px), calc(50% - 18.60857px) calc(100% - 12.17519px), calc(50% - 20.57368px) calc(100% - 9.9929599999999px), calc(50% - 22.29411px) calc(100% - 7.60457px), calc(50% - 23.75px) calc(100% - 5.03px), calc(50% - 23.75px) calc(100% - 5.03px), calc(50% - 24.25769px) calc(100% - 4.1358599999999px), calc(50% - 24.85712px) calc(100% - 3.3164799999998px), calc(50% - 25.53983px) calc(100% - 2.57642px), calc(50% - 26.29736px) calc(100% - 1.92024px), calc(50% - 27.12125px) calc(100% - 1.3525px), calc(50% - 28.00304px) calc(100% - 0.87775999999997px), calc(50% - 28.93427px) calc(100% - 0.50057999999996px), calc(50% - 29.90648px) calc(100% - 0.22552000000002px), calc(50% - 30.91121px) calc(100% - 0.057140000000004px), calc(50% - 31.94px) calc(100% - 0px), 26.5px calc(100% - 0px), 26.5px calc(100% - 0px), 22.20048px calc(100% - 0.34671999999989px), 18.12224px calc(100% - 1.3505599999999px), 14.31976px calc(100% - 2.95704px), 10.84752px calc(100% - 5.1116799999999px), 7.76px calc(100% - 7.76px), 5.11168px calc(100% - 10.84752px), 2.95704px calc(100% - 14.31976px), 1.35056px calc(100% - 18.12224px), 0.34672px calc(100% - 22.20048px), 4.3855735949631E-31px calc(100% - 26.5px), 0px 26.5px, 0px 26.5px, 0.34672px 22.20048px, 1.35056px 18.12224px, 2.95704px 14.31976px, 5.11168px 10.84752px, 7.76px 7.76px, 10.84752px 5.11168px, 14.31976px 2.95704px, 18.12224px 1.35056px, 22.20048px 0.34672px, 26.5px 4.3855735949631E-31px, calc(50% - 26.74px) 0px, calc(50% - 26.74px) 0px, calc(50% - 25.31263px) 0.07137px, calc(50% - 23.91544px) 0.28176px, calc(50% - 22.55581px) 0.62559px, calc(50% - 21.24112px) 1.09728px, calc(50% - 19.97875px) 1.69125px, calc(50% - 18.77608px) 2.40192px, calc(50% - 17.64049px) 3.22371px, calc(50% - 16.57936px) 4.15104px, calc(50% - 15.60007px) 5.17833px, calc(50% - 14.71px) 6.3px, calc(50% - 14.71px) 6.3px, calc(50% - 13.6371px) 7.64798px, calc(50% - 12.446px) 8.89024px, calc(50% - 11.1451px) 10.01826px, calc(50% - 9.7428px) 11.02352px, calc(50% - 8.2475px) 11.8975px, calc(50% - 6.6676px) 12.63168px, calc(50% - 5.0115px) 13.21754px, calc(50% - 3.2876px) 13.64656px, calc(50% - 1.5043px) 13.91022px, calc(50% - -0.32999999999996px) 14px, calc(50% - -0.32999999999998px) 14px, calc(50% - -2.16431px) 13.9105px, calc(50% - -3.94768px) 13.6476px, calc(50% - -5.67177px) 13.2197px, calc(50% - -7.32824px) 12.6352px, calc(50% - -8.90875px) 11.9025px, calc(50% - -10.40496px) 11.03px, calc(50% - -11.80853px) 10.0261px, calc(50% - -13.11112px) 8.8992px, calc(50% - -14.30439px) 7.6577px, calc(50% - -15.38px) 6.31px, calc(50% - -15.38px) 6.31px, calc(50% - -16.27279px) 5.18562px, calc(50% - -17.25432px) 4.15616px, calc(50% - -18.31733px) 3.22714px, calc(50% - -19.45456px) 2.40408px, calc(50% - -20.65875px) 1.6925px, calc(50% - -21.92264px) 1.09792px, calc(50% - -23.23897px) 0.62586px, calc(50% - -24.60048px) 0.28184px, calc(50% - -25.99991px) 0.07138px, calc(50% - -27.43px) 8.9116630386686E-32px, calc(100% - 26.5px) 0px, calc(100% - 26.5px) 0px, calc(100% - 22.20048px) 0.34672px, calc(100% - 18.12224px) 1.35056px, calc(100% - 14.31976px) 2.95704px, calc(100% - 10.84752px) 5.11168px, calc(100% - 7.76px) 7.76px, calc(100% - 5.11168px) 10.84752px, calc(100% - 2.9570399999999px) 14.31976px, calc(100% - 1.35056px) 18.12224px, calc(100% - 0.34671999999995px) 22.20048px, calc(100% - 5.6843418860808E-14px) 26.5px);\n      }\n       \n    \n.fade-bottom {\n  position: absolute;\n  bottom: 6.5em;\n  left: 20px;\n  right: 20px;\n  height: 3.5em;\n  /* Gebruik dezelfde kleur als de popup maar met transparantie */\n  background: linear-gradient(to top, ${properties.color || '#6B46C1'} 0%, ${properties.color || '#6B46C1'}00 100%);\n  pointer-events: none;\n  z-index: 2;\n  transition: opacity 0.3s ease;\n}\n\n.popup-side.ar .fade-bottom {\n  background: linear-gradient(to top, ${properties.arkleur || '#6B46C1'} 0%, ${properties.arkleur || '#6B46C1'}00 100%);\n}\n\n/* CSS voor de top fade gradient */\n.fade-top {\n  position: absolute;\n  bottom: 18em;\n  left: 20px;\n  right: 20px;\n  height: 3.5em;\n  /* Gespiegelde gradient vergeleken met de bottom fade */\n  background: linear-gradient(to bottom, ${properties.color || '#6B46C1'} 0%, ${properties.color || '#6B46C1'}00 100%);\n  pointer-events: none;\n  z-index: 2;\n  transition: opacity 0.3s ease;\n}\n\n      \n  /* Add the mobile media query here */\n  @media screen and (max-width: 767px) {\n  .fade-top {\n  bottom: 14em !important;\n   }\n }\n\n/* Voor AR-popups een aparte styling */\n.popup-side.ar .fade-top {\n  background: linear-gradient(to bottom, ${properties.arkleur || '#6B46C1'} 0%, ${properties.arkleur || '#6B46C1'}00 100%);\n}\n\n    .close-button {\n      background: ${properties.color || '#6B46C1'};\n    }\n    \n    /* Stijlen voor AR popup - met zwarte tekst */\n    .popup-side.ar {\n      background-color: ${properties.arkleur || '#6B46C1'};\n      color: #000000;\n    }\n    \n    .close-button.ar {\n      background: ${properties.arkleur || '#6B46C1'};\n    }\n    \n    /* Kleur aanpassingen voor AR elementen */\n    .popup-side.ar .popup-title {\n      color: #000000;\n    }\n    \n    .popup-side.ar .popup-description {\n      color: #000000;\n    }\n    \n    /* Knoppen in AR popup */\n    .popup-side.ar .button-base {\n      color: #000000;\n      border-color: #000000;\n    }\n    \n    /* Styling voor achterkant van de popup */\n    .popup-side.ar.popup-back {\n      color: #000000;\n      background-color: ${properties.arkleur || '#6B46C1'};\n    }\n    \n    /* Zwarte tekst in AR popup details */\n    .popup-side.ar .popup-title.details {\n      color: #000000;\n    }\n    \n    /* Maak ook de 'X' in de sluitknop zwart */\n    .close-button.ar::before,\n    .close-button.ar::after {\n      background-color: #000000;\n    }\n    \n    ${\n      isAR\n        ? `\n      .ar-button {\n        border: 2px solid black;\n        font-weight: bold;\n        color: #000000;\n      }\n      .ar-description {\n        font-size: 0.9em;\n        margin-top: 10px;\n        color: #000000;\n      }\n    `\n        : ''\n    }\n  </style>\n  `;\n\n  // Different HTML structure for AR vs regular locations\n  if (isAR) {\n    return {\n      styles,\n      html: `\n      <div class=\"popup-wrapper\">\n        <button class=\"close-button ar\" aria-label=\"Close popup\"></button>\n        <div class=\"popup-side ar popup-front\">\n          <svg class=\"popup-border-overlay\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M0 227.13V240.82C0 246.99 5 252 11.18 252H19.2C25.38 252 30.38 246.99 30.38 240.82C30.38 246.99 35.4 252 41.56 252H49.6C55.75 252 60.75 247.01 60.76 240.85C60.79 247.01 65.79 252 71.94 252H79.98C86.15 252 91.16 246.99 91.16 240.82C91.16 246.99 96.16 252 102.34 252H110.36C116.53 252 121.53 247.01 121.54 240.84C121.55 247.01 126.55 252 132.72 252H140.74C146.35 252 150.99 247.87 151.79 242.48C152.6 247.87 157.24 252 162.85 252H170.87C177.04 252 182.04 247 182.05 240.84C182.06 247 187.06 252 193.23 252H201.25C207.03 252 211.78 247.62 212.36 242C212.95 247.62 217.7 252 223.48 252H231.5C237.68 252 242.68 246.99 242.68 240.82C242.68 246.99 247.69 252 253.86 252H261.89C268.05 252 273.05 247.01 273.06 240.85C273.08 247.01 278.08 252 284.24 252H292.27C298.44 252 303.45 246.99 303.45 240.82C303.45 246.99 308.46 252 314.63 252H322.66C328.82 252 333.82 247.01 333.83 240.84C333.85 247.01 338.85 252 345.01 252H353.04C359.21 252 364.22 246.99 364.22 240.82V227.13C364.22 220.95 359.21 215.95 353.04 215.95C359.21 215.95 364.22 210.94 364.22 204.77V191.07C364.22 184.9 359.21 179.89 353.04 179.89C359.21 179.89 364.22 174.89 364.22 168.71V155.02C364.22 149.52 360.25 144.96 355.02 144.03C360.25 143.09 364.22 138.53 364.22 133.03V119.34C364.22 113.17 359.22 108.17 353.06 108.16C359.22 108.16 364.22 103.15 364.22 96.98V83.29C364.22 77.11 359.21 72.11 353.04 72.11C359.21 72.11 364.22 67.1 364.22 60.93V47.23C364.22 41.06 359.21 36.05 353.04 36.05C359.21 36.05 364.22 31.05 364.22 24.87V11.18C364.22 5.01 359.21 0 353.04 0H345.01C338.85 0 333.85 4.99 333.83 11.16C333.82 4.99 328.82 0 322.66 0H314.63C308.46 0 303.45 5.01 303.45 11.18C303.45 5.01 298.44 0 292.27 0H284.24C278.08 0 273.08 4.99 273.06 11.16C273.05 4.99 268.05 0 261.89 0H253.86C247.69 0 242.68 5.01 242.68 11.18C242.68 5.01 237.68 0 231.5 0H223.48C217.7 0 212.95 4.38 212.36 10C211.78 4.38 207.03 0 201.25 0H193.23C187.06 0 182.06 5 182.05 11.16C182.04 5 177.04 0 170.87 0H162.85C157.24 0 152.6 4.13 151.79 9.52C150.99 4.13 146.35 0 140.74 0H132.72C126.55 0 121.55 4.99 121.54 11.16C121.53 4.99 116.53 0 110.36 0H102.34C96.16 0 91.16 5.01 91.16 11.18C91.16 5.01 86.15 0 79.98 0H71.94C65.79 0 60.79 4.99 60.76 11.16C60.75 4.99 55.75 0 49.6 0H41.56C35.4 0 30.38 5.01 30.38 11.18C30.38 5.01 25.38 0 19.2 0H11.18C5 0 0 5.01 0 11.18V24.87C0 31.05 5 36.05 11.18 36.05C5 36.05 0 41.06 0 47.23V60.93C0 67.1 5 72.11 11.18 72.11C5 72.11 0 77.11 0 83.29V96.98C0 103.15 4.99 108.15 11.16 108.16C4.99 108.17 0 113.17 0 119.34V133.03C0 138.53 3.97 143.09 9.19 144.03C3.97 144.96 0 149.52 0 155.02V168.71C0 174.89 5 179.89 11.18 179.89C5 179.89 0 184.9 0 191.07V204.77C0 210.94 5 215.95 11.18 215.95C5 215.95 0 220.95 0 227.13ZM333.83 24.89C333.85 31.06 338.85 36.05 345.01 36.05C338.85 36.05 333.85 41.05 333.83 47.21C333.82 41.05 328.82 36.05 322.66 36.05C328.82 36.05 333.82 31.06 333.83 24.89ZM333.83 60.95C333.85 67.11 338.85 72.11 345.01 72.11C338.85 72.11 333.85 77.1 333.83 83.27C333.82 77.1 328.82 72.11 322.66 72.11C328.82 72.11 333.82 67.11 333.83 60.95ZM333.83 119.32C333.82 113.16 328.83 108.17 322.68 108.16C328.83 108.16 333.82 103.16 333.83 97C333.85 103.16 338.83 108.15 344.99 108.16C338.83 108.17 333.85 113.16 333.83 119.32ZM343.03 144.03C337.81 144.96 333.84 149.51 333.83 155C333.82 149.51 329.86 144.96 324.64 144.03C329.86 143.09 333.82 138.54 333.83 133.05C333.83 138.54 337.81 143.09 343.03 144.03ZM333.83 168.73C333.85 174.9 338.85 179.89 345.01 179.89C338.85 179.89 333.85 184.89 333.83 191.05C333.82 184.89 328.82 179.89 322.66 179.89C328.82 179.89 333.82 174.9 333.83 168.73ZM333.83 204.79C333.85 210.95 338.85 215.95 345.01 215.95C338.85 215.95 333.85 220.94 333.83 227.11C333.82 220.94 328.82 215.95 322.66 215.95C328.82 215.95 333.82 210.95 333.83 204.79ZM303.45 24.87C303.45 31.05 308.46 36.05 314.63 36.05C308.46 36.05 303.45 41.06 303.45 47.23C303.45 41.06 298.44 36.05 292.27 36.05C298.44 36.05 303.45 31.05 303.45 24.87ZM303.45 60.93C303.45 67.1 308.46 72.11 314.63 72.11C308.46 72.11 303.45 77.11 303.45 83.29C303.45 77.11 298.44 72.11 292.27 72.11C298.44 72.11 303.45 67.1 303.45 60.93ZM303.45 119.34C303.45 113.17 298.45 108.17 292.29 108.16C298.45 108.16 303.45 103.15 303.45 96.98C303.45 103.15 308.45 108.15 314.61 108.16C308.45 108.17 303.45 113.17 303.45 119.34ZM312.64 144.03C307.42 144.96 303.45 149.52 303.45 155.02C303.45 149.52 299.48 144.96 294.25 144.03C299.48 143.09 303.45 138.53 303.45 133.03C303.45 138.53 307.42 143.09 312.64 144.03ZM303.45 168.71C303.45 174.89 308.46 179.89 314.63 179.89C308.46 179.89 303.45 184.9 303.45 191.07C303.45 184.9 298.44 179.89 292.27 179.89C298.44 179.89 303.45 174.89 303.45 168.71ZM303.45 204.77C303.45 210.94 308.46 215.95 314.63 215.95C308.46 215.95 303.45 220.95 303.45 227.13C303.45 220.95 298.44 215.95 292.27 215.95C298.44 215.95 303.45 210.94 303.45 204.77ZM273.06 24.9C273.08 31.06 278.08 36.05 284.24 36.05C278.08 36.05 273.08 41.05 273.06 47.21C273.05 41.05 268.05 36.05 261.89 36.05C268.05 36.05 273.05 31.06 273.06 24.9ZM273.06 60.95C273.08 67.11 278.08 72.11 284.24 72.11C278.08 72.11 273.08 77.1 273.06 83.26C273.05 77.1 268.05 72.11 261.89 72.11C268.05 72.11 273.05 67.11 273.06 60.95ZM273.06 119.31C273.05 113.16 268.06 108.17 261.91 108.16C268.06 108.16 273.05 103.16 273.06 97.01C273.08 103.16 278.07 108.15 284.22 108.16C278.07 108.17 273.08 113.16 273.06 119.31ZM282.26 144.03C277.04 144.96 273.08 149.51 273.06 154.99C273.05 149.51 269.09 144.96 263.87 144.03C269.09 143.09 273.05 138.54 273.06 133.06C273.08 138.54 277.04 143.09 282.26 144.03ZM273.06 168.74C273.08 174.9 278.08 179.89 284.24 179.89C278.08 179.89 273.08 184.89 273.06 191.05C273.05 184.89 268.05 179.89 261.89 179.89C268.05 179.89 273.05 174.9 273.06 168.74ZM273.06 204.79C273.08 210.95 278.08 215.95 284.24 215.95C278.08 215.95 273.08 220.94 273.06 227.1C273.05 220.94 268.05 215.95 261.89 215.95C268.05 215.95 273.05 210.95 273.06 204.79ZM242.68 24.87C242.68 31.05 247.69 36.05 253.86 36.05C247.69 36.05 242.68 41.06 242.68 47.23C242.68 41.06 237.68 36.05 231.5 36.05C237.68 36.05 242.68 31.05 242.68 24.87ZM242.68 60.93C242.68 67.1 247.69 72.11 253.86 72.11C247.69 72.11 242.68 77.11 242.68 83.29C242.68 77.11 237.68 72.11 231.5 72.11C237.68 72.11 242.68 67.1 242.68 60.93ZM242.68 119.34C242.68 113.17 237.69 108.17 231.52 108.16C237.69 108.16 242.68 103.15 242.68 96.98C242.68 103.15 247.68 108.15 253.84 108.16C247.68 108.17 242.68 113.17 242.68 119.34ZM251.87 144.03C246.65 144.96 242.68 149.52 242.68 155.02C242.68 149.52 238.71 144.96 233.49 144.03C238.71 143.09 242.68 138.53 242.68 133.03C242.68 138.53 246.65 143.09 251.87 144.03ZM242.68 168.71C242.68 174.89 247.69 179.89 253.86 179.89C247.69 179.89 242.68 184.9 242.68 191.07C242.68 184.9 237.68 179.89 231.5 179.89C237.68 179.89 242.68 174.89 242.68 168.71ZM242.68 204.77C242.68 210.94 247.69 215.95 253.86 215.95C247.69 215.95 242.68 220.95 242.68 227.13C242.68 220.95 237.68 215.95 231.5 215.95C237.68 215.95 242.68 210.94 242.68 204.77ZM212.36 26.05C212.95 31.68 217.7 36.05 223.48 36.05C217.7 36.05 212.95 40.43 212.36 46.05C211.78 40.43 207.03 36.05 201.25 36.05C207.03 36.05 211.78 31.68 212.36 26.05ZM212.36 62.11C212.95 67.73 217.7 72.11 223.48 72.11C217.7 72.11 212.95 76.48 212.36 82.11C211.78 76.48 207.03 72.11 201.25 72.11C207.03 72.11 211.78 67.73 212.36 62.11ZM212.36 118.16C211.78 112.54 207.04 108.17 201.28 108.16C207.04 108.16 211.78 103.78 212.36 98.16C212.95 103.78 217.69 108.15 223.46 108.16C217.69 108.17 212.95 112.54 212.36 118.16ZM221.49 144.03C216.64 144.89 212.88 148.88 212.36 153.85C211.86 148.88 208.1 144.89 203.24 144.03C208.1 143.16 211.86 139.17 212.36 134.2C212.88 139.17 216.64 143.16 221.49 144.03ZM212.36 169.89C212.95 175.52 217.7 179.89 223.48 179.89C217.7 179.89 212.95 184.27 212.36 189.89C211.78 184.27 207.03 179.89 201.25 179.89C207.03 179.89 211.78 175.52 212.36 169.89ZM212.36 205.95C212.95 211.57 217.7 215.95 223.48 215.95C217.7 215.95 212.95 220.32 212.36 225.95C211.78 220.32 207.03 215.95 201.25 215.95C207.03 215.95 211.78 211.57 212.36 205.95ZM182.05 24.89C182.06 31.06 187.06 36.05 193.23 36.05C187.06 36.05 182.06 41.05 182.05 47.22C182.04 41.05 177.04 36.05 170.87 36.05C177.04 36.05 182.04 31.06 182.05 24.89ZM182.05 60.95C182.06 67.11 187.06 72.11 193.23 72.11C187.06 72.11 182.06 77.1 182.05 83.27C182.04 77.1 177.04 72.11 170.87 72.11C177.04 72.11 182.04 67.11 182.05 60.95ZM182.05 119.32C182.04 113.16 177.05 108.17 170.9 108.16C177.05 108.16 182.04 103.16 182.05 97C182.06 103.16 187.05 108.15 193.22 108.16C187.05 108.17 182.06 113.16 182.05 119.32ZM191.24 144.03C186.03 144.96 182.06 149.51 182.05 155C182.04 149.51 178.09 144.96 172.86 144.03C178.09 143.09 182.04 138.54 182.05 133.05C182.06 138.54 186.03 143.09 191.24 144.03ZM182.05 168.73C182.06 174.9 187.06 179.89 193.23 179.89C187.06 179.89 182.06 184.89 182.05 191.05C182.04 184.89 177.04 179.89 170.87 179.89C177.04 179.89 182.04 174.9 182.05 168.73ZM182.05 204.79C182.06 210.95 187.06 215.95 193.23 215.95C187.06 215.95 182.06 220.94 182.05 227.11C182.04 220.94 177.04 215.95 170.87 215.95C177.04 215.95 182.04 210.95 182.05 204.79ZM151.79 26.53C152.6 31.92 157.24 36.05 162.85 36.05C157.24 36.05 152.6 40.18 151.79 45.57C150.99 40.18 146.35 36.05 140.74 36.05C146.35 36.05 150.99 31.92 151.79 26.53ZM151.79 62.59C152.6 67.98 157.24 72.11 162.85 72.11C157.24 72.11 152.6 76.24 151.79 81.63C150.99 76.24 146.35 72.11 140.74 72.11C146.35 72.11 150.99 67.98 151.79 62.59ZM151.79 117.68C151 112.3 146.36 108.17 140.76 108.16C146.36 108.16 151 104.02 151.79 98.64C152.6 104.02 157.23 108.15 162.84 108.16C157.23 108.17 152.6 112.3 151.79 117.68ZM160.86 144.03C156.18 144.86 152.5 148.62 151.79 153.35C151.1 148.62 147.41 144.86 142.73 144.03C147.41 143.19 151.1 139.43 151.79 134.7C152.5 139.43 156.18 143.19 160.86 144.03ZM151.79 170.37C152.6 175.76 157.24 179.89 162.85 179.89C157.24 179.89 152.6 184.02 151.79 189.41C150.99 184.02 146.35 179.89 140.74 179.89C146.35 179.89 150.99 175.76 151.79 170.37ZM151.79 206.43C152.6 211.82 157.24 215.95 162.85 215.95C157.24 215.95 152.6 220.08 151.79 225.47C150.99 220.08 146.35 215.95 140.74 215.95C146.35 215.95 150.99 211.82 151.79 206.43ZM121.54 24.89C121.55 31.06 126.55 36.05 132.72 36.05C126.55 36.05 121.55 41.05 121.54 47.21C121.53 41.05 116.53 36.05 110.36 36.05C116.53 36.05 121.53 31.06 121.54 24.89ZM121.54 60.95C121.55 67.11 126.55 72.11 132.72 72.11C126.55 72.11 121.55 77.1 121.54 83.27C121.53 77.1 116.53 72.11 110.36 72.11C116.53 72.11 121.53 67.11 121.54 60.95ZM121.54 119.32C121.53 113.16 116.54 108.17 110.38 108.16C116.54 108.16 121.53 103.16 121.54 97C121.55 103.16 126.54 108.15 132.69 108.16C126.54 108.17 121.55 113.16 121.54 119.32ZM130.73 144.03C125.51 144.96 121.54 149.51 121.54 155C121.53 149.51 117.56 144.96 112.35 144.03C117.56 143.09 121.53 138.54 121.54 133.05C121.54 138.54 125.51 143.09 130.73 144.03ZM121.54 168.73C121.55 174.9 126.55 179.89 132.72 179.89C126.55 179.89 121.55 184.89 121.54 191.05C121.53 184.89 116.53 179.89 110.36 179.89C116.53 179.89 121.53 174.9 121.54 168.73ZM121.54 204.79C121.55 210.95 126.55 215.95 132.72 215.95C126.55 215.95 121.55 220.94 121.54 227.11C121.53 220.94 116.53 215.95 110.36 215.95C116.53 215.95 121.53 210.95 121.54 204.79ZM91.16 24.87C91.16 31.05 96.16 36.05 102.34 36.05C96.16 36.05 91.16 41.06 91.16 47.23C91.16 41.06 86.15 36.05 79.98 36.05C86.15 36.05 91.16 31.05 91.16 24.87ZM91.16 60.93C91.16 67.1 96.16 72.11 102.34 72.11C96.16 72.11 91.16 77.11 91.16 83.29C91.16 77.11 86.15 72.11 79.98 72.11C86.15 72.11 91.16 67.1 91.16 60.93ZM91.16 119.34C91.16 113.17 86.16 108.17 79.99 108.16C86.16 108.16 91.16 103.15 91.16 96.98C91.16 103.15 96.16 108.15 102.31 108.16C96.16 108.17 91.16 113.17 91.16 119.34ZM100.35 144.03C95.12 144.96 91.16 149.52 91.16 155.02C91.16 149.52 87.18 144.96 81.95 144.03C87.18 143.09 91.16 138.53 91.16 133.03C91.16 138.53 95.12 143.09 100.35 144.03ZM91.16 168.71C91.16 174.89 96.16 179.89 102.34 179.89C96.16 179.89 91.16 184.9 91.16 191.07C91.16 184.9 86.15 179.89 79.98 179.89C86.15 179.89 91.16 174.89 91.16 168.71ZM91.16 204.77C91.16 210.94 96.16 215.95 102.34 215.95C96.16 215.95 91.16 220.95 91.16 227.13C91.16 220.95 86.15 215.95 79.98 215.95C86.15 215.95 91.16 210.94 91.16 204.77ZM60.76 24.9C60.79 31.06 65.79 36.05 71.94 36.05C65.79 36.05 60.79 41.05 60.76 47.21C60.75 41.05 55.75 36.05 49.6 36.05C55.75 36.05 60.75 31.06 60.76 24.9ZM60.76 60.95C60.79 67.11 65.79 72.11 71.94 72.11C65.79 72.11 60.79 77.1 60.76 83.26C60.75 77.1 55.75 72.11 49.6 72.11C55.75 72.11 60.75 67.11 60.76 60.95ZM60.76 119.31C60.75 113.16 55.76 108.17 49.61 108.16C55.76 108.16 60.75 103.16 60.76 97.01C60.79 103.16 65.78 108.15 71.92 108.16C65.78 108.17 60.79 113.16 60.76 119.31ZM69.97 144.03C64.74 144.96 60.79 149.51 60.76 154.99C60.75 149.51 56.79 144.96 51.57 144.03C56.79 143.09 60.75 138.54 60.76 133.06C60.79 138.54 64.74 143.09 69.97 144.03ZM60.76 168.74C60.79 174.9 65.79 179.89 71.94 179.89C65.79 179.89 60.79 184.89 60.76 191.05C60.75 184.89 55.75 179.89 49.6 179.89C55.75 179.89 60.75 174.9 60.76 168.74ZM60.76 204.79C60.79 210.95 65.79 215.95 71.94 215.95C65.79 215.95 60.79 220.94 60.76 227.1C60.75 220.94 55.75 215.95 49.6 215.95C55.75 215.95 60.75 210.95 60.76 204.79ZM30.38 24.87C30.38 31.05 35.4 36.05 41.56 36.05C35.4 36.05 30.38 41.06 30.38 47.23C30.38 41.06 25.38 36.05 19.2 36.05C25.38 36.05 30.38 31.05 30.38 24.87ZM30.38 60.93C30.38 67.1 35.4 72.11 41.56 72.11C35.4 72.11 30.38 77.11 30.38 83.29C30.38 77.11 25.38 72.11 19.2 72.11C25.38 72.11 30.38 67.1 30.38 60.93ZM30.38 119.34C30.38 113.17 25.4 108.17 19.23 108.16C25.4 108.16 30.38 103.15 30.38 96.98C30.38 103.15 35.38 108.15 41.54 108.16C35.38 108.17 30.38 113.17 30.38 119.34ZM39.57 144.03C34.35 144.96 30.38 149.52 30.38 155.02C30.38 149.52 26.41 144.96 21.19 144.03C26.41 143.09 30.38 138.53 30.38 133.03C30.38 138.53 34.35 143.09 39.57 144.03ZM30.38 168.71C30.38 174.89 35.4 179.89 41.56 179.89C35.4 179.89 30.38 184.9 30.38 191.07C30.38 184.9 25.38 179.89 19.2 179.89C25.38 179.89 30.38 174.89 30.38 168.71ZM30.38 204.77C30.38 210.94 35.4 215.95 41.56 215.95C35.4 215.95 30.38 220.95 30.38 227.13C30.38 220.95 25.38 215.95 19.2 215.95C25.38 215.95 30.38 210.94 30.38 204.77Z\" fill=\"url(#paint0_linear_3248_5)\"/>\n              <defs>\n              <linearGradient id=\"paint0_linear_3248_5\" x1=\"182.11\" y1=\"0\" x2=\"182.11\" y2=\"252\" gradientUnits=\"userSpaceOnUse\">\n                <stop offset=\"0\" stop-color=\"${properties.arkleur}\" stop-opacity=\"0\" />\n                <stop offset=\"0.3\" stop-color=\"${properties.arkleur}\" stop-opacity=\"1\" />\n              </linearGradient>\n            </defs>\n          </svg>\n          ${properties.image ? `<img src=\"${properties.image}\" class=\"popup-background-image\" alt=\"\">` : ''}\n          <div class=\"content-wrapper\">\n            <div class=\"popup-title\">${properties.name}</div>\n                        <div class=\"fade-top\"></div> \n            <div class=\"popup-description\">${properties.description}</div>\n                      <div class=\"fade-bottom\"></div>\n${properties.image ? createARButton(properties) : ''}\n            <button class=\"more-info-button button-base\">Instructie</button>\n          </div>\n        </div>\n        \n        <div class=\"popup-side ar popup-back\">\n          <div class=\"content-wrapper\">\n            <div class=\"popup-title details\">Instructie</div>\n            <div class=\"popup-ar-instructie\">${properties.instructie || 'Bekijk deze AR ervaring op je telefoon of desktop.'}</div>\n            <button class=\"more-info-button button-base\">Terug</button>\n${createARButton(properties, 'impressie-button button-base', 'Start AR')}\n          </div>\n        </div>\n      </div>\n      `,\n    };\n  }\n  // Regular location popup\n  return {\n    styles,\n    html: `\n        <div class=\"popup-wrapper\">\n          <button class=\"close-button\" aria-label=\"Close popup\"></button>\n          <div class=\"popup-side popup-front\">\n            <svg class=\"popup-border-overlay\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M0 227.13V240.82C0 246.99 5 252 11.18 252H19.2C25.38 252 30.38 246.99 30.38 240.82C30.38 246.99 35.4 252 41.56 252H49.6C55.75 252 60.75 247.01 60.76 240.85C60.79 247.01 65.79 252 71.94 252H79.98C86.15 252 91.16 246.99 91.16 240.82C91.16 246.99 96.16 252 102.34 252H110.36C116.53 252 121.53 247.01 121.54 240.84C121.55 247.01 126.55 252 132.72 252H140.74C146.35 252 150.99 247.87 151.79 242.48C152.6 247.87 157.24 252 162.85 252H170.87C177.04 252 182.04 247 182.05 240.84C182.06 247 187.06 252 193.23 252H201.25C207.03 252 211.78 247.62 212.36 242C212.95 247.62 217.7 252 223.48 252H231.5C237.68 252 242.68 246.99 242.68 240.82C242.68 246.99 247.69 252 253.86 252H261.89C268.05 252 273.05 247.01 273.06 240.85C273.08 247.01 278.08 252 284.24 252H292.27C298.44 252 303.45 246.99 303.45 240.82C303.45 246.99 308.46 252 314.63 252H322.66C328.82 252 333.82 247.01 333.83 240.84C333.85 247.01 338.85 252 345.01 252H353.04C359.21 252 364.22 246.99 364.22 240.82V227.13C364.22 220.95 359.21 215.95 353.04 215.95C359.21 215.95 364.22 210.94 364.22 204.77V191.07C364.22 184.9 359.21 179.89 353.04 179.89C359.21 179.89 364.22 174.89 364.22 168.71V155.02C364.22 149.52 360.25 144.96 355.02 144.03C360.25 143.09 364.22 138.53 364.22 133.03V119.34C364.22 113.17 359.22 108.17 353.06 108.16C359.22 108.16 364.22 103.15 364.22 96.98V83.29C364.22 77.11 359.21 72.11 353.04 72.11C359.21 72.11 364.22 67.1 364.22 60.93V47.23C364.22 41.06 359.21 36.05 353.04 36.05C359.21 36.05 364.22 31.05 364.22 24.87V11.18C364.22 5.01 359.21 0 353.04 0H345.01C338.85 0 333.85 4.99 333.83 11.16C333.82 4.99 328.82 0 322.66 0H314.63C308.46 0 303.45 5.01 303.45 11.18C303.45 5.01 298.44 0 292.27 0H284.24C278.08 0 273.08 4.99 273.06 11.16C273.05 4.99 268.05 0 261.89 0H253.86C247.69 0 242.68 5.01 242.68 11.18C242.68 5.01 237.68 0 231.5 0H223.48C217.7 0 212.95 4.38 212.36 10C211.78 4.38 207.03 0 201.25 0H193.23C187.06 0 182.06 5 182.05 11.16C182.04 5 177.04 0 170.87 0H162.85C157.24 0 152.6 4.13 151.79 9.52C150.99 4.13 146.35 0 140.74 0H132.72C126.55 0 121.55 4.99 121.54 11.16C121.53 4.99 116.53 0 110.36 0H102.34C96.16 0 91.16 5.01 91.16 11.18C91.16 5.01 86.15 0 79.98 0H71.94C65.79 0 60.79 4.99 60.76 11.16C60.75 4.99 55.75 0 49.6 0H41.56C35.4 0 30.38 5.01 30.38 11.18C30.38 5.01 25.38 0 19.2 0H11.18C5 0 0 5.01 0 11.18V24.87C0 31.05 5 36.05 11.18 36.05C5 36.05 0 41.06 0 47.23V60.93C0 67.1 5 72.11 11.18 72.11C5 72.11 0 77.11 0 83.29V96.98C0 103.15 4.99 108.15 11.16 108.16C4.99 108.17 0 113.17 0 119.34V133.03C0 138.53 3.97 143.09 9.19 144.03C3.97 144.96 0 149.52 0 155.02V168.71C0 174.89 5 179.89 11.18 179.89C5 179.89 0 184.9 0 191.07V204.77C0 210.94 5 215.95 11.18 215.95C5 215.95 0 220.95 0 227.13ZM333.83 24.89C333.85 31.06 338.85 36.05 345.01 36.05C338.85 36.05 333.85 41.05 333.83 47.21C333.82 41.05 328.82 36.05 322.66 36.05C328.82 36.05 333.82 31.06 333.83 24.89ZM333.83 60.95C333.85 67.11 338.85 72.11 345.01 72.11C338.85 72.11 333.85 77.1 333.83 83.27C333.82 77.1 328.82 72.11 322.66 72.11C328.82 72.11 333.82 67.11 333.83 60.95ZM333.83 119.32C333.82 113.16 328.83 108.17 322.68 108.16C328.83 108.16 333.82 103.16 333.83 97C333.85 103.16 338.83 108.15 344.99 108.16C338.83 108.17 333.85 113.16 333.83 119.32ZM343.03 144.03C337.81 144.96 333.84 149.51 333.83 155C333.82 149.51 329.86 144.96 324.64 144.03C329.86 143.09 333.82 138.54 333.83 133.05C333.83 138.54 337.81 143.09 343.03 144.03ZM333.83 168.73C333.85 174.9 338.85 179.89 345.01 179.89C338.85 179.89 333.85 184.89 333.83 191.05C333.82 184.89 328.82 179.89 322.66 179.89C328.82 179.89 333.82 174.9 333.83 168.73ZM333.83 204.79C333.85 210.95 338.85 215.95 345.01 215.95C338.85 215.95 333.85 220.94 333.83 227.11C333.82 220.94 328.82 215.95 322.66 215.95C328.82 215.95 333.82 210.95 333.83 204.79ZM303.45 24.87C303.45 31.05 308.46 36.05 314.63 36.05C308.46 36.05 303.45 41.06 303.45 47.23C303.45 41.06 298.44 36.05 292.27 36.05C298.44 36.05 303.45 31.05 303.45 24.87ZM303.45 60.93C303.45 67.1 308.46 72.11 314.63 72.11C308.46 72.11 303.45 77.11 303.45 83.29C303.45 77.11 298.44 72.11 292.27 72.11C298.44 72.11 303.45 67.1 303.45 60.93ZM303.45 119.34C303.45 113.17 298.45 108.17 292.29 108.16C298.45 108.16 303.45 103.15 303.45 96.98C303.45 103.15 308.45 108.15 314.61 108.16C308.45 108.17 303.45 113.17 303.45 119.34ZM312.64 144.03C307.42 144.96 303.45 149.52 303.45 155.02C303.45 149.52 299.48 144.96 294.25 144.03C299.48 143.09 303.45 138.53 303.45 133.03C303.45 138.53 307.42 143.09 312.64 144.03ZM303.45 168.71C303.45 174.89 308.46 179.89 314.63 179.89C308.46 179.89 303.45 184.9 303.45 191.07C303.45 184.9 298.44 179.89 292.27 179.89C298.44 179.89 303.45 174.89 303.45 168.71ZM303.45 204.77C303.45 210.94 308.46 215.95 314.63 215.95C308.46 215.95 303.45 220.95 303.45 227.13C303.45 220.95 298.44 215.95 292.27 215.95C298.44 215.95 303.45 210.94 303.45 204.77ZM273.06 24.9C273.08 31.06 278.08 36.05 284.24 36.05C278.08 36.05 273.08 41.05 273.06 47.21C273.05 41.05 268.05 36.05 261.89 36.05C268.05 36.05 273.05 31.06 273.06 24.9ZM273.06 60.95C273.08 67.11 278.08 72.11 284.24 72.11C278.08 72.11 273.08 77.1 273.06 83.26C273.05 77.1 268.05 72.11 261.89 72.11C268.05 72.11 273.05 67.11 273.06 60.95ZM273.06 119.31C273.05 113.16 268.06 108.17 261.91 108.16C268.06 108.16 273.05 103.16 273.06 97.01C273.08 103.16 278.07 108.15 284.22 108.16C278.07 108.17 273.08 113.16 273.06 119.31ZM282.26 144.03C277.04 144.96 273.08 149.51 273.06 154.99C273.05 149.51 269.09 144.96 263.87 144.03C269.09 143.09 273.05 138.54 273.06 133.06C273.08 138.54 277.04 143.09 282.26 144.03ZM273.06 168.74C273.08 174.9 278.08 179.89 284.24 179.89C278.08 179.89 273.08 184.89 273.06 191.05C273.05 184.89 268.05 179.89 261.89 179.89C268.05 179.89 273.05 174.9 273.06 168.74ZM273.06 204.79C273.08 210.95 278.08 215.95 284.24 215.95C278.08 215.95 273.08 220.94 273.06 227.1C273.05 220.94 268.05 215.95 261.89 215.95C268.05 215.95 273.05 210.95 273.06 204.79ZM242.68 24.87C242.68 31.05 247.69 36.05 253.86 36.05C247.69 36.05 242.68 41.06 242.68 47.23C242.68 41.06 237.68 36.05 231.5 36.05C237.68 36.05 242.68 31.05 242.68 24.87ZM242.68 60.93C242.68 67.1 247.69 72.11 253.86 72.11C247.69 72.11 242.68 77.11 242.68 83.29C242.68 77.11 237.68 72.11 231.5 72.11C237.68 72.11 242.68 67.1 242.68 60.93ZM242.68 119.34C242.68 113.17 237.69 108.17 231.52 108.16C237.69 108.16 242.68 103.15 242.68 96.98C242.68 103.15 247.68 108.15 253.84 108.16C247.68 108.17 242.68 113.17 242.68 119.34ZM251.87 144.03C246.65 144.96 242.68 149.52 242.68 155.02C242.68 149.52 238.71 144.96 233.49 144.03C238.71 143.09 242.68 138.53 242.68 133.03C242.68 138.53 246.65 143.09 251.87 144.03ZM242.68 168.71C242.68 174.89 247.69 179.89 253.86 179.89C247.69 179.89 242.68 184.9 242.68 191.07C242.68 184.9 237.68 179.89 231.5 179.89C237.68 179.89 242.68 174.89 242.68 168.71ZM242.68 204.77C242.68 210.94 247.69 215.95 253.86 215.95C247.69 215.95 242.68 220.95 242.68 227.13C242.68 220.95 237.68 215.95 231.5 215.95C237.68 215.95 242.68 210.94 242.68 204.77ZM212.36 26.05C212.95 31.68 217.7 36.05 223.48 36.05C217.7 36.05 212.95 40.43 212.36 46.05C211.78 40.43 207.03 36.05 201.25 36.05C207.03 36.05 211.78 31.68 212.36 26.05ZM212.36 62.11C212.95 67.73 217.7 72.11 223.48 72.11C217.7 72.11 212.95 76.48 212.36 82.11C211.78 76.48 207.03 72.11 201.25 72.11C207.03 72.11 211.78 67.73 212.36 62.11ZM212.36 118.16C211.78 112.54 207.04 108.17 201.28 108.16C207.04 108.16 211.78 103.78 212.36 98.16C212.95 103.78 217.69 108.15 223.46 108.16C217.69 108.17 212.95 112.54 212.36 118.16ZM221.49 144.03C216.64 144.89 212.88 148.88 212.36 153.85C211.86 148.88 208.1 144.89 203.24 144.03C208.1 143.16 211.86 139.17 212.36 134.2C212.88 139.17 216.64 143.16 221.49 144.03ZM212.36 169.89C212.95 175.52 217.7 179.89 223.48 179.89C217.7 179.89 212.95 184.27 212.36 189.89C211.78 184.27 207.03 179.89 201.25 179.89C207.03 179.89 211.78 175.52 212.36 169.89ZM212.36 205.95C212.95 211.57 217.7 215.95 223.48 215.95C217.7 215.95 212.95 220.32 212.36 225.95C211.78 220.32 207.03 215.95 201.25 215.95C207.03 215.95 211.78 211.57 212.36 205.95ZM182.05 24.89C182.06 31.06 187.06 36.05 193.23 36.05C187.06 36.05 182.06 41.05 182.05 47.22C182.04 41.05 177.04 36.05 170.87 36.05C177.04 36.05 182.04 31.06 182.05 24.89ZM182.05 60.95C182.06 67.11 187.06 72.11 193.23 72.11C187.06 72.11 182.06 77.1 182.05 83.27C182.04 77.1 177.04 72.11 170.87 72.11C177.04 72.11 182.04 67.11 182.05 60.95ZM182.05 119.32C182.04 113.16 177.05 108.17 170.9 108.16C177.05 108.16 182.04 103.16 182.05 97C182.06 103.16 187.05 108.15 193.22 108.16C187.05 108.17 182.06 113.16 182.05 119.32ZM191.24 144.03C186.03 144.96 182.06 149.51 182.05 155C182.04 149.51 178.09 144.96 172.86 144.03C178.09 143.09 182.04 138.54 182.05 133.05C182.06 138.54 186.03 143.09 191.24 144.03ZM182.05 168.73C182.06 174.9 187.06 179.89 193.23 179.89C187.06 179.89 182.06 184.89 182.05 191.05C182.04 184.89 177.04 179.89 170.87 179.89C177.04 179.89 182.04 174.9 182.05 168.73ZM182.05 204.79C182.06 210.95 187.06 215.95 193.23 215.95C187.06 215.95 182.06 220.94 182.05 227.11C182.04 220.94 177.04 215.95 170.87 215.95C177.04 215.95 182.04 210.95 182.05 204.79ZM151.79 26.53C152.6 31.92 157.24 36.05 162.85 36.05C157.24 36.05 152.6 40.18 151.79 45.57C150.99 40.18 146.35 36.05 140.74 36.05C146.35 36.05 150.99 31.92 151.79 26.53ZM151.79 62.59C152.6 67.98 157.24 72.11 162.85 72.11C157.24 72.11 152.6 76.24 151.79 81.63C150.99 76.24 146.35 72.11 140.74 72.11C146.35 72.11 150.99 67.98 151.79 62.59ZM151.79 117.68C151 112.3 146.36 108.17 140.76 108.16C146.36 108.16 151 104.02 151.79 98.64C152.6 104.02 157.23 108.15 162.84 108.16C157.23 108.17 152.6 112.3 151.79 117.68ZM160.86 144.03C156.18 144.86 152.5 148.62 151.79 153.35C151.1 148.62 147.41 144.86 142.73 144.03C147.41 143.19 151.1 139.43 151.79 134.7C152.5 139.43 156.18 143.19 160.86 144.03ZM151.79 170.37C152.6 175.76 157.24 179.89 162.85 179.89C157.24 179.89 152.6 184.02 151.79 189.41C150.99 184.02 146.35 179.89 140.74 179.89C146.35 179.89 150.99 175.76 151.79 170.37ZM151.79 206.43C152.6 211.82 157.24 215.95 162.85 215.95C157.24 215.95 152.6 220.08 151.79 225.47C150.99 220.08 146.35 215.95 140.74 215.95C146.35 215.95 150.99 211.82 151.79 206.43ZM121.54 24.89C121.55 31.06 126.55 36.05 132.72 36.05C126.55 36.05 121.55 41.05 121.54 47.21C121.53 41.05 116.53 36.05 110.36 36.05C116.53 36.05 121.53 31.06 121.54 24.89ZM121.54 60.95C121.55 67.11 126.55 72.11 132.72 72.11C126.55 72.11 121.55 77.1 121.54 83.27C121.53 77.1 116.53 72.11 110.36 72.11C116.53 72.11 121.53 67.11 121.54 60.95ZM121.54 119.32C121.53 113.16 116.54 108.17 110.38 108.16C116.54 108.16 121.53 103.16 121.54 97C121.55 103.16 126.54 108.15 132.69 108.16C126.54 108.17 121.55 113.16 121.54 119.32ZM130.73 144.03C125.51 144.96 121.54 149.51 121.54 155C121.53 149.51 117.56 144.96 112.35 144.03C117.56 143.09 121.53 138.54 121.54 133.05C121.54 138.54 125.51 143.09 130.73 144.03ZM121.54 168.73C121.55 174.9 126.55 179.89 132.72 179.89C126.55 179.89 121.55 184.89 121.54 191.05C121.53 184.89 116.53 179.89 110.36 179.89C116.53 179.89 121.53 174.9 121.54 168.73ZM121.54 204.79C121.55 210.95 126.55 215.95 132.72 215.95C126.55 215.95 121.55 220.94 121.54 227.11C121.53 220.94 116.53 215.95 110.36 215.95C116.53 215.95 121.53 210.95 121.54 204.79ZM91.16 24.87C91.16 31.05 96.16 36.05 102.34 36.05C96.16 36.05 91.16 41.06 91.16 47.23C91.16 41.06 86.15 36.05 79.98 36.05C86.15 36.05 91.16 31.05 91.16 24.87ZM91.16 60.93C91.16 67.1 96.16 72.11 102.34 72.11C96.16 72.11 91.16 77.11 91.16 83.29C91.16 77.11 86.15 72.11 79.98 72.11C86.15 72.11 91.16 67.1 91.16 60.93ZM91.16 119.34C91.16 113.17 86.16 108.17 79.99 108.16C86.16 108.16 91.16 103.15 91.16 96.98C91.16 103.15 96.16 108.15 102.31 108.16C96.16 108.17 91.16 113.17 91.16 119.34ZM100.35 144.03C95.12 144.96 91.16 149.52 91.16 155.02C91.16 149.52 87.18 144.96 81.95 144.03C87.18 143.09 91.16 138.53 91.16 133.03C91.16 138.53 95.12 143.09 100.35 144.03ZM91.16 168.71C91.16 174.89 96.16 179.89 102.34 179.89C96.16 179.89 91.16 184.9 91.16 191.07C91.16 184.9 86.15 179.89 79.98 179.89C86.15 179.89 91.16 174.89 91.16 168.71ZM91.16 204.77C91.16 210.94 96.16 215.95 102.34 215.95C96.16 215.95 91.16 220.95 91.16 227.13C91.16 220.95 86.15 215.95 79.98 215.95C86.15 215.95 91.16 210.94 91.16 204.77ZM60.76 24.9C60.79 31.06 65.79 36.05 71.94 36.05C65.79 36.05 60.79 41.05 60.76 47.21C60.75 41.05 55.75 36.05 49.6 36.05C55.75 36.05 60.75 31.06 60.76 24.9ZM60.76 60.95C60.79 67.11 65.79 72.11 71.94 72.11C65.79 72.11 60.79 77.1 60.76 83.26C60.75 77.1 55.75 72.11 49.6 72.11C55.75 72.11 60.75 67.11 60.76 60.95ZM60.76 119.31C60.75 113.16 55.76 108.17 49.61 108.16C55.76 108.16 60.75 103.16 60.76 97.01C60.79 103.16 65.78 108.15 71.92 108.16C65.78 108.17 60.79 113.16 60.76 119.31ZM69.97 144.03C64.74 144.96 60.79 149.51 60.76 154.99C60.75 149.51 56.79 144.96 51.57 144.03C56.79 143.09 60.75 138.54 60.76 133.06C60.79 138.54 64.74 143.09 69.97 144.03ZM60.76 168.74C60.79 174.9 65.79 179.89 71.94 179.89C65.79 179.89 60.79 184.89 60.76 191.05C60.75 184.89 55.75 179.89 49.6 179.89C55.75 179.89 60.75 174.9 60.76 168.74ZM60.76 204.79C60.79 210.95 65.79 215.95 71.94 215.95C65.79 215.95 60.79 220.94 60.76 227.1C60.75 220.94 55.75 215.95 49.6 215.95C55.75 215.95 60.75 210.95 60.76 204.79ZM30.38 24.87C30.38 31.05 35.4 36.05 41.56 36.05C35.4 36.05 30.38 41.06 30.38 47.23C30.38 41.06 25.38 36.05 19.2 36.05C25.38 36.05 30.38 31.05 30.38 24.87ZM30.38 60.93C30.38 67.1 35.4 72.11 41.56 72.11C35.4 72.11 30.38 77.11 30.38 83.29C30.38 77.11 25.38 72.11 19.2 72.11C25.38 72.11 30.38 67.1 30.38 60.93ZM30.38 119.34C30.38 113.17 25.4 108.17 19.23 108.16C25.4 108.16 30.38 103.15 30.38 96.98C30.38 103.15 35.38 108.15 41.54 108.16C35.38 108.17 30.38 113.17 30.38 119.34ZM39.57 144.03C34.35 144.96 30.38 149.52 30.38 155.02C30.38 149.52 26.41 144.96 21.19 144.03C26.41 143.09 30.38 138.53 30.38 133.03C30.38 138.53 34.35 143.09 39.57 144.03ZM30.38 168.71C30.38 174.89 35.4 179.89 41.56 179.89C35.4 179.89 30.38 184.9 30.38 191.07C30.38 184.9 25.38 179.89 19.2 179.89C25.38 179.89 30.38 174.89 30.38 168.71ZM30.38 204.77C30.38 210.94 35.4 215.95 41.56 215.95C35.4 215.95 30.38 220.95 30.38 227.13C30.38 220.95 25.38 215.95 19.2 215.95C25.38 215.95 30.38 210.94 30.38 204.77Z\" fill=\"url(#paint0_linear_3248_5)\"/>\n              <defs>\n                <linearGradient id=\"paint0_linear_3248_5\" x1=\"182.11\" y1=\"0\" x2=\"182.11\" y2=\"252\" gradientUnits=\"userSpaceOnUse\">\n                  <stop offset=\"0\" stop-color=\"${properties.color}\" stop-opacity=\"0\" />\n                  <stop offset=\"0.3\" stop-color=\"${properties.color}\" stop-opacity=\"1\" />\n                </linearGradient>\n              </defs>\n            </svg>\n            ${properties.image ? `<img src=\"${properties.image}\" class=\"popup-background-image\" alt=\"\">` : ''}\n            <div class=\"content-wrapper\">\n              <div class=\"popup-title\">${properties.name}</div>\n                          <div class=\"fade-top\"></div> \n              <div class=\"popup-description\">${properties.description}</div>\n                        <div class=\"fade-bottom\"></div>\n\n              ${properties.image ? '<button class=\"impressie-button button-base\">Impressie</button>' : ''}\n              <button class=\"more-info-button button-base\">Meer info</button>\n            </div>\n          </div>\n          \n          <div class=\"popup-side popup-back\">\n            <div class=\"content-wrapper\">\n              <div class=\"popup-title details\">${properties.name || 'Naam error'}</div>\n\n               <!-- Add this new social-icons div -->\n          <div class=\"social-icons\">\n          ${\n            properties.website\n              ? `\n            <a href=\"${properties.website}\" target=\"_blank\" aria-label=\"Website\" title=\"Website\">\n              <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\n                <line x1=\"2\" y1=\"12\" x2=\"22\" y2=\"12\"></line>\n                <path d=\"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z\"></path>\n              </svg>\n            </a>`\n              : ''\n          }\n          ${\n            properties.instagram\n              ? `\n            <a href=\"${properties.instagram}\" target=\"_blank\" aria-label=\"Instagram\" title=\"Instagram\">\n              <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                <path d=\"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.28-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z\"/>\n              </svg>\n            </a>`\n              : ''\n          }\n          ${\n            properties.facebook\n              ? `\n            <a href=\"${properties.facebook}\" target=\"_blank\" aria-label=\"Facebook\" title=\"Facebook\">\n              <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                 <path d=\"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z\"></path>\n              </svg>\n            </a>`\n              : ''\n          }\n            </div>\n              <div class=\"info-content\"</div>\n                <div class=\"popup-descriptionv2\">${properties.descriptionv2}</div>\n              <button class=\"more-info-button button-base\">Terug</button>\n            </div>\n          </div>\n        </div>\n      `,\n  };\n}\n\n/**\n * Beheer top en bottom fade gradients op basis van scroll positie\n * @param {HTMLElement} description - Het scrollbare element (popup-description)\n * @param {HTMLElement} topFade - Het fade gradient element bovenaan\n * @param {HTMLElement} bottomFade - Het fade gradient element onderaan\n */\nfunction manageDoubleFadeGradient(description, topFade, bottomFade) {\n  if (!description) return;\n\n  // Zorg ervoor dat fade elementen een CSS transitie hebben\n  if (topFade) topFade.style.transition = 'opacity 0.3s ease';\n  if (bottomFade) bottomFade.style.transition = 'opacity 0.3s ease';\n\n  // Functie om de fades te updaten op basis van scroll positie\n  const updateFades = () => {\n    // Bereken scroll parameters\n    const maxScroll = description.scrollHeight - description.clientHeight;\n\n    // Als er niets te scrollen valt, verberg beide fades\n    if (maxScroll <= 5) {\n      if (topFade) topFade.style.opacity = '0';\n      if (bottomFade) bottomFade.style.opacity = '0';\n      return;\n    }\n\n    // Bereken relatieve scroll positie (0 tot 1)\n    const scrollPercentage = description.scrollTop / maxScroll;\n\n    // Beheer de BOTTOM fade (zoals eerder)\n    if (bottomFade) {\n      // Begin bottom fade te laten verdwijnen bij 75% scroll\n      let bottomOpacity = 1;\n      if (scrollPercentage > 0.75) {\n        bottomOpacity = 1 - (scrollPercentage - 0.75) / 0.25;\n      }\n      bottomFade.style.opacity = Math.max(0, Math.min(1, bottomOpacity)).toFixed(2);\n    }\n\n    // Beheer de TOP fade\n    if (topFade) {\n      // Top fade moet verdwijnen als we helemaal bovenaan zijn\n      // en geleidelijk verschijnen als we naar beneden scrollen\n      let topOpacity = 0;\n      if (scrollPercentage > 0) {\n        // Laat top fade zichtbaar worden bij 25% van maximale scroll area\n        topOpacity = Math.min(1, scrollPercentage * 4);\n      }\n      topFade.style.opacity = Math.max(0, Math.min(1, topOpacity)).toFixed(2);\n    }\n  };\n\n  // Luister naar scroll events\n  description.addEventListener('scroll', updateFades);\n\n  // Controleer ook bij resize events\n  window.addEventListener('resize', updateFades);\n\n  // Voer direct een initi\u00EBle check uit\n  updateFades();\n\n  // Return cleanup functie voor event listeners\n  return () => {\n    description.removeEventListener('scroll', updateFades);\n    window.removeEventListener('resize', updateFades);\n  };\n}\n\nfunction setupPopupInteractions(popup, properties, coordinates) {\n  const popupElement = popup.getElement();\n  const popupContent = popupElement.querySelector('.mapboxgl-popup-content');\n  const popupWrapper = popupElement.querySelector('.popup-wrapper');\n  const frontContent = popupElement.querySelector('.popup-front .content-wrapper');\n  const backContent = popupElement.querySelector('.popup-back .content-wrapper');\n  const description = popupElement.querySelector('.popup-description');\n  const gradient = popupElement.querySelector('#paint0_linear_3248_5');\n\n  // Zoek alle fade elementen\n  const topFade = popupElement.querySelector('.popup-front .fade-top');\n  const bottomFade = popupElement.querySelector('.popup-front .fade-bottom');\n\n  // Setup voor fade gradients\n  if (description) {\n    const cleanupFade = manageDoubleFadeGradient(description, topFade, bottomFade);\n\n    // Beheer ook fades op de achterkant\n    const backDescription = popupElement.querySelector('.popup-back .popup-descriptionv2');\n    const backTopFade = popupElement.querySelector('.popup-back .fade-top');\n    const backBottomFade = popupElement.querySelector('.popup-back .fade-bottom');\n\n    if (backDescription) {\n      const cleanupBackFade = manageDoubleFadeGradient(\n        backDescription,\n        backTopFade,\n        backBottomFade\n      );\n\n      // Zorg dat beide fade managers worden opgeruimd bij sluiten\n      popupElement.querySelector('.close-button').addEventListener('click', () => {\n        if (typeof cleanupFade === 'function') cleanupFade();\n        if (typeof cleanupBackFade === 'function') cleanupBackFade();\n      });\n    } else {\n      // Alleen front fades opruimen\n      popupElement.querySelector('.close-button').addEventListener('click', () => {\n        if (typeof cleanupFade === 'function') cleanupFade();\n      });\n    }\n\n    // Update fades bij flip\n    popupElement.querySelectorAll('.more-info-button').forEach((button) => {\n      button.addEventListener('click', () => {\n        // Geef wat tijd voor de flip animatie\n        setTimeout(() => {\n          // Update de zichtbare fades\n          const isFlipped = popupWrapper.classList.contains('is-flipped');\n          const visibleDescription = isFlipped ? backDescription : description;\n\n          if (visibleDescription) {\n            const maxScroll = visibleDescription.scrollHeight - visibleDescription.clientHeight;\n            if (maxScroll > 5) {\n              const scrollPercent = visibleDescription.scrollTop / maxScroll;\n\n              // Update juiste fades afhankelijk van welke kant zichtbaar is\n              if (isFlipped) {\n                if (backTopFade)\n                  backTopFade.style.opacity =\n                    scrollPercent > 0 ? Math.min(1, scrollPercent * 4).toFixed(2) : '0';\n                if (backBottomFade)\n                  backBottomFade.style.opacity =\n                    scrollPercent > 0.75 ? (1 - (scrollPercent - 0.75) / 0.25).toFixed(2) : '1';\n              } else {\n                if (topFade)\n                  topFade.style.opacity =\n                    scrollPercent > 0 ? Math.min(1, scrollPercent * 4).toFixed(2) : '0';\n                if (bottomFade)\n                  bottomFade.style.opacity =\n                    scrollPercent > 0.75 ? (1 - (scrollPercent - 0.75) / 0.25).toFixed(2) : '1';\n              }\n            }\n          }\n        }, 50);\n      });\n    });\n  }\n\n  /**\n   * Animate gradient stops\n   */\n  function animateGradient(newY1, newY2, gradient) {\n    const startY1 = parseFloat(gradient.y1.baseVal.value);\n    const startY2 = parseFloat(gradient.y2.baseVal.value);\n    const startTime = Date.now();\n\n    function step() {\n      const progress = Math.min((Date.now() - startTime) / 800, 1);\n      gradient.y1.baseVal.value = startY1 + (newY1 - startY1) * progress;\n      gradient.y2.baseVal.value = startY2 + (newY2 - startY2) * progress;\n\n      if (progress < 1) {\n        requestAnimationFrame(step);\n      }\n    }\n\n    requestAnimationFrame(step);\n  }\n\n  /**\n   * Adjust popup height to content\n   */\n  function adjustPopupHeight() {\n    const contentHeight = Math.max(frontContent.offsetHeight, backContent.offsetHeight);\n    popupWrapper.style.height = `${contentHeight}px`;\n\n    popupElement.querySelectorAll('.popup-side').forEach((side) => {\n      side.style.height = `${contentHeight}px`;\n    });\n  }\n\n  // Set up hover effect on gradient\n  popupWrapper.addEventListener('mouseenter', () => {\n    animateGradient(30, 282, gradient);\n  });\n\n  popupWrapper.addEventListener('mouseleave', () => {\n    animateGradient(0, 252, gradient);\n  });\n\n  // Adjust height\n  setTimeout(adjustPopupHeight, 10);\n\n  // Animate popup appearance\n  popupContent.style.opacity = '0';\n  popupContent.style.transform = 'rotate(8deg) translateY(40px) scale(0.4)';\n\n  requestAnimationFrame(() => {\n    popupContent.style.transition = 'all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1)';\n    popupContent.style.opacity = '1';\n    popupContent.style.transform = 'rotate(0deg) translateY(0) scale(1)';\n  });\n\n  // Handle scrollable description\n  if (description) {\n    // Wheel event\n    description.addEventListener(\n      'wheel',\n      (event) => {\n        event.stopPropagation();\n        event.preventDefault();\n        description.scrollTop += event.deltaY;\n      },\n      { passive: false }\n    );\n\n    // Mouse interactions\n    description.addEventListener('mouseenter', () => {\n      map.dragPan.disable();\n      map.scrollZoom.disable();\n    });\n\n    description.addEventListener('mouseleave', () => {\n      map.dragPan.enable();\n      map.scrollZoom.enable();\n    });\n\n    // Mouse drag to scroll\n    let isDragging = false;\n    let startY, startScrollTop;\n\n    description.addEventListener('mousedown', (event) => {\n      isDragging = true;\n      startY = event.pageY;\n      startScrollTop = description.scrollTop;\n      description.style.cursor = 'grabbing';\n      event.preventDefault();\n      event.stopPropagation();\n    });\n\n    description.addEventListener('mousemove', (event) => {\n      if (!isDragging) return;\n\n      event.preventDefault();\n      event.stopPropagation();\n\n      const deltaY = event.pageY - startY;\n      description.scrollTop = startScrollTop - deltaY;\n    });\n\n    document.addEventListener('mouseup', () => {\n      isDragging = false;\n      description.style.cursor = 'grab';\n    });\n\n    description.addEventListener('mouseleave', () => {\n      isDragging = false;\n      description.style.cursor = 'grab';\n    });\n\n    // Touch interactions\n    let touchStartY = 0;\n    let touchStartScrollTop = 0;\n\n    description.addEventListener('touchstart', (event) => {\n      touchStartY = event.touches[0].clientY;\n      touchStartScrollTop = description.scrollTop;\n      event.stopPropagation();\n    });\n\n    description.addEventListener(\n      'touchmove',\n      (event) => {\n        const deltaY = touchStartY - event.touches[0].clientY;\n        description.scrollTop = touchStartScrollTop + deltaY;\n        event.stopPropagation();\n        event.preventDefault();\n      },\n      { passive: false }\n    );\n  }\n\n  // Handle impressie button click\n  if (properties.image && popupElement.querySelector('.impressie-button')) {\n    popupElement.querySelector('.impressie-button').addEventListener('click', () => {\n      // Image popup should only be shown from the main popup, not from AR popups\n      if (!properties.link_ar) {\n        popupContent.style.transition = 'all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55)';\n        popupContent.style.transform = 'rotate(-5deg) translateY(40px) scale(0.6)';\n        popupContent.style.opacity = '0';\n\n        setTimeout(() => {\n          const contentHeight = Math.max(frontContent.offsetHeight, backContent.offsetHeight);\n          popup.remove();\n          setActivePopup(null);\n          showImagePopup(properties, coordinates, contentHeight);\n        }, 400);\n      }\n    });\n  }\n\n  // Handle info button click (flip card)\n  popupElement.querySelectorAll('.more-info-button').forEach((button) => {\n    button.addEventListener('click', () => {\n      popupWrapper.classList.toggle('is-flipped');\n    });\n  });\n\n  // Update this code in the setupPopupInteractions function:\n  popupElement.querySelectorAll('.close-button').forEach((button) => {\n    button.addEventListener('click', () => {\n      popupContent.style.transition = 'all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55)';\n      popupContent.style.transform = 'rotate(-5deg) translateY(40px) scale(0.6)';\n      popupContent.style.opacity = '0';\n\n      // Close any open sidebar items with animation\n      const visibleItem = $('.locations-map_item.is--show');\n      if (visibleItem.length) {\n        visibleItem.css({\n          opacity: '0',\n          transform: 'translateY(40px) scale(0.6)',\n          transition: 'all 400ms cubic-bezier(0.68, -0.55, 0.265, 1.55)',\n        });\n      }\n\n      setTimeout(() => {\n        popup.remove();\n        setActivePopup(null);\n\n        // Also remove the is--show class after animation completes\n        $('.locations-map_item').removeClass('is--show');\n\n        // Make sure to update geolocation manager state\n        if (window.geolocationManager) {\n          window.geolocationManager.isPopupOpen = false;\n\n          // Restore tracking if it was active before\n          if (window.geolocationManager.wasTracking) {\n            window.geolocationManager.resumeTracking();\n          }\n        }\n      }, 400);\n    });\n  });\n\n  // Update height on window resize\n  window.addEventListener('resize', adjustPopupHeight);\n}\n\n/**\n * Show a fullscreen image popup\n */\nexport function showImagePopup(properties, coordinates, contentHeight) {\n  const isMobile = window.matchMedia('(max-width: 479px)').matches;\n\n  const popup = new mapboxgl.Popup({\n    offset: {\n      bottom: [0, -5],\n      top: [0, 0],\n      left: [0, 0],\n      right: [0, 0],\n    },\n    className: 'custom-popup',\n    closeButton: false,\n    maxWidth: '300px',\n    closeOnClick: false,\n    anchor: 'bottom',\n  });\n\n  // // Fly to image location\n  // map.flyTo({\n  //   center: coordinates,\n  //   offset: isMobile ? [0, 200] : [0, 250],\n  //   duration: 1000,\n  //   essential: true\n  // });\n\n  // Create popup content\n  const html = `\n    <style>\n      .popup-wrapper {\n        height: ${contentHeight}px;\n      }\n\n      .popup-side {\n        background-color: ${properties.color || '#6B46C1'};\n        clip-path: polygon(calc(100% - 0px) 26.5px, calc(100% - 0px) calc(100% - 26.5px), calc(100% - 0px) calc(100% - 26.5px), calc(100% - 0.34671999999995px) calc(100% - 22.20048px), calc(100% - 1.3505599999999px) calc(100% - 18.12224px), calc(100% - 2.95704px) calc(100% - 14.31976px), calc(100% - 5.11168px) calc(100% - 10.84752px), calc(100% - 7.76px) calc(100% - 7.76px), calc(100% - 10.84752px) calc(100% - 5.11168px), calc(100% - 14.31976px) calc(100% - 2.9570399999999px), calc(100% - 18.12224px) calc(100% - 1.35056px), calc(100% - 22.20048px) calc(100% - 0.34672px), calc(100% - 26.5px) calc(100% - 0px), calc(50% - -32.6px) calc(100% - 0px), calc(50% - -32.6px) calc(100% - 0px), calc(50% - -31.57121px) calc(100% - 0.057139999999947px), calc(50% - -30.56648px) calc(100% - 0.2255199999999px), calc(50% - -29.59427px) calc(100% - 0.50057999999996px), calc(50% - -28.66304px) calc(100% - 0.87775999999991px), calc(50% - -27.78125px) calc(100% - 1.3525px), calc(50% - -26.95736px) calc(100% - 1.92024px), calc(50% - -26.19983px) calc(100% - 2.57642px), calc(50% - -25.51712px) calc(100% - 3.31648px), calc(50% - -24.91769px) calc(100% - 4.13586px), calc(50% - -24.41px) calc(100% - 5.03px), calc(50% - -24.41px) calc(100% - 5.03px), calc(50% - -22.95654px) calc(100% - 7.6045699999999px), calc(50% - -21.23752px) calc(100% - 9.9929599999998px), calc(50% - -19.27298px) calc(100% - 12.17519px), calc(50% - -17.08296px) calc(100% - 14.13128px), calc(50% - -14.6875px) calc(100% - 15.84125px), calc(50% - -12.10664px) calc(100% - 17.28512px), calc(50% - -9.36042px) calc(100% - 18.44291px), calc(50% - -6.46888px) calc(100% - 19.29464px), calc(50% - -3.45206px) calc(100% - 19.82033px), calc(50% - -0.32999999999998px) calc(100% - 20px), calc(50% - -0.32999999999998px) calc(100% - 20px), calc(50% - 2.79179px) calc(100% - 19.82033px), calc(50% - 5.8079199999999px) calc(100% - 19.29464px), calc(50% - 8.69853px) calc(100% - 18.44291px), calc(50% - 11.44376px) calc(100% - 17.28512px), calc(50% - 14.02375px) calc(100% - 15.84125px), calc(50% - 16.41864px) calc(100% - 14.13128px), calc(50% - 18.60857px) calc(100% - 12.17519px), calc(50% - 20.57368px) calc(100% - 9.9929599999999px), calc(50% - 22.29411px) calc(100% - 7.60457px), calc(50% - 23.75px) calc(100% - 5.03px), calc(50% - 23.75px) calc(100% - 5.03px), calc(50% - 24.25769px) calc(100% - 4.1358599999999px), calc(50% - 24.85712px) calc(100% - 3.3164799999998px), calc(50% - 25.53983px) calc(100% - 2.57642px), calc(50% - 26.29736px) calc(100% - 1.92024px), calc(50% - 27.12125px) calc(100% - 1.3525px), calc(50% - 28.00304px) calc(100% - 0.87775999999997px), calc(50% - 28.93427px) calc(100% - 0.50057999999996px), calc(50% - 29.90648px) calc(100% - 0.22552000000002px), calc(50% - 30.91121px) calc(100% - 0.057140000000004px), calc(50% - 31.94px) calc(100% - 0px), 26.5px calc(100% - 0px), 26.5px calc(100% - 0px), 22.20048px calc(100% - 0.34671999999989px), 18.12224px calc(100% - 1.3505599999999px), 14.31976px calc(100% - 2.95704px), 10.84752px calc(100% - 5.1116799999999px), 7.76px calc(100% - 7.76px), 5.11168px calc(100% - 10.84752px), 2.95704px calc(100% - 14.31976px), 1.35056px calc(100% - 18.12224px), 0.34672px calc(100% - 22.20048px), 4.3855735949631E-31px calc(100% - 26.5px), 0px 26.5px, 0px 26.5px, 0.34672px 22.20048px, 1.35056px 18.12224px, 2.95704px 14.31976px, 5.11168px 10.84752px, 7.76px 7.76px, 10.84752px 5.11168px, 14.31976px 2.95704px, 18.12224px 1.35056px, 22.20048px 0.34672px, 26.5px 4.3855735949631E-31px, calc(50% - 26.74px) 0px, calc(50% - 26.74px) 0px, calc(50% - 25.31263px) 0.07137px, calc(50% - 23.91544px) 0.28176px, calc(50% - 22.55581px) 0.62559px, calc(50% - 21.24112px) 1.09728px, calc(50% - 19.97875px) 1.69125px, calc(50% - 18.77608px) 2.40192px, calc(50% - 17.64049px) 3.22371px, calc(50% - 16.57936px) 4.15104px, calc(50% - 15.60007px) 5.17833px, calc(50% - 14.71px) 6.3px, calc(50% - 14.71px) 6.3px, calc(50% - 13.6371px) 7.64798px, calc(50% - 12.446px) 8.89024px, calc(50% - 11.1451px) 10.01826px, calc(50% - 9.7428px) 11.02352px, calc(50% - 8.2475px) 11.8975px, calc(50% - 6.6676px) 12.63168px, calc(50% - 5.0115px) 13.21754px, calc(50% - 3.2876px) 13.64656px, calc(50% - 1.5043px) 13.91022px, calc(50% - -0.32999999999996px) 14px, calc(50% - -0.32999999999998px) 14px, calc(50% - -2.16431px) 13.9105px, calc(50% - -3.94768px) 13.6476px, calc(50% - -5.67177px) 13.2197px, calc(50% - -7.32824px) 12.6352px, calc(50% - -8.90875px) 11.9025px, calc(50% - -10.40496px) 11.03px, calc(50% - -11.80853px) 10.0261px, calc(50% - -13.11112px) 8.8992px, calc(50% - -14.30439px) 7.6577px, calc(50% - -15.38px) 6.31px, calc(50% - -15.38px) 6.31px, calc(50% - -16.27279px) 5.18562px, calc(50% - -17.25432px) 4.15616px, calc(50% - -18.31733px) 3.22714px, calc(50% - -19.45456px) 2.40408px, calc(50% - -20.65875px) 1.6925px, calc(50% - -21.92264px) 1.09792px, calc(50% - -23.23897px) 0.62586px, calc(50% - -24.60048px) 0.28184px, calc(50% - -25.99991px) 0.07138px, calc(50% - -27.43px) 8.9116630386686E-32px, calc(100% - 26.5px) 0px, calc(100% - 26.5px) 0px, calc(100% - 22.20048px) 0.34672px, calc(100% - 18.12224px) 1.35056px, calc(100% - 14.31976px) 2.95704px, calc(100% - 10.84752px) 5.11168px, calc(100% - 7.76px) 7.76px, calc(100% - 5.11168px) 10.84752px, calc(100% - 2.9570399999999px) 14.31976px, calc(100% - 1.35056px) 18.12224px, calc(100% - 0.34671999999995px) 22.20048px, calc(100% - 5.6843418860808E-14px) 26.5px);\n      }\n\n      .close-button {\n        background: ${properties.color || '#6B46C1'};\n      }\n    </style>\n    <div class=\"popup-wrapper\">\n      <button class=\"close-button\" aria-label=\"Close popup\"></button>\n      <div class=\"popup-side\">\n        <div class=\"image-container\">\n          <img src=\"${properties.image}\" alt=\"${properties.name}\" class=\"full-image\">\n          <div class=\"button-container\">\n            <button class=\"back-button\">Terug</button>\n          </div>\n          <div class=\"location-name\">${properties.name}</div>\n        </div>\n      </div>\n    </div>\n  `;\n\n  // Add popup to map\n  popup.setLngLat(coordinates).setHTML(html).addTo(map);\n  setActivePopup(popup);\n\n  // Get DOM elements\n  const popupElement = popup.getElement();\n  const popupContent = popupElement.querySelector('.mapboxgl-popup-content');\n  const closeButton = popupElement.querySelector('.close-button');\n  const backButton = popupElement.querySelector('.back-button');\n\n  // Animate popup appearance\n  popupContent.style.opacity = '0';\n  popupContent.style.transform = 'rotate(8deg) translateY(40px) scale(0.4)';\n\n  requestAnimationFrame(() => {\n    popupContent.style.transition = 'all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1)';\n    popupContent.style.opacity = '1';\n    popupContent.style.transform = 'rotate(0deg) translateY(0) scale(1)';\n  });\n\n  // Find gradient for hover effect if it exists\n  const svgElement = popupElement.querySelector('svg');\n  if (svgElement) {\n    const gradient = svgElement.querySelector('linearGradient');\n    if (gradient) {\n      const popupWrapper = popupElement.querySelector('.popup-wrapper');\n      popupWrapper.addEventListener('mouseenter', () => {\n        animateGradient(30, 282, gradient);\n      });\n\n      popupWrapper.addEventListener('mouseleave', () => {\n        animateGradient(0, 252, gradient);\n      });\n    }\n  }\n\n  // Handle close button click\n  closeButton.addEventListener('click', () => {\n    popupContent.style.transition = 'all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55)';\n    popupContent.style.transform = 'rotate(-5deg) translateY(40px) scale(0.6)';\n    popupContent.style.opacity = '0';\n\n    setTimeout(() => {\n      popup.remove();\n      activePopup = null;\n    }, 400);\n  });\n\n  // Handle back button click (return to main popup)\n  backButton.addEventListener('click', () => {\n    popupContent.style.transition = 'all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55)';\n    popupContent.style.transform = 'rotate(-5deg) translateY(40px) scale(0.6)';\n    popupContent.style.opacity = '0';\n\n    setTimeout(() => {\n      popup.remove();\n      activePopup = null;\n\n      // Create new main popup\n      const mainPopup = new mapboxgl.Popup({\n        offset: {\n          bottom: [0, -5],\n          top: [0, 0],\n          left: [0, 0],\n          right: [0, 0],\n        },\n        className: 'custom-popup',\n        closeButton: false,\n        maxWidth: '300px',\n        closeOnClick: false,\n        anchor: 'bottom',\n      });\n\n      const { styles, html } = createPopupContent(properties);\n      mainPopup.setLngLat(coordinates).setHTML(`${styles}${html}`);\n      mainPopup.addTo(map);\n      setActivePopup(mainPopup);\n      setupPopupInteractions(mainPopup, properties, coordinates);\n\n      // Animate new popup appearance\n      const newPopupContent = mainPopup.getElement().querySelector('.mapboxgl-popup-content');\n      newPopupContent.style.opacity = '0';\n      newPopupContent.style.transform = 'rotate(8deg) translateY(40px) scale(0.4)';\n\n      requestAnimationFrame(() => {\n        newPopupContent.style.transition = 'all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1)';\n        newPopupContent.style.opacity = '1';\n        newPopupContent.style.transform = 'rotate(0deg) translateY(0) scale(1)';\n      });\n    }, 400);\n  });\n}\n\n/**\n * Close sidebar items\n */\nexport function closeItem() {\n  $('.locations-map_item').removeClass('is--show');\n}\n\n/**\n * Close sidebar items if visible\n */\nexport function closeItemIfVisible() {\n  if ($('.locations-map_item').hasClass('is--show')) {\n    closeItem();\n  }\n}\n", "// Map interaction handlers module\n\nimport { CONFIG } from './config.js';\nimport { state, setActivePopup } from './state.js';\nimport { applyMapFilters } from './filters.js';\nimport { loadFiltersAndUpdateMap } from './localStorage.js';\nimport { loadIcons, addMarkers } from './markers.js';\nimport { setupLocationFilters } from './filters.js';\nimport { closeItem } from './popups.js';\n\n/**\n * Setup map load event handler\n * @param {Object} map - The mapbox map instance\n */\nexport function setupMapLoadHandler(map) {\n  map.on('load', () => {\n    // Wait until map is fully loaded\n    map.once('idle', () => {\n      // Check if poi-label layer exists\n      const firstSymbolLayerId = map\n        .getStyle()\n        .layers.find((layer) => layer.type === 'symbol' && layer.id.includes('label'))?.id;\n\n      // Add building extrusions BEFORE the first symbol layer\n      // This ensures all labels (including POI) appear on top of buildings\n      map.addLayer(\n        {\n          id: 'heerlen-buildings',\n          type: 'fill-extrusion',\n          source: 'composite',\n          'source-layer': 'building',\n          filter: ['!=', ['get', 'type'], 'underground'],\n          minzoom: 15,\n          paint: {\n            'fill-extrusion-color': '#e8e0cc',\n            'fill-extrusion-height': [\n              'case',\n              ['has', 'height'],\n              ['get', 'height'],\n              ['has', 'min_height'],\n              ['get', 'min_height'],\n              3,\n            ],\n            'fill-extrusion-base': ['case', ['has', 'min_height'], ['get', 'min_height'], 0],\n            'fill-extrusion-opacity': 1.0,\n            'fill-extrusion-vertical-gradient': true,\n          },\n        },\n        firstSymbolLayerId\n      ); // Important: place before first symbol layer\n    });\n\n    loadFiltersAndUpdateMap();\n    loadIcons(map);\n    addMarkers(map);\n    setupLocationFilters();\n\n    // Apply filters again after markers are added\n    // This is extra security, especially if addMarkers is async\n    if (state.markersAdded) {\n      applyMapFilters();\n    } else {\n      // If markers are not ready yet, try after a short delay\n      // or within addMarkers itself at the end\n      map.once('idle', applyMapFilters);\n    }\n\n    // Initial animation on load\n    setTimeout(() => {\n      const finalZoom = window.matchMedia('(max-width: 479px)').matches ? 17 : 18;\n\n      map.jumpTo({\n        center: CONFIG.MAP.center,\n        zoom: 15,\n        pitch: 0,\n        bearing: 0,\n      });\n\n      map.flyTo({\n        center: CONFIG.MAP.center,\n        zoom: finalZoom,\n        pitch: 55,\n        bearing: -17.6,\n        duration: 6000,\n        essential: true,\n        easing: (t) => t * (2 - t), // Ease out quad\n      });\n    }, 5000);\n  });\n}\n\n/**\n * Setup sidebar close button handler\n */\nexport function setupSidebarHandlers() {\n  // Close sidebar button\n  $('.close-block').on('click', () => {\n    closeItem();\n  });\n}\n\n/**\n * Setup map interaction handlers for hiding popups and sidebar\n * @param {Object} map - The mapbox map instance\n */\nexport function setupMapInteractionHandlers(map) {\n  // Hide popups and sidebar on map interactions\n  ['dragstart', 'zoomstart', 'rotatestart', 'pitchstart'].forEach((eventType) => {\n    map.on(eventType, () => {\n      // Hide sidebar if visible\n      const visibleItem = $('.locations-map_item.is--show');\n      if (visibleItem.length) {\n        visibleItem.css({\n          opacity: '0',\n          transform: 'translateY(40px) scale(0.6)',\n          transition: 'all 400ms cubic-bezier(0.68, -0.55, 0.265, 1.55)',\n        });\n\n        setTimeout(() => {\n          visibleItem.removeClass('is--show');\n        }, 400);\n      }\n\n      // Hide popup if visible\n      if (state.activePopup) {\n        const popupContent = state.activePopup.getElement().querySelector('.mapboxgl-popup-content');\n        popupContent.style.transition = 'all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55)';\n        popupContent.style.transform = 'rotate(-5deg) translateY(40px) scale(0.6)';\n        popupContent.style.opacity = '0';\n\n        setTimeout(() => {\n          state.activePopup.remove();\n          setActivePopup(null);\n        }, 400);\n      }\n    });\n  });\n}", "// Map initialization module\n\nimport { MAP_OPTIONS, MAPBOX_ACCESS_TOKEN } from './config.js';\nimport { setMap } from './state.js';\n\n// Set Mapbox access token\nmapboxgl.accessToken = MAPBOX_ACCESS_TOKEN;\n\n// Initialize and export map\nexport function initializeMap() {\n  const map = new mapboxgl.Map(MAP_OPTIONS);\n\n  // Store map in global state\n  setMap(map);\n\n  // Store original flyTo method\n  const originalFlyTo = map.flyTo.bind(map);\n  map._originalFlyTo = originalFlyTo;\n\n  // Override flyTo to add custom behavior if needed\n  map.flyTo = function (options) {\n    // Add any custom behavior here\n    return originalFlyTo(options);\n  };\n\n  return map;\n}\n", "// POI filter and interaction module\n\n// Filter out unwanted POI labels\nconst excludedNames = [\n  'Brasserie Mijn Streek',\n  'De Twee Gezusters',\n  'SCHUNCK Bibliotheek Heerlen Glaspaleis',\n  'Glaspaleis Schunck',\n  'Bagels & Beans',\n  'Terras Bagels & Beans',\n  'Brunch Bar',\n  'Berden',\n  'Aroma',\n  'Brasserie Goya',\n  'Poppodium Nieuwe Nor',\n  'Nederlands Mijnmuseum',\n  'Smaak & Vermaak',\n  'Caf\u00E9 ',\n  'De Kromme Toeter',\n  'Caf\u00E9 Pelt',\n  'Het Romeins Museum',\n  \"Pat's Tosti Bar\",\n  'Sint-Pancratiuskerk',\n  'Cafe Bluff',\n  // Add more businesses here if needed\n];\n\n/**\n * Setup POI filtering to hide unwanted labels\n * @param {Object} map - The mapbox map instance\n */\nexport function setupPOIFiltering(map) {\n  // Build comprehensive filter\n  map.on('idle', () => {\n    // Check if the map is fully loaded\n    if (!map.loaded()) return;\n\n    // Create a filter that checks BOTH properties\n    let filter = ['all'];\n\n    // For each name, make a NOT-condition that checks both properties\n    // If either matches, the POI should be hidden\n    excludedNames.forEach((name) => {\n      // Add a condition that checks BOTH properties\n      // If either matches, the POI should be hidden\n      filter.push([\n        'all',\n        ['!=', ['get', 'brand'], name], // Check on brand\n        ['!=', ['get', 'name'], name], // Check on name\n      ]);\n    });\n\n    // Only show POIs with a name\n    filter.push(['has', 'name']);\n\n    // Apply the filter to all POI layers\n    const poiLayers = [\n      'poi-label',\n      'poi-scalerank1',\n      'poi-scalerank2',\n      'poi-scalerank3',\n      'poi-scalerank4',\n    ];\n    poiLayers.forEach((layerId) => {\n      if (map.getLayer(layerId)) {\n        map.setFilter(layerId, filter);\n      }\n    });\n  });\n}", "// THREE.js layer module for 3D models and image planes\n\n// 3D model configurations\nconst modelConfigs = [\n  {\n    id: 'schunck',\n    origin: [50.88778235149691, 5.979389928151281], // [lat, lng]\n    altitude: 0,\n    rotate: [Math.PI / 2, 0.45, 0],\n    url: 'https://cdn.jsdelivr.net/gh/Artwalters/3dmodels_heerlen@main/schunckv5.glb',\n    scale: 1.3,\n  },\n  {\n    id: 'theater',\n    origin: [50.886541206107225, 5.972454838314243],\n    altitude: 0,\n    rotate: [Math.PI / 2, 2.05, 0],\n    url: 'https://cdn.jsdelivr.net/gh/Artwalters/3dmodels_heerlen@main/theaterheerlenv4.glb',\n    scale: 0.6,\n  },\n];\n\n// Image plane configuration\nconst imagePlaneConfig = {\n  id: 'image1',\n  origin: [50.88801513786042, 5.980644311376565],\n  altitude: 6.5,\n  rotate: [Math.PI / 2, 0.35, 0],\n  imageUrl:\n    'https://daks2k3a4ib2z.cloudfront.net/671769e099775386585f574d/67adf2bff5be8a200ec2fa55_osgameos_mural-p-130x130q80.png',\n  width: 13,\n  height: 13,\n};\n\n/**\n * Create image plane for THREE.js\n * @param {Object} config - Image plane configuration\n * @return {Promise} Promise that resolves to the image plane mesh\n */\nfunction createImagePlane(config) {\n  // Convert coordinates\n  const mercatorCoord = mapboxgl.MercatorCoordinate.fromLngLat(\n    [config.origin[1], config.origin[0]],\n    config.altitude\n  );\n\n  // Calculate scale\n  const meterScale = mercatorCoord.meterInMercatorCoordinateUnits();\n  const geoWidth = config.width * meterScale;\n  const geoHeight = config.height * meterScale;\n\n  return new Promise((resolve, reject) => {\n    const textureLoader = new THREE.TextureLoader();\n    textureLoader.load(\n      config.imageUrl,\n      (texture) => {\n        // Create material\n        const material = new THREE.MeshBasicMaterial({\n          map: texture,\n          transparent: true,\n          side: THREE.DoubleSide,\n        });\n\n        // Create geometry\n        const geometry = new THREE.PlaneGeometry(geoWidth, geoHeight);\n        const plane = new THREE.Mesh(geometry, material);\n\n        // Store transform data\n        plane.userData.transform = {\n          translateX: mercatorCoord.x,\n          translateY: mercatorCoord.y,\n          translateZ: mercatorCoord.z,\n          rotate: config.rotate,\n          scale: 1,\n        };\n\n        resolve(plane);\n      },\n      undefined,\n      (error) => reject(error)\n    );\n  });\n}\n\n/**\n * Create custom THREE.js layer\n * @return {Object} Custom layer object for Mapbox\n */\nexport function createThreeJSLayer() {\n  return {\n    id: '3d-models',\n    type: 'custom',\n    renderingMode: '3d',\n\n    onAdd: function (map, gl) {\n      this.map = map;\n      this.scene = new THREE.Scene();\n      this.camera = new THREE.Camera();\n\n      // Setup lighting\n      const ambientLight = new THREE.AmbientLight(0xffffff, 0.57);\n      this.scene.add(ambientLight);\n\n      const directionalLight = new THREE.DirectionalLight(0xffffff, 0.55);\n      directionalLight.color.setHex(0xfcfcfc);\n\n      // Position light\n      const azimuth = 210 * (Math.PI / 180);\n      const polar = 50 * (Math.PI / 180);\n      directionalLight.position\n        .set(\n          Math.sin(azimuth) * Math.sin(polar),\n          Math.cos(azimuth) * Math.sin(polar),\n          Math.cos(polar)\n        )\n        .normalize();\n      this.scene.add(directionalLight);\n\n      // Setup renderer\n      this.renderer = new THREE.WebGLRenderer({\n        canvas: map.getCanvas(),\n        context: gl,\n        antialias: true,\n      });\n      this.renderer.autoClear = false;\n\n      // Load 3D models\n      const loader = new THREE.GLTFLoader();\n      modelConfigs.forEach((config) => {\n        // Convert coordinates\n        const mercCoord = mapboxgl.MercatorCoordinate.fromLngLat(\n          [config.origin[1], config.origin[0]],\n          config.altitude\n        );\n\n        // Load model\n        loader.load(\n          config.url,\n          (gltf) => {\n            const scene3D = gltf.scene;\n\n            // Store transform data\n            scene3D.userData.transform = {\n              translateX: mercCoord.x,\n              translateY: mercCoord.y,\n              translateZ: mercCoord.z,\n              rotate: config.rotate,\n              scale: mercCoord.meterInMercatorCoordinateUnits() * config.scale,\n            };\n\n            this.scene.add(scene3D);\n          },\n          undefined,\n          (err) => console.error(err)\n        );\n      });\n\n      // Load image plane\n      createImagePlane(imagePlaneConfig)\n        .then((plane) => {\n          this.scene.add(plane);\n        })\n        .catch((err) => console.error('Error loading image plane:', err));\n    },\n\n    render: function (gl, matrix) {\n      // Get Mapbox matrix\n      const mapMatrix = new THREE.Matrix4().fromArray(matrix);\n\n      // Apply transforms to each object\n      this.scene.traverse((child) => {\n        if (child.userData.transform) {\n          const t = child.userData.transform;\n\n          // Create transform matrices\n          const translation = new THREE.Matrix4().makeTranslation(\n            t.translateX,\n            t.translateY,\n            t.translateZ\n          );\n          const scaling = new THREE.Matrix4().makeScale(t.scale, -t.scale, t.scale);\n          const rotX = new THREE.Matrix4().makeRotationX(t.rotate[0]);\n          const rotY = new THREE.Matrix4().makeRotationY(t.rotate[1]);\n          const rotZ = new THREE.Matrix4().makeRotationZ(t.rotate[2]);\n\n          // Combine transforms\n          const modelMatrix = new THREE.Matrix4()\n            .multiply(translation)\n            .multiply(scaling)\n            .multiply(rotX)\n            .multiply(rotY)\n            .multiply(rotZ);\n\n          // Apply transformation\n          child.matrix = new THREE.Matrix4().copy(mapMatrix).multiply(modelMatrix);\n          child.matrixAutoUpdate = false;\n        }\n      });\n\n      // Render scene\n      this.renderer.resetState();\n      this.renderer.render(this.scene, this.camera);\n    },\n  };\n}\n\n/**\n * Setup THREE.js layer on map\n * @param {Object} map - The mapbox map instance\n */\nexport function setupThreeJSLayer(map) {\n  // Add THREE.js layer when map style is loaded\n  map.on('style.load', () => {\n    const customLayer = createThreeJSLayer();\n    map.addLayer(customLayer);\n  });\n}\n", "// Toggle 3D layers visibility module - optimized version\n\n// Consolidated state object for better organization\nconst PERFORMANCE_CONFIG = {\n  settings: {\n    is3DEnabled: true,\n    lowPerformanceDetected: false,\n    frameRatePopupShown: false,\n  },\n  // Cache for 3D layer IDs to avoid repeated searches\n  layers: {\n    threeDModelsLayer: '3d-models',\n    buildingLayers: [],\n  },\n  // Cache for original paint properties\n  originalPaintProperties: {},\n  frameRateMonitor: null,\n  previousPitch: null,\n};\n\n/**\n * Toggle 3D layers visibility\n * @param {boolean} enable - Whether to enable 3D layers\n */\nexport function toggle3DLayers(enable) {\n  // Update state\n  PERFORMANCE_CONFIG.settings.is3DEnabled = enable;\n\n  // Save all settings at once\n  savePerformanceSettings();\n\n  // Update button appearance\n  updateToggleButtonState();\n\n  // Cache 3D layers if not already done\n  if (PERFORMANCE_CONFIG.layers.buildingLayers.length === 0) {\n    cacheThreeDLayers();\n  }\n\n  // Toggle main 3D models layer\n  const modelLayer = PERFORMANCE_CONFIG.layers.threeDModelsLayer;\n  if (map.getLayer(modelLayer)) {\n    map.setLayoutProperty(modelLayer, 'visibility', enable ? 'visible' : 'none');\n  }\n\n  // Toggle building extrusion layers using cached list\n  PERFORMANCE_CONFIG.layers.buildingLayers.forEach((layerId) => {\n    if (enable) {\n      map.setLayoutProperty(layerId, 'visibility', 'visible');\n      // Restore original paint properties\n      if (PERFORMANCE_CONFIG.originalPaintProperties[layerId]) {\n        const props = PERFORMANCE_CONFIG.originalPaintProperties[layerId];\n        Object.entries(props).forEach(([prop, value]) => {\n          map.setPaintProperty(layerId, prop, value);\n        });\n      }\n    } else {\n      // Store original paint properties if not already cached\n      if (!PERFORMANCE_CONFIG.originalPaintProperties[layerId]) {\n        PERFORMANCE_CONFIG.originalPaintProperties[layerId] = {\n          'fill-extrusion-height': map.getPaintProperty(layerId, 'fill-extrusion-height'),\n          'fill-extrusion-base': map.getPaintProperty(layerId, 'fill-extrusion-base'),\n        };\n      }\n      // Hide the layer for performance\n      map.setLayoutProperty(layerId, 'visibility', 'none');\n    }\n  });\n\n  // Handle map pitch changes\n  handleMapPitch(enable);\n}\n\n/**\n * Cache 3D layer IDs for better performance\n */\nfunction cacheThreeDLayers() {\n  const { layers } = map.getStyle();\n  PERFORMANCE_CONFIG.layers.buildingLayers = layers\n    .filter(\n      (layer) =>\n        layer.type === 'fill-extrusion' &&\n        (layer.id.includes('building') || layer.id.includes('3d'))\n    )\n    .map((layer) => layer.id);\n}\n\n/**\n * Handle map pitch based on 3D mode\n * @param {boolean} enable - Whether 3D is enabled\n */\nfunction handleMapPitch(enable) {\n  if (!enable && map.getPitch() > 0) {\n    PERFORMANCE_CONFIG.previousPitch = map.getPitch();\n    savePerformanceSettings();\n    map.easeTo({ pitch: 0, duration: 500 });\n  } else if (enable && !PERFORMANCE_CONFIG.settings.lowPerformanceDetected) {\n    const previousPitch = PERFORMANCE_CONFIG.previousPitch || 45;\n    map.easeTo({ pitch: previousPitch, duration: 500 });\n  }\n}\n\n/**\n * Update button state based on current settings\n */\nfunction updateToggleButtonState() {\n  const toggleButton = document.querySelector('.toggle-3d-button');\n  if (!toggleButton) return;\n\n  const enable = PERFORMANCE_CONFIG.settings.is3DEnabled;\n  toggleButton.classList.toggle('is-active', enable);\n  toggleButton.setAttribute('aria-pressed', enable);\n  toggleButton.title = enable ? 'Schakel Performance Mode uit' : 'Schakel Performance Mode in';\n\n  // Filled version vs outline version of the same icon\n  toggleButton.innerHTML = enable\n    ? `<svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\"><path fill=\"currentColor\" d=\"M21 16.5c0 .38-.21.71-.53.88l-7.9 4.44c-.16.12-.36.18-.57.18-.21 0-.41-.06-.57-.18l-7.9-4.44A.991.991 0 0 1 3 16.5v-9c0-.38.21-.71.53-.88l7.9-4.44c.16-.12.36-.18.57-.18.21 0 .41.06.57.18l7.9 4.44c.32.17.53.5.53.88v9M12 4.15l-6.04 3.4 6.04 3.4 6.04-3.4L12 4.15Z\"/></svg>`\n    : `<svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\"><path fill=\"none\" stroke=\"currentColor\" stroke-width=\"1.5\" d=\"M21 16.5c0 .38-.21.71-.53.88l-7.9 4.44c-.16.12-.36.18-.57.18-.21 0-.41-.06-.57-.18l-7.9-4.44A.991.991 0 0 1 3 16.5v-9c0-.38.21-.71.53-.88l7.9-4.44c.16-.12.36-.18.57-.18.21 0 .41.06.57.18l7.9 4.44c.32.17.53.5.53.88v9M12 4.15l-6.04 3.4 6.04 3.4 6.04-3.4L12 4.15Z\"/></svg>`;\n}\n\n/**\n * Save all settings in one operation\n */\nfunction savePerformanceSettings() {\n  localStorage.setItem(\n    'heerlen_map_performance',\n    JSON.stringify({\n      is3DEnabled: PERFORMANCE_CONFIG.settings.is3DEnabled,\n      previousPitch: PERFORMANCE_CONFIG.previousPitch || 45,\n      tooltipShown: PERFORMANCE_CONFIG.settings.frameRatePopupShown,\n      warningShown: localStorage.getItem('performance_warning_shown') === 'true',\n    })\n  );\n}\n\n/**\n * Load settings from localStorage\n */\nfunction loadPerformanceSettings() {\n  try {\n    const stored = localStorage.getItem('heerlen_map_performance');\n    if (stored) {\n      const parsed = JSON.parse(stored);\n      PERFORMANCE_CONFIG.settings.is3DEnabled = parsed.is3DEnabled !== false;\n      PERFORMANCE_CONFIG.previousPitch = parsed.previousPitch;\n      PERFORMANCE_CONFIG.settings.frameRatePopupShown = parsed.tooltipShown === true;\n      if (parsed.warningShown) localStorage.setItem('performance_warning_shown', 'true');\n    } else {\n      // Legacy support for old storage format\n      PERFORMANCE_CONFIG.settings.is3DEnabled =\n        localStorage.getItem('heerlen_map_3d_enabled') !== 'false';\n      PERFORMANCE_CONFIG.settings.frameRatePopupShown =\n        localStorage.getItem('performance_tooltip_shown') === 'true';\n    }\n  } catch (e) {\n    console.warn('Failed to load performance settings');\n  }\n}\n\n/**\n * Optimized performance monitoring\n */\nfunction startFrameRateMonitor() {\n  if (PERFORMANCE_CONFIG.frameRateMonitor) return;\n\n  let lastTime = performance.now();\n  let frames = 0;\n  let measurements = 0;\n  let totalFps = 0;\n  let monitorActive = true;\n  let rafId = null;\n\n  // Use throttling for measurements\n  const MEASURE_INTERVAL = 2000; // Check every 2 seconds instead of continuously\n\n  const measure = () => {\n    if (!monitorActive) return;\n\n    frames++;\n    const now = performance.now();\n\n    if (now - lastTime >= MEASURE_INTERVAL) {\n      const fps = Math.round((frames * 1000) / (now - lastTime));\n      totalFps += fps;\n      measurements++;\n\n      // Detect performance issues with fewer measurements\n      if (measurements >= 3) {\n        const avgFps = totalFps / measurements;\n\n        if (avgFps < 20) {\n          PERFORMANCE_CONFIG.settings.lowPerformanceDetected = true;\n\n          // Show recommendation if needed\n          const button = document.querySelector('.toggle-3d-button');\n          if (\n            PERFORMANCE_CONFIG.settings.is3DEnabled &&\n            button &&\n            !PERFORMANCE_CONFIG.settings.frameRatePopupShown\n          ) {\n            showPerformanceTooltip(button);\n          }\n\n          stopMonitoring();\n          return;\n        }\n        if (measurements >= 5) {\n          // Stop after 5 good measurements\n          stopMonitoring();\n          return;\n        }\n      }\n\n      // Reset for next interval\n      frames = 0;\n      lastTime = now;\n    }\n\n    if (monitorActive) {\n      rafId = requestAnimationFrame(measure);\n    }\n  };\n\n  const stopMonitoring = () => {\n    monitorActive = false;\n    if (rafId !== null) {\n      cancelAnimationFrame(rafId);\n    }\n    PERFORMANCE_CONFIG.frameRateMonitor = null;\n  };\n\n  // Start monitoring\n  rafId = requestAnimationFrame(measure);\n  PERFORMANCE_CONFIG.frameRateMonitor = { stop: stopMonitoring };\n\n  // Safety timeout - never monitor longer than 30 seconds\n  setTimeout(stopMonitoring, 30000);\n}\n\n/**\n * Create and add the 3D toggle control\n * @param {Object} map - The mapbox map instance\n */\nfunction add3DToggleControl(map) {\n  // Remove existing control if any\n  const existingControl = document.querySelector('.mapboxgl-ctrl-group .toggle-3d-button');\n  if (existingControl) {\n    const parentGroup = existingControl.closest('.mapboxgl-ctrl-group');\n    if (parentGroup) parentGroup.remove();\n  }\n\n  const container = document.createElement('div');\n  container.className = 'mapboxgl-ctrl mapboxgl-ctrl-group';\n\n  const button = document.createElement('button');\n  button.className = 'mapboxgl-ctrl-icon toggle-3d-button';\n  button.type = 'button';\n  button.setAttribute('aria-label', '3D gebouwen aan/uit');\n\n  // Set initial state\n  updateToggleButtonState();\n\n  // Add event listeners\n  button.addEventListener('click', () => {\n    toggle3DLayers(!PERFORMANCE_CONFIG.settings.is3DEnabled);\n\n    if (\n      PERFORMANCE_CONFIG.settings.is3DEnabled &&\n      PERFORMANCE_CONFIG.settings.lowPerformanceDetected &&\n      localStorage.getItem('performance_warning_shown') !== 'true'\n    ) {\n      showPerformanceWarning();\n    }\n  });\n\n  button.addEventListener('mouseenter', () => {\n    if (\n      PERFORMANCE_CONFIG.settings.lowPerformanceDetected &&\n      !PERFORMANCE_CONFIG.settings.frameRatePopupShown\n    ) {\n      showPerformanceTooltip(button);\n    }\n  });\n\n  container.appendChild(button);\n  const controlContainer = document.querySelector('.mapboxgl-ctrl-top-right');\n  if (controlContainer) {\n    controlContainer.appendChild(container);\n  }\n}\n\n/**\n * Initialize 3D settings with optimized loading\n * @param {Object} map - The mapbox map instance\n */\nexport function initialize3DSettings(map) {\n  // Make map available to other functions\n  window.map = map;\n\n  // Load settings once\n  loadPerformanceSettings();\n\n  // Add control when map is ready\n  map.once('load', () => {\n    add3DToggleControl(map);\n\n    // Start performance monitoring after a delay\n    setTimeout(startFrameRateMonitor, 5000);\n\n    // More efficient layer handling with single event listener\n    const styleHandler = () => {\n      if (map.getLayer(PERFORMANCE_CONFIG.layers.threeDModelsLayer)) {\n        cacheThreeDLayers();\n        toggle3DLayers(PERFORMANCE_CONFIG.settings.is3DEnabled);\n        map.off('styledata', styleHandler);\n      }\n    };\n\n    map.on('styledata', styleHandler);\n\n    // Try immediately in case layers are already loaded\n    if (map.getLayer(PERFORMANCE_CONFIG.layers.threeDModelsLayer)) {\n      cacheThreeDLayers();\n      toggle3DLayers(PERFORMANCE_CONFIG.settings.is3DEnabled);\n    }\n  });\n}\n\n// Placeholder functions for tooltips and warnings - these would need implementation\nfunction showPerformanceTooltip(button) {\n  console.log('Performance tooltip should be shown');\n  // Implementation would show a tooltip about performance\n}\n\nfunction showPerformanceWarning() {\n  console.log('Performance warning should be shown');\n  // Implementation would show a warning about low performance\n}", "// Tour/walkthrough module\n\n/**\n * Initialize tour functionality\n * @param {Object} map - The mapbox map instance\n */\nexport function initializeTour(map) {\n  // Check if mapboxgl is available\n  if (typeof mapboxgl !== 'undefined') {\n    // Load external CSS file\n    loadTourStylesheet();\n\n    // Wait for map to fully initialize using a more reliable method\n    const checkMapReady = setInterval(function () {\n      const mapContainer = document.getElementById('map');\n      // Check if map container exists and map has been rendered\n      if (mapContainer && mapContainer.querySelector('.mapboxgl-canvas') && map && map.loaded()) {\n        clearInterval(checkMapReady);\n\n        // Give map additional time to render all elements properly\n        setTimeout(function () {\n          setupTourSystem(map);\n        }, 2000);\n      }\n    }, 500);\n  }\n}\n\n/**\n * Load the external CSS file for tour styles\n */\nfunction loadTourStylesheet() {\n  if (!document.getElementById('tour-styles')) {\n    const linkElem = document.createElement('link');\n    linkElem.id = 'tour-styles';\n    linkElem.rel = 'stylesheet';\n    linkElem.type = 'text/css';\n    linkElem.href = 'tour-styles.css'; // Path to your CSS file\n    document.head.appendChild(linkElem);\n  }\n}\n\n/**\n * Setup the tour system\n * @param {Object} map - The mapbox map instance\n */\nfunction setupTourSystem(map) {\n  // Check if guide was already shown\n  const walkthroughShown = localStorage.getItem('heerlenMapWalkthroughShown');\n\n  // Create persistent help button regardless of first visit\n  addHelpButton(map);\n\n  // Show tour on first visit or if manually triggered\n  if (!walkthroughShown || window.location.hash === '#tutorial') {\n    // Show a welcome message before starting tour\n    showWelcomeMessage(function () {\n      startTour(map);\n      localStorage.setItem('heerlenMapWalkthroughShown', 'true');\n    });\n  }\n}\n\n/**\n * Add welcome message overlay with animation\n * @param {Function} callback - Callback function to execute after welcome\n */\nfunction showWelcomeMessage(callback) {\n  const overlay = document.createElement('div');\n  overlay.className = 'welcome-overlay';\n  overlay.innerHTML = `\n    <div class=\"welcome-card\">\n      <p> Welkom in <strong>Heerlen</strong> deze kaart heeft veel unieke functies die ik je graag uitleg </p>\n      <div class=\"welcome-buttons\">\n        <button class=\"welcome-start-btn\">Start tour</button>\n        <button class=\"welcome-skip-btn\">Skip tour</button>\n      </div>\n    </div>\n  `;\n  document.body.appendChild(overlay);\n\n  // Animate entrance\n  setTimeout(() => {\n    overlay.style.opacity = '1';\n    const card = overlay.querySelector('.welcome-card');\n    card.style.transform = 'translateY(0)';\n    card.style.opacity = '1';\n  }, 100);\n\n  // Handle button clicks\n  overlay.querySelector('.welcome-start-btn').addEventListener('click', function () {\n    overlay.style.opacity = '0';\n    setTimeout(() => {\n      overlay.remove();\n      callback();\n    }, 500);\n  });\n\n  overlay.querySelector('.welcome-skip-btn').addEventListener('click', function () {\n    overlay.style.opacity = '0';\n    setTimeout(() => {\n      overlay.remove();\n    }, 500);\n  });\n}\n\n/**\n * Add help button to trigger tour manually\n * @param {Object} map - The mapbox map instance\n */\nfunction addHelpButton(map) {\n  // Remove existing help button if any\n  const existingButton = document.querySelector('.help-button');\n  if (existingButton) {\n    existingButton.remove();\n  }\n\n  const helpButton = document.createElement('button');\n  helpButton.className = 'help-button';\n  helpButton.innerHTML = '?';\n  helpButton.title = 'Start rondleiding';\n  helpButton.setAttribute('aria-label', 'Start kaart rondleiding');\n\n  helpButton.addEventListener('click', () => {\n    if (window.activeTour && window.activeTour.isActive()) {\n      // If tour is already active, resume it\n      const currentStep = window.activeTour.getCurrentStep();\n      if (currentStep) {\n        window.activeTour.show(currentStep.id);\n      } else {\n        window.activeTour.start();\n      }\n    } else {\n      // Start a new tour\n      startTour(map);\n    }\n  });\n\n  // Place next to other controls with better positioning\n  const controlContainer = document.querySelector('.mapboxgl-ctrl-top-right');\n  if (controlContainer) {\n    const helpControl = document.createElement('div');\n    helpControl.className = 'mapboxgl-ctrl mapboxgl-ctrl-group help-button-container';\n    helpControl.appendChild(helpButton);\n    controlContainer.appendChild(helpControl);\n  }\n}\n\n/**\n * Main tour function\n * @param {Object} map - The mapbox map instance\n */\nexport function startTour(map) {\n  // Create tour with enhanced options\n  const tour = new Shepherd.Tour({\n    useModalOverlay: false,\n    defaultStepOptions: {\n      cancelIcon: {\n        enabled: true,\n      },\n      classes: 'shepherd-theme-heerlen',\n      scrollTo: false,\n      title: null, // No titles, just content\n      popperOptions: {\n        modifiers: [\n          {\n            name: 'offset',\n            options: {\n              offset: [0, 12],\n            },\n          },\n          {\n            name: 'preventOverflow',\n            options: {\n              boundary: document.body,\n              padding: 10,\n            },\n          },\n        ],\n      },\n    },\n  });\n\n  // Store tour reference globally\n  window.activeTour = tour;\n\n  // Function to enable modal overlay with enhanced animation\n  function enableOverlay() {\n    const overlay = document.querySelector('.shepherd-modal-overlay-container');\n    if (overlay) {\n      overlay.style.transition = 'opacity 0.3s ease';\n      overlay.classList.add('shepherd-modal-is-visible');\n      overlay.style.pointerEvents = 'auto';\n    }\n  }\n\n  // Function to disable modal overlay\n  function disableOverlay() {\n    const overlay = document.querySelector('.shepherd-modal-overlay-container');\n    if (overlay) {\n      overlay.classList.remove('shepherd-modal-is-visible');\n      overlay.style.pointerEvents = 'none';\n    }\n  }\n\n  // Enhanced element targeting function that handles cases where elements don't exist\n  function safelyGetElement(selector, fallbackSelector) {\n    const element = document.querySelector(selector);\n    if (element) {\n      return { element, on: 'bottom' };\n    }\n    if (fallbackSelector) {\n      const fallback = document.querySelector(fallbackSelector);\n      if (fallback) {\n        return { element: fallback, on: 'bottom' };\n      }\n    }\n    // If no element found, return null and skip attachment\n    return null;\n  }\n\n  // Step 1: Welcome (with overlay) - no title\n  tour.addStep({\n    id: 'welcome',\n    text: 'Ontdek <strong>Heerlen</strong> met deze interactieve kaart. We leiden je even rond!.',\n    buttons: [\n      {\n        text: 'Start',\n        action: tour.next,\n        classes: 'shepherd-button-primary',\n      },\n    ],\n    when: {\n      show: enableOverlay,\n    },\n  });\n\n  // Steps with proper element targeting and fallbacks - minimalist style without titles\n  const tourSteps = [\n    {\n      id: 'map-controls',\n      attachTo: safelyGetElement('.mapboxgl-ctrl-top-right', '.mapboxgl-ctrl-group'),\n      text: 'Gebruik deze <strong>knoppen</strong> om in/uit te zoomen en de kaart te draaien.',\n    },\n    {\n      id: 'filters',\n      attachTo: safelyGetElement('.map-filter-wrap-2', '.filter-btn'),\n      text: ' gebruik <strong>filters</strong> om per categorie te zoeken en te ontdekken!',\n    },\n    {\n      id: 'geolocation',\n      attachTo: safelyGetElement('.mapboxgl-ctrl-geolocate', '.mapboxgl-ctrl-bottom-right'),\n      text: 'Klik hier om je <strong>locatie</strong> aan te zetten en direct te zien waar jij je bevindt op de kaart.',\n    },\n  ];\n\n  // Add each step with proper error handling\n  tourSteps.forEach((stepConfig) => {\n    // Skip steps with attachments that couldn't be found\n    if (stepConfig.attachTo) {\n      tour.addStep({\n        ...stepConfig,\n        buttons: [\n          {\n            text: '\u2190',\n            action: tour.back,\n            classes: 'shepherd-button-secondary',\n          },\n          {\n            text: '\u2192',\n            action: tour.next,\n            classes: 'shepherd-button-primary',\n          },\n        ],\n        when: {\n          show: enableOverlay,\n          hide: () => {\n            // Pulse the target element when showing the step\n            const target = stepConfig.attachTo?.element;\n            if (target) {\n              target.classList.add('tour-highlight-pulse');\n\n              // Remove pulse after animation completes\n              setTimeout(() => {\n                target.classList.remove('tour-highlight-pulse');\n              }, 1000);\n            }\n          },\n        },\n      });\n    }\n  });\n\n  // Marker instruction step with minimalist design\n  tour.addStep({\n    id: 'try-marker',\n    text: `\n      <div class=\"tour-marker-instruction\">\n        <p>klik op een van de <strong>gekleurde</strong> rondjes.</p>\n        <div class=\"marker-animation\">\n          <span class=\"pulse-dot\"></span>\n          <span class=\"instruction-arrow\">\u2193</span>\n        </div>\n      </div>\n    `,\n    buttons: [\n      {\n        text: '\u2190',\n        action: tour.back,\n        classes: 'shepherd-button-secondary',\n      },\n      {\n        text: 'Skip',\n        action: () => {\n          window.tourWaitingForMarkerClick = false;\n          tour.show('popup-info');\n        },\n        classes: 'shepherd-button-secondary',\n      },\n    ],\n    when: {\n      show: function () {\n        disableOverlay(); // Disable overlay to allow marker clicking\n\n        // Show floating message to encourage clicking a marker\n        const message = document.createElement('div');\n        message.className = 'tour-instruction-message';\n        message.textContent = 'Klik op een marker om door te gaan';\n        document.body.appendChild(message);\n\n        // Set a timeout to remove the message after animation completes\n        setTimeout(() => {\n          if (message.parentNode) {\n            message.parentNode.removeChild(message);\n          }\n        }, 4000);\n\n        // Mark this step as waiting for marker click\n        window.tourWaitingForMarkerClick = true;\n\n        // Create a fallback to next step in case the user can't find a marker to click\n        window.markerClickFallbackTimer = setTimeout(() => {\n          if (window.tourWaitingForMarkerClick) {\n            // If user hasn't clicked after 15 seconds, show hint message\n            const hintMessage = document.createElement('div');\n            hintMessage.className = 'tour-instruction-message';\n            hintMessage.textContent = 'Klik op \"Skip\" als je geen marker kunt vinden';\n            document.body.appendChild(hintMessage);\n\n            setTimeout(() => {\n              if (hintMessage.parentNode) {\n                hintMessage.parentNode.removeChild(hintMessage);\n              }\n            }, 5000);\n          }\n        }, 15000);\n      },\n      hide: function () {\n        // Clear any fallback timers when leaving this step\n        if (window.markerClickFallbackTimer) {\n          clearTimeout(window.markerClickFallbackTimer);\n        }\n\n        // Remove any lingering instruction messages\n        const messages = document.querySelectorAll('.tour-instruction-message');\n        messages.forEach((msg) => {\n          if (msg.parentNode) {\n            msg.parentNode.removeChild(msg);\n          }\n        });\n      },\n    },\n    // Prevent advancing with keyboard navigation\n    canClickTarget: false,\n    advanceOn: null,\n  });\n\n  // Popup info step\n  tour.addStep({\n    id: 'popup-info',\n    attachTo: function () {\n      const popup = document.querySelector('.mapboxgl-popup-content');\n      return popup ? { element: popup, on: 'top' } : null;\n    },\n    text: 'Bekijk <strong>informatie</strong> over deze plek en druk op de <strong>like-knop</strong> om deze locatie op te slaan.',\n    buttons: [\n      {\n        text: '\u2190',\n        action: tour.back,\n        classes: 'shepherd-button-secondary',\n      },\n      {\n        text: '\u2192',\n        action: tour.next,\n        classes: 'shepherd-button-primary',\n      },\n    ],\n    when: {\n      show: function () {\n        enableOverlay();\n\n        // If popup doesn't exist, try to create one automatically\n        if (!document.querySelector('.mapboxgl-popup-content') && map) {\n          // Find a visible marker and simulate a click\n          const marker = document.querySelector('.mapboxgl-marker, .mapboxgl-user-location-dot');\n          if (marker) {\n            // Try to simulate a click on this marker\n            marker.click();\n\n            // If that didn't work, try plan B:\n            setTimeout(() => {\n              // If still no popup, use a fallback approach\n              if (\n                !document.querySelector('.mapboxgl-popup-content') &&\n                map.getLayer('location-markers')\n              ) {\n                const features = map.queryRenderedFeatures({ layers: ['location-markers'] });\n                if (features.length > 0) {\n                  const feature = features[0];\n                  map.fire('click', {\n                    lngLat: feature.geometry.coordinates,\n                    point: map.project(feature.geometry.coordinates),\n                    features: [feature],\n                  });\n                }\n              }\n            }, 300);\n          }\n        }\n      },\n    },\n  });\n\n  // Add the heart favorites step - minimalist style\n  tour.addStep({\n    id: 'like-heart-svg',\n    attachTo: safelyGetElement('.heart-svg.w-embed', '.like-heart-svg'),\n    text: 'Klik op het <strong>hartje</strong> om al je opgeslagen favoriete locaties te bekijken.',\n    buttons: [\n      {\n        text: '\u2190',\n        action: tour.back,\n        classes: 'shepherd-button-secondary',\n      },\n      {\n        text: '\u2192',\n        action: tour.next,\n        classes: 'shepherd-button-primary',\n      },\n    ],\n    when: {\n      show: enableOverlay,\n      hide: () => {\n        // Pulse the target element when showing the step\n        const target = document.querySelector('.heart-svg.w-embed');\n        if (target) {\n          target.classList.add('tour-highlight-pulse');\n\n          // Remove pulse after animation completes\n          setTimeout(() => {\n            target.classList.remove('tour-highlight-pulse');\n          }, 1000);\n        }\n      },\n    },\n  });\n\n  // Final step - minimalist style\n  tour.addStep({\n    id: 'finish',\n    text: 'Je bent nu klaar om <strong>Heerlen te verkennen</strong>! Klik op markers om locaties te ontdekken. Je kunt deze rondleiding opnieuw starten via het <strong>?</strong> icoon.',\n    buttons: [\n      {\n        text: 'Klaar',\n        action: tour.complete,\n        classes: 'shepherd-button-primary',\n      },\n    ],\n    when: { show: enableOverlay },\n  });\n\n  // Progress bar for better user understanding of tour length\n  tour.on('start', () => {\n    addProgressBar(tour);\n  });\n\n  // Setup marker click listener to advance tour if needed\n  function setupMarkerClickListener() {\n    // Remove previous listener if it exists\n    if (window.markerClickListener) {\n      map.off('click', 'location-markers', window.markerClickListener);\n    }\n\n    // Create new listener\n    window.markerClickListener = () => {\n      if (window.tourWaitingForMarkerClick) {\n        window.tourWaitingForMarkerClick = false;\n        clearTimeout(window.markerClickFallbackTimer);\n\n        // Give time for popup to appear\n        setTimeout(() => {\n          if (tour.getCurrentStep() && tour.getCurrentStep().id === 'try-marker') {\n            enableOverlay(); // Re-enable overlay for next steps\n            tour.show('popup-info');\n          }\n        }, 500);\n      }\n    };\n\n    // Add listener\n    map.on('click', 'location-markers', window.markerClickListener);\n  }\n\n  // Setup the marker click listener\n  setupMarkerClickListener();\n\n  // Clean up when tour completes or is cancelled\n  function cleanupTour() {\n    window.tourWaitingForMarkerClick = false;\n    if (window.markerClickFallbackTimer) {\n      clearTimeout(window.markerClickFallbackTimer);\n    }\n\n    const messages = document.querySelectorAll('.tour-instruction-message');\n    messages.forEach((msg) => {\n      if (msg.parentNode) {\n        msg.parentNode.removeChild(msg);\n      }\n    });\n\n    const progressBar = document.querySelector('.shepherd-progress-bar');\n    if (progressBar && progressBar.parentNode) {\n      progressBar.parentNode.removeChild(progressBar);\n    }\n  }\n\n  tour.on('complete', cleanupTour);\n  tour.on('cancel', cleanupTour);\n\n  // Start the tour\n  tour.start();\n}\n\n/**\n * Add progress bar to show tour progress\n * @param {Object} tour - The tour instance\n */\nfunction addProgressBar(tour) {\n  // Remove existing progress bar if any\n  const existingBar = document.querySelector('.shepherd-progress-bar');\n  if (existingBar) {\n    existingBar.remove();\n  }\n\n  // Create progress bar container\n  const progressContainer = document.createElement('div');\n  progressContainer.className = 'shepherd-progress-bar'; // Keep the flexbox layout\n\n  // Create the inner progress bar element\n  const progressInner = document.createElement('div');\n  progressInner.className = 'progress-inner';\n  progressInner.innerHTML = `<div class=\"progress-fill\"></div>`; // Only the bar itself\n\n  // Create the close button\n  const closeButton = document.createElement('button');\n  closeButton.className = 'progress-bar-close-btn'; // Use your existing CSS class\n  closeButton.innerHTML = '\u00D7'; // The 'x' symbol (HTML entity)\n  closeButton.setAttribute('aria-label', 'Sluit rondleiding'); // For accessibility\n  closeButton.title = 'Sluit rondleiding'; // Tooltip\n\n  // Add click event listener to cancel the tour\n  closeButton.addEventListener('click', () => {\n    tour.cancel(); // Or tour.complete() if you prefer that\n  });\n\n  // Append the inner progress bar AND the close button to the container\n  progressContainer.appendChild(progressInner); // First the bar\n  progressContainer.appendChild(closeButton); // Then the button next to it (thanks to flexbox)\n\n  // Append the whole container to the body\n  document.body.appendChild(progressContainer);\n\n  // Update progress bar when step changes - minimalist with no text\n  function updateProgress() {\n    const currentStep = tour.getCurrentStep();\n    if (!currentStep) return;\n\n    const stepIndex = tour.steps.indexOf(currentStep);\n    const totalSteps = tour.steps.length;\n    // Small adjustment for better progression: start at 0% for the first step\n    const progress = totalSteps > 1 ? Math.round((stepIndex / (totalSteps - 1)) * 100) : 100;\n\n    const fill = progressContainer.querySelector('.progress-fill');\n    // Make sure fill exists before adjusting style\n    if (fill) {\n      fill.style.width = `${progress}%`;\n    }\n  }\n\n  // Add event listeners for progress updates\n  tour.on('show', updateProgress);\n\n  // Initial update\n  updateProgress();\n}\n\nexport function endTour() {\n  console.log('Ending tour...');\n  localStorage.setItem('heerlen-tour-completed', 'true');\n}", "/**\n * Main Application - Heerlen Interactive Map\n * This is the main entry point that imports and initializes all modules\n */\n\n// Import CSS\nimport './app.css';\n\n// Import modules\nimport { setupBoundaryCheck } from './modules/boundaryUtils.js';\nimport { CONFIG } from './modules/config.js';\nimport { loadLocationData, updateMapSource } from './modules/dataLoader.js';\nimport { applyMapFilters, setupLocationFilters, toggleFilter } from './modules/filters.js';\nimport { GeolocationManager } from './modules/geolocation.js';\nimport { loadFiltersAndUpdateMap } from './modules/localStorage.js';\nimport { setupMapInteractionHandlers, setupMapLoadHandler, setupSidebarHandlers } from './modules/mapInteractions.js';\nimport { initializeMap } from './modules/mapInit.js';\nimport { addMarkers, updateMarkersData, updateMarkerVisibility } from './modules/markers.js';\nimport { setupPOIFiltering } from './modules/poi.js';\nimport {\n  closeActivePopup,\n  closeItem,\n  createPopup,\n  handleSnapchatLink,\n  showImagePopup,\n} from './modules/popups.js';\nimport { state } from './modules/state.js';\nimport { setupThreeJSLayer } from './modules/threejs.js';\nimport { initialize3DSettings } from './modules/toggle3D.js';\nimport { initializeTour } from './modules/tour.js';\n\n// Initialize when Webflow is ready\nwindow.Webflow ||= [];\nwindow.Webflow.push(async () => {\n  console.log('Initializing Heerlen Interactive Map...');\n\n  try {\n    // Initialize map\n    const map = initializeMap();\n\n    // Make map globally available for debugging\n    window.map = map;\n\n    // Initialize geolocation manager\n    const geolocationManager = new GeolocationManager(map);\n    window.geolocationManager = geolocationManager;\n\n    // Setup all map handlers and systems\n    setupMapLoadHandler(map);\n    setupMapInteractionHandlers(map);\n    setupSidebarHandlers();\n    setupBoundaryCheck(map);\n    setupPOIFiltering(map);\n    setupThreeJSLayer(map);\n    initialize3DSettings(map);\n\n    // Initialize tour\n    initializeTour(map);\n\n    // Handle zoom changes\n    map.on('zoom', () => {\n      const currentZoom = map.getZoom();\n      updateMarkerVisibility(map, currentZoom);\n    });\n\n    // Handle map clicks\n    map.on('click', (e) => {\n      // Check if click is on a marker\n      const features = map.queryRenderedFeatures(e.point);\n      if (features.length > 0) {\n        const location = features[0];\n        createPopup(location, map);\n      } else {\n        closeActivePopup();\n      }\n    });\n\n    // Setup filter button handlers\n    document.addEventListener('DOMContentLoaded', () => {\n      document.querySelectorAll('.filter-btn').forEach((button) => {\n        button.addEventListener('click', () => {\n          const { category } = button.dataset;\n          if (category) {\n            toggleFilter(category);\n            button.classList.toggle('is--active');\n          }\n        });\n      });\n    });\n\n    // Log successful initialization\n    console.log('Heerlen Interactive Map initialized successfully!');\n  } catch (error) {\n    console.error('Error initializing map:', error);\n  }\n});\n\n// Export commonly used functions for global access\nwindow.HeerlenMap = {\n  getState: () => state,\n  getConfig: () => CONFIG,\n  closePopup: closeActivePopup,\n  toggleFilter: toggleFilter,\n};\n\n// Make popup functions globally available for HTML onclick handlers\nwindow.handleSnapchatLink = handleSnapchatLink;\nwindow.showImagePopup = showImagePopup;\nwindow.closeItem = closeItem;\n"],
  "mappings": "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",
  "names": ["map", "map", "map", "center", "map", "location", "map", "animateGradient", "gradient", "html", "map", "map", "map", "map", "map", "map", "map", "location"]
}
