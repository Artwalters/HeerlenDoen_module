"use strict";(()=>{var we=Object.defineProperty;var et=(e,t,a)=>t in e?we(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var N=(e,t)=>()=>(e&&(t=e(e=0)),t);var ke=(e,t)=>{for(var a in t)we(e,a,{get:t[a],enumerable:!0})};var g=(e,t,a)=>et(e,typeof t!="symbol"?t+"":t,a);var y,Me,tt,Q,Le,F=N(()=>{"use strict";y={MAP:{center:[5.979642,50.887634],zoom:15.5,pitch:45,bearing:-17.6,boundary:{center:[5.977105864037915,50.88774161029858],radius:.6}},MARKER_ZOOM:{min:10,small:14,medium:16,large:18}},Me="pk.eyJ1IjoicHJvamVjdGhlZXJsZW4iLCJhIjoiY2x4eWVmcXBvMWozZTJpc2FqbWgzcnAyeCJ9.SVOVbBG6o1lHs6TwCudR9g",tt="mapbox://styles/projectheerlen/cm1t3u60e011d01peewgldm85",Q="heerlenActiveFilters",Le={container:"map",style:tt,center:y.MAP.center,zoom:y.MAP.zoom,pitch:y.MAP.pitch,bearing:y.MAP.bearing,antialias:!0,interactive:!0,renderWorldCopies:!1,preserveDrawingBuffer:!1,maxParallelImageRequests:16,fadeDuration:0}});var H,ee,R,_,te=N(()=>{"use strict";H=class H{constructor(){g(this,"listeners",new Map)}static getInstance(){return H.instance||(H.instance=new H),H.instance}on(t,a){return this.listeners.has(t)||this.listeners.set(t,new Set),this.listeners.get(t).add(a),()=>{this.listeners.get(t)?.delete(a)}}once(t,a){let o=n=>{a(n),this.off(t,o)};return this.on(t,o)}off(t,a){this.listeners.get(t)?.delete(a)}emit(t,a){let o=this.listeners.get(t);o&&o.forEach(n=>{try{n(a)}catch{}})}listenerCount(t){return this.listeners.get(t)?.size||0}removeAllListeners(t){t?this.listeners.delete(t):this.listeners.clear()}eventNames(){return Array.from(this.listeners.keys())}cleanup(){this.listeners.clear()}};g(H,"instance");ee=H,R=ee.getInstance(),_={MAP_LOADED:"map:loaded",MAP_STYLE_CHANGED:"map:styleChanged",POPUP_OPENED:"popup:opened",POPUP_CLOSED:"popup:closed",POPUP_FLIPPED:"popup:flipped",FILTER_CHANGED:"filter:changed",FILTER_CLEARED:"filter:cleared",MARKER_CLICKED:"marker:clicked",MARKER_HOVERED:"marker:hovered",TOUR_STARTED:"tour:started",TOUR_ENDED:"tour:ended",TOUR_STEP_CHANGED:"tour:stepChanged",LOCATION_FOUND:"location:found",LOCATION_ERROR:"location:error",BOUNDARY_ENTERED:"location:boundaryEntered",BOUNDARY_EXITED:"location:boundaryExited",PERFORMANCE_WARNING:"performance:warning",RESOURCE_LOADED:"resource:loaded",RESOURCE_ERROR:"resource:error"}});function E(e){w.setActivePopup(e)}var Z,oe,w,_t,ae=N(()=>{"use strict";te();Z=class Z{constructor(){g(this,"state");g(this,"subscribers",new Set);this.state={map:null,mapLoaded:!1,activePopup:null,markersAdded:!1,modelsAdded:!1,mapLocations:{type:"FeatureCollection",features:[]},activeFilters:new Set}}static getInstance(){return Z.instance||(Z.instance=new Z),Z.instance}getState(){return{...this.state}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}setState(t){let a={...this.state};Object.assign(this.state,t),this.subscribers.forEach(o=>{try{o(this.state)}catch{}}),this.emitStateChangeEvents(a,this.state)}emitStateChangeEvents(t,a){!t.mapLoaded&&a.mapLoaded&&R.emit(_.MAP_LOADED,a.map),t.activePopup!==a.activePopup&&(a.activePopup?R.emit(_.POPUP_OPENED,a.activePopup):t.activePopup&&R.emit(_.POPUP_CLOSED,t.activePopup)),t.activeFilters!==a.activeFilters&&R.emit(_.FILTER_CHANGED,Array.from(a.activeFilters))}setMap(t){this.setState({map:t})}setMapLoaded(t){this.setState({mapLoaded:t})}setActivePopup(t){this.setState({activePopup:t})}setMarkersAdded(t){this.setState({markersAdded:t})}setModelsAdded(t){this.setState({modelsAdded:t})}updateMapLocations(t){this.setState({mapLocations:t})}setActiveFilters(t){this.setState({activeFilters:new Set(t)})}addFilter(t){let a=new Set(this.state.activeFilters);a.add(t),this.setState({activeFilters:a})}removeFilter(t){let a=new Set(this.state.activeFilters);a.delete(t),this.setState({activeFilters:a})}clearFilters(){this.setState({activeFilters:new Set})}reset(){this.state={map:null,mapLoaded:!1,activePopup:null,markersAdded:!1,modelsAdded:!1,mapLocations:{type:"FeatureCollection",features:[]},activeFilters:new Set},this.subscribers.forEach(t=>{try{t(this.state)}catch{}})}cleanup(){this.subscribers.clear()}};g(Z,"instance");oe=Z,w=oe.getInstance(),_t=w.getState()});function Ee(e){w.setMap(e)}var m,A=N(()=>{"use strict";ae();ae();m={get map(){return w.getState().map},get activePopup(){return w.getState().activePopup},get markersAdded(){return w.getState().markersAdded},get modelsAdded(){return w.getState().modelsAdded},get mapLocations(){return w.getState().mapLocations},get activeFilters(){return w.getState().activeFilters},set map(e){w.setMap(e)},set activePopup(e){w.setActivePopup(e)},set markersAdded(e){w.setMarkersAdded(e)},set modelsAdded(e){w.setModelsAdded(e)},set mapLocations(e){w.updateMapLocations(e)},set activeFilters(e){w.setActiveFilters(e)}}});var Ze={};ke(Ze,{closeItem:()=>O,closeItemIfVisible:()=>le,setupPopupInteractions:()=>_e,showImagePopup:()=>B});function ut(){let e=window.location.pathname;return e.includes("/en/")?"en":e.includes("/de/")?"de":"nl"}function He(e,t,a){if(!e)return;t&&(t.style.transition="opacity 0.3s ease"),a&&(a.style.transition="opacity 0.3s ease");let o=()=>{let n=e.scrollHeight-e.clientHeight;if(n<=5){t&&(t.style.opacity="0"),a&&(a.style.opacity="0");return}let i=e.scrollTop/n;if(a){let r=1;i>.75&&(r=1-(i-.75)/.25),a.style.opacity=Math.max(0,Math.min(1,r)).toFixed(2)}if(t){let r=0;i>0&&(r=Math.min(1,i*4)),t.style.opacity=Math.max(0,Math.min(1,r)).toFixed(2)}};return e.addEventListener("scroll",o),window.addEventListener("resize",o),o(),()=>{e.removeEventListener("scroll",o),window.removeEventListener("resize",o)}}function _e(e,t,a){let o=e.getElement(),n=o.querySelector(".mapboxgl-popup-content"),i=o.querySelector(".popup-wrapper"),r=o.querySelector(".popup-front .content-wrapper"),l=o.querySelector(".popup-back .content-wrapper"),c=o.querySelector(".popup-description"),p=o.querySelector("#paint0_linear_3248_5"),u=[],b=o.querySelector(".popup-front .fade-top"),s=o.querySelector(".popup-front .fade-bottom");if(c){let h=He(c,b,s);h&&u.push(h);let v=o.querySelector(".popup-back .popup-descriptionv2"),M=o.querySelector(".popup-back .fade-top"),L=o.querySelector(".popup-back .fade-bottom");if(v){let S=He(v,M,L);S&&u.push(S)}o.querySelectorAll(".more-info-button").forEach(S=>{S.addEventListener("click",()=>{setTimeout(()=>{let I=i.classList.contains("is-flipped"),x=I?v:c;if(x){let T=x.scrollHeight-x.clientHeight;if(T>5){let P=x.scrollTop/T;I?(M&&(M.style.opacity=P>0?Math.min(1,P*4).toFixed(2):"0"),L&&(L.style.opacity=P>.75?(1-(P-.75)/.25).toFixed(2):"1")):(b&&(b.style.opacity=P>0?Math.min(1,P*4).toFixed(2):"0"),s&&(s.style.opacity=P>.75?(1-(P-.75)/.25).toFixed(2):"1"))}}},50)})})}function d(h,v,M){let L=parseFloat(M.y1.baseVal.value),S=parseFloat(M.y2.baseVal.value),I=Date.now();function x(){let T=Math.min((Date.now()-I)/800,1);M.y1.baseVal.value=L+(h-L)*T,M.y2.baseVal.value=S+(v-S)*T,T<1&&requestAnimationFrame(x)}requestAnimationFrame(x)}function f(){let h=Math.max(r.offsetHeight,l.offsetHeight);i.style.height=`${h}px`,o.querySelectorAll(".popup-side").forEach(v=>{v.style.height=`${h}px`})}if(p&&(i.addEventListener("mouseenter",()=>{d(30,282,p)}),i.addEventListener("mouseleave",()=>{d(0,252,p)})),setTimeout(f,10),n.style.opacity="0",n.style.transform="rotate(8deg) translateY(40px) scale(0.4)",requestAnimationFrame(()=>{n.style.transition="all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1)",n.style.opacity="1",n.style.transform="rotate(0deg) translateY(0) scale(1)"}),c){c.addEventListener("wheel",x=>{x.stopPropagation(),x.preventDefault(),c.scrollTop+=x.deltaY},{passive:!1}),c.addEventListener("mouseenter",()=>{window.map.dragPan.disable(),window.map.scrollZoom.disable()}),c.addEventListener("mouseleave",()=>{window.map.dragPan.enable(),window.map.scrollZoom.enable()});let h=!1,v,M;c.addEventListener("mousedown",x=>{h=!0,v=x.pageY,M=c.scrollTop,c.style.cursor="grabbing",x.preventDefault(),x.stopPropagation()}),c.addEventListener("mousemove",x=>{if(!h)return;x.preventDefault(),x.stopPropagation();let T=x.pageY-v;c.scrollTop=M-T});let L=()=>{h=!1,c.style.cursor="grab"};document.addEventListener("mouseup",L),u.push(()=>document.removeEventListener("mouseup",L)),c.addEventListener("mouseleave",()=>{h=!1,c.style.cursor="grab"});let S=0,I=0;c.addEventListener("touchstart",x=>{S=x.touches[0].clientY,I=c.scrollTop,x.stopPropagation()}),c.addEventListener("touchmove",x=>{let T=S-x.touches[0].clientY;c.scrollTop=I+T,x.stopPropagation(),x.preventDefault()},{passive:!1})}t.image&&o.querySelector(".impressie-button")&&o.querySelector(".impressie-button").addEventListener("click",()=>{t.link_ar||(n.style.transition="all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55)",n.style.transform="rotate(-5deg) translateY(40px) scale(0.6)",n.style.opacity="0",setTimeout(()=>{let v=Math.max(r.offsetHeight,l.offsetHeight);e.remove(),E(null),B(t,a,v)},400))}),o.querySelectorAll(".more-info-button").forEach(h=>{h.addEventListener("click",()=>{i.classList.toggle("is-flipped")})}),o.querySelectorAll(".close-button").forEach(h=>{h.addEventListener("click",()=>{n.style.transition="all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55)",n.style.transform="rotate(-5deg) translateY(40px) scale(0.6)",n.style.opacity="0";let v=window.$(".locations-map_item.is--show");v.length&&v.css({opacity:"0",transform:"translateY(40px) scale(0.6)",transition:"all 400ms cubic-bezier(0.68, -0.55, 0.265, 1.55)"}),setTimeout(()=>{u.forEach(M=>M()),e.remove(),E(null),window.$(".locations-map_item").removeClass("is--show"),window.geolocationManager&&(window.geolocationManager.isPopupOpen=!1,window.geolocationManager.wasTracking&&window.geolocationManager.resumeTracking())},400)})}),window.addEventListener("resize",f),u.push(()=>window.removeEventListener("resize",f))}function B(e,t,a){let o=ut(),n=mt[o],i=window.matchMedia("(max-width: 479px)").matches,r=new window.mapboxgl.Popup({offset:{bottom:[0,-5],top:[0,0],left:[0,0],right:[0,0]},className:"custom-popup",closeButton:!1,maxWidth:"300px",closeOnClick:!1,anchor:"bottom"}),l=`
    <style>
      .popup-wrapper {
        height: ${a}px;
      }

      .popup-side {
        background-color: ${e.color||"#6B46C1"};
        clip-path: polygon(calc(100% - 0px) 26.5px, calc(100% - 0px) calc(100% - 26.5px), calc(100% - 0px) calc(100% - 26.5px), calc(100% - 0.34671999999995px) calc(100% - 22.20048px), calc(100% - 1.3505599999999px) calc(100% - 18.12224px), calc(100% - 2.95704px) calc(100% - 14.31976px), calc(100% - 5.11168px) calc(100% - 10.84752px), calc(100% - 7.76px) calc(100% - 7.76px), calc(100% - 10.84752px) calc(100% - 5.11168px), calc(100% - 14.31976px) calc(100% - 2.9570399999999px), calc(100% - 18.12224px) calc(100% - 1.35056px), calc(100% - 22.20048px) calc(100% - 0.34672px), calc(100% - 26.5px) calc(100% - 0px), calc(50% - -32.6px) calc(100% - 0px), calc(50% - -32.6px) calc(100% - 0px), calc(50% - -31.57121px) calc(100% - 0.057139999999947px), calc(50% - -30.56648px) calc(100% - 0.2255199999999px), calc(50% - -29.59427px) calc(100% - 0.50057999999996px), calc(50% - -28.66304px) calc(100% - 0.87775999999991px), calc(50% - -27.78125px) calc(100% - 1.3525px), calc(50% - -26.95736px) calc(100% - 1.92024px), calc(50% - -26.19983px) calc(100% - 2.57642px), calc(50% - -25.51712px) calc(100% - 3.31648px), calc(50% - -24.91769px) calc(100% - 4.13586px), calc(50% - -24.41px) calc(100% - 5.03px), calc(50% - -24.41px) calc(100% - 5.03px), calc(50% - -22.95654px) calc(100% - 7.6045699999999px), calc(50% - -21.23752px) calc(100% - 9.9929599999998px), calc(50% - -19.27298px) calc(100% - 12.17519px), calc(50% - -17.08296px) calc(100% - 14.13128px), calc(50% - -14.6875px) calc(100% - 15.84125px), calc(50% - -12.10664px) calc(100% - 17.28512px), calc(50% - -9.36042px) calc(100% - 18.44291px), calc(50% - -6.46888px) calc(100% - 19.29464px), calc(50% - -3.45206px) calc(100% - 19.82033px), calc(50% - -0.32999999999998px) calc(100% - 20px), calc(50% - -0.32999999999998px) calc(100% - 20px), calc(50% - 2.79179px) calc(100% - 19.82033px), calc(50% - 5.8079199999999px) calc(100% - 19.29464px), calc(50% - 8.69853px) calc(100% - 18.44291px), calc(50% - 11.44376px) calc(100% - 17.28512px), calc(50% - 14.02375px) calc(100% - 15.84125px), calc(50% - 16.41864px) calc(100% - 14.13128px), calc(50% - 18.60857px) calc(100% - 12.17519px), calc(50% - 20.57368px) calc(100% - 9.9929599999999px), calc(50% - 22.29411px) calc(100% - 7.60457px), calc(50% - 23.75px) calc(100% - 5.03px), calc(50% - 23.75px) calc(100% - 5.03px), calc(50% - 24.25769px) calc(100% - 4.1358599999999px), calc(50% - 24.85712px) calc(100% - 3.3164799999998px), calc(50% - 25.53983px) calc(100% - 2.57642px), calc(50% - 26.29736px) calc(100% - 1.92024px), calc(50% - 27.12125px) calc(100% - 1.3525px), calc(50% - 28.00304px) calc(100% - 0.87775999999997px), calc(50% - 28.93427px) calc(100% - 0.50057999999996px), calc(50% - 29.90648px) calc(100% - 0.22552000000002px), calc(50% - 30.91121px) calc(100% - 0.057140000000004px), calc(50% - 31.94px) calc(100% - 0px), 26.5px calc(100% - 0px), 26.5px calc(100% - 0px), 22.20048px calc(100% - 0.34671999999989px), 18.12224px calc(100% - 1.3505599999999px), 14.31976px calc(100% - 2.95704px), 10.84752px calc(100% - 5.1116799999999px), 7.76px calc(100% - 7.76px), 5.11168px calc(100% - 10.84752px), 2.95704px calc(100% - 14.31976px), 1.35056px calc(100% - 18.12224px), 0.34672px calc(100% - 22.20048px), 4.3855735949631E-31px calc(100% - 26.5px), 0px 26.5px, 0px 26.5px, 0.34672px 22.20048px, 1.35056px 18.12224px, 2.95704px 14.31976px, 5.11168px 10.84752px, 7.76px 7.76px, 10.84752px 5.11168px, 14.31976px 2.95704px, 18.12224px 1.35056px, 22.20048px 0.34672px, 26.5px 4.3855735949631E-31px, calc(50% - 26.74px) 0px, calc(50% - 26.74px) 0px, calc(50% - 25.31263px) 0.07137px, calc(50% - 23.91544px) 0.28176px, calc(50% - 22.55581px) 0.62559px, calc(50% - 21.24112px) 1.09728px, calc(50% - 19.97875px) 1.69125px, calc(50% - 18.77608px) 2.40192px, calc(50% - 17.64049px) 3.22371px, calc(50% - 16.57936px) 4.15104px, calc(50% - 15.60007px) 5.17833px, calc(50% - 14.71px) 6.3px, calc(50% - 14.71px) 6.3px, calc(50% - 13.6371px) 7.64798px, calc(50% - 12.446px) 8.89024px, calc(50% - 11.1451px) 10.01826px, calc(50% - 9.7428px) 11.02352px, calc(50% - 8.2475px) 11.8975px, calc(50% - 6.6676px) 12.63168px, calc(50% - 5.0115px) 13.21754px, calc(50% - 3.2876px) 13.64656px, calc(50% - 1.5043px) 13.91022px, calc(50% - -0.32999999999996px) 14px, calc(50% - -0.32999999999998px) 14px, calc(50% - -2.16431px) 13.9105px, calc(50% - -3.94768px) 13.6476px, calc(50% - -5.67177px) 13.2197px, calc(50% - -7.32824px) 12.6352px, calc(50% - -8.90875px) 11.9025px, calc(50% - -10.40496px) 11.03px, calc(50% - -11.80853px) 10.0261px, calc(50% - -13.11112px) 8.8992px, calc(50% - -14.30439px) 7.6577px, calc(50% - -15.38px) 6.31px, calc(50% - -15.38px) 6.31px, calc(50% - -16.27279px) 5.18562px, calc(50% - -17.25432px) 4.15616px, calc(50% - -18.31733px) 3.22714px, calc(50% - -19.45456px) 2.40408px, calc(50% - -20.65875px) 1.6925px, calc(50% - -21.92264px) 1.09792px, calc(50% - -23.23897px) 0.62586px, calc(50% - -24.60048px) 0.28184px, calc(50% - -25.99991px) 0.07138px, calc(50% - -27.43px) 8.9116630386686E-32px, calc(100% - 26.5px) 0px, calc(100% - 26.5px) 0px, calc(100% - 22.20048px) 0.34672px, calc(100% - 18.12224px) 1.35056px, calc(100% - 14.31976px) 2.95704px, calc(100% - 10.84752px) 5.11168px, calc(100% - 7.76px) 7.76px, calc(100% - 5.11168px) 10.84752px, calc(100% - 2.9570399999999px) 14.31976px, calc(100% - 1.35056px) 18.12224px, calc(100% - 0.34671999999995px) 22.20048px, calc(100% - 5.6843418860808E-14px) 26.5px);
      }

      .close-button {
        background: ${e.color||"#6B46C1"};
      }
    </style>
    <div class="popup-wrapper">
      <button class="close-button" aria-label="${n.aria.closePopup}"></button>
      <div class="popup-side">
        <div class="image-container">
          <img src="${e.image}" alt="${e.name}" class="full-image">
          <div class="button-container">
            <button class="back-button">${n.buttons.back}</button>
          </div>
          <div class="location-name">${e.name}</div>
        </div>
      </div>
    </div>
  `;r.setLngLat(t).setHTML(l).addTo(window.map),E(r);let c=r.getElement(),p=c.querySelector(".mapboxgl-popup-content"),u=c.querySelector(".close-button"),b=c.querySelector(".back-button");p.style.opacity="0",p.style.transform="rotate(8deg) translateY(40px) scale(0.4)",requestAnimationFrame(()=>{p.style.transition="all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1)",p.style.opacity="1",p.style.transform="rotate(0deg) translateY(0) scale(1)"});let s=c.querySelector("svg");if(s){let f=s.querySelector("linearGradient");if(f){let v=function(M,L,S){let I=parseFloat(S.y1.baseVal.value),x=parseFloat(S.y2.baseVal.value),T=Date.now();function P(){let J=Math.min((Date.now()-T)/800,1);S.y1.baseVal.value=I+(M-I)*J,S.y2.baseVal.value=x+(L-x)*J,J<1&&requestAnimationFrame(P)}requestAnimationFrame(P)};var d=v;let h=c.querySelector(".popup-wrapper");h.addEventListener("mouseenter",()=>{v(30,282,f)}),h.addEventListener("mouseleave",()=>{v(0,252,f)})}}u.addEventListener("click",()=>{p.style.transition="all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55)",p.style.transform="rotate(-5deg) translateY(40px) scale(0.6)",p.style.opacity="0",setTimeout(()=>{r.remove(),E(null)},400)}),b.addEventListener("click",()=>{p.style.transition="all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55)",p.style.transform="rotate(-5deg) translateY(40px) scale(0.6)",p.style.opacity="0",setTimeout(async()=>{r.remove(),E(null);let f=new window.mapboxgl.Popup({offset:{bottom:[0,-5],top:[0,0],left:[0,0],right:[0,0]},className:"custom-popup",closeButton:!1,maxWidth:"300px",closeOnClick:!1,anchor:"bottom"}),{createPopupContent:h}=await Promise.resolve().then(()=>(Y(),De)),{styles:v,html:M}=h(e);f.setLngLat(t).setHTML(`${v}${M}`),f.addTo(window.map),E(f),_e(f,e,t);let L=f.getElement().querySelector(".mapboxgl-popup-content");L.style.opacity="0",L.style.transform="rotate(8deg) translateY(40px) scale(0.4)",requestAnimationFrame(()=>{L.style.transition="all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1)",L.style.opacity="1",L.style.transform="rotate(0deg) translateY(0) scale(1)"})},400)})}function O(){window.$(".locations-map_item").removeClass("is--show")}function le(){window.$(".locations-map_item").hasClass("is--show")&&O()}var mt,pe=N(()=>{"use strict";A();mt={nl:{buttons:{back:"Terug"},aria:{closePopup:"Sluit popup"}},en:{buttons:{back:"Back"},aria:{closePopup:"Close popup"}},de:{buttons:{back:"Zur\xFCck"},aria:{closePopup:"Popup schlie\xDFen"}}}});var De={};ke(De,{closeActivePopup:()=>W,closeItem:()=>O,closeItemIfVisible:()=>le,createARButton:()=>de,createPopup:()=>ge,createPopupContent:()=>Be,getARLinkForDevice:()=>Ne,handleSnapchatLink:()=>he,showImagePopup:()=>B});function ue(){let e=window.location.pathname;return e.includes("/en/")?"en":e.includes("/de/")?"de":"nl"}async function ge(e,t){let a=e.geometry.coordinates.slice(),{properties:o}=e,n=o.type==="ar",i=window.matchMedia("(max-width: 479px)").matches?[0,200]:[0,250];t.flyTo({center:a,offset:i,duration:800,essential:!0});let r=window.$(".locations-map_item.is--show");if(r.length&&r.css({opacity:"0",transform:"translateY(40px) scale(0.6)"}),m.activePopup){let b=m.activePopup.getElement().querySelector(".mapboxgl-popup-content");b&&(b.style.transition="all 400ms cubic-bezier(0.68, -0.55, 0.265, 1.55)",b.style.transform="rotate(-5deg) translateY(20px) scale(0.8)",b.style.opacity="0")}if(await new Promise(b=>setTimeout(b,400)),m.activePopup&&(m.activePopup.remove(),E(null)),n)window.$(".locations-map_wrapper").removeClass("is--show"),window.$(".locations-map_item").removeClass("is--show");else{window.$(".locations-map_item").removeClass("is--show").css({display:"none",transform:"translateY(40px) scale(0.6)",opacity:"0"}),window.$(".locations-map_wrapper").addClass("is--show");let b=window.$(".locations-map_item").eq(o.arrayID);b.css({display:"block",opacity:"0",transform:"translateY(40px) scale(0.6)"}),b[0].offsetHeight,requestAnimationFrame(()=>{b.css({transition:"all 400ms cubic-bezier(0.68, -0.55, 0.265, 1.55)",opacity:"1",transform:"translateY(0) scale(1)"}).addClass("is--show")})}let l=new window.mapboxgl.Popup({offset:{bottom:[0,-5],top:[0,0],left:[0,0],right:[0,0]},className:"custom-popup",closeButton:!1,maxWidth:"300px",closeOnClick:!1,anchor:"bottom"});window.geolocationManager&&(window.geolocationManager.isPopupOpen=!0,window.geolocationManager.geolocateControl&&(window.geolocationManager.wasTracking=window.geolocationManager.geolocateControl._watchState==="ACTIVE_LOCK",window.geolocationManager.pauseTracking()));let{styles:c,html:p}=Be(o);l.setLngLat(a).setHTML(`${c}${p}`).addTo(t),E(l),l.on("close",()=>{window.geolocationManager&&(window.geolocationManager.isPopupOpen=!1,window.geolocationManager.wasTracking&&window.geolocationManager.resumeTracking())});let{setupPopupInteractions:u}=await Promise.resolve().then(()=>(pe(),Ze));return u(l,o,a),l}function W(){m.activePopup&&(m.activePopup.remove(),E(null))}function Ne(e){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<=768?{link:e.link_ar_mobile,available:!!e.link_ar_mobile,deviceType:"mobile"}:{link:e.link_ar_desktop,available:!!e.link_ar_desktop,deviceType:"desktop"}}function de(e,t="impressie-button button-base",a){let o=ue(),n=me[o],i=Ne(e),r=a||n.buttons.startAR;return i.available?i.deviceType==="mobile"&&i.link.startsWith("snapchat://")?`<button class="${t}" onclick="handleSnapchatLink('${i.link}')">${r}</button>`:`<button class="${t}" onclick="window.open('${i.link}', '_blank')">${r}</button>`:i.deviceType==="desktop"?`<button class="${t} disabled" disabled title="${n.messages.arMobileOnly}">
                ${r} <span class="mobile-only">\u{1F4F1}</span>
              </button>`:""}function he(e){let t=ue(),a=me[t],o="https://apps.apple.com/app/snapchat/id447188370",n="https://play.google.com/store/apps/details?id=com.snapchat.android",i=/Android/i.test(navigator.userAgent),r=/iPhone|iPad|iPod/i.test(navigator.userAgent),l=i?n:o,c=Date.now(),p=1e3;window.location.href=e,setTimeout(function(){Date.now()-c<p+100&&confirm(a.messages.snapchatRequired)&&(window.location.href=l)},p)}function $(e,t=1){let a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);if(a){let o=parseInt(a[1],16),n=parseInt(a[2],16),i=parseInt(a[3],16);return`rgba(${o}, ${n}, ${i}, ${t})`}return"rgba(0, 0, 0, 0)"}function Be(e){let t=e.type==="ar",a=ue(),o=me[a],n=`
    <style>
      .popup-side {
        background-color: ${e.color||"#6B46C1"};
        clip-path: polygon(calc(100% - 0px) 26.5px, calc(100% - 0px) calc(100% - 26.5px), calc(100% - 0px) calc(100% - 26.5px), calc(100% - 0.34671999999995px) calc(100% - 22.20048px), calc(100% - 1.3505599999999px) calc(100% - 18.12224px), calc(100% - 2.95704px) calc(100% - 14.31976px), calc(100% - 5.11168px) calc(100% - 10.84752px), calc(100% - 7.76px) calc(100% - 7.76px), calc(100% - 10.84752px) calc(100% - 5.11168px), calc(100% - 14.31976px) calc(100% - 2.9570399999999px), calc(100% - 18.12224px) calc(100% - 1.35056px), calc(100% - 22.20048px) calc(100% - 0.34672px), calc(100% - 26.5px) calc(100% - 0px), calc(50% - -32.6px) calc(100% - 0px), calc(50% - -32.6px) calc(100% - 0px), calc(50% - -31.57121px) calc(100% - 0.057139999999947px), calc(50% - -30.56648px) calc(100% - 0.2255199999999px), calc(50% - -29.59427px) calc(100% - 0.50057999999996px), calc(50% - -28.66304px) calc(100% - 0.87775999999991px), calc(50% - -27.78125px) calc(100% - 1.3525px), calc(50% - -26.95736px) calc(100% - 1.92024px), calc(50% - -26.19983px) calc(100% - 2.57642px), calc(50% - -25.51712px) calc(100% - 3.31648px), calc(50% - -24.91769px) calc(100% - 4.13586px), calc(50% - -24.41px) calc(100% - 5.03px), calc(50% - -24.41px) calc(100% - 5.03px), calc(50% - -22.95654px) calc(100% - 7.6045699999999px), calc(50% - -21.23752px) calc(100% - 9.9929599999998px), calc(50% - -19.27298px) calc(100% - 12.17519px), calc(50% - -17.08296px) calc(100% - 14.13128px), calc(50% - -14.6875px) calc(100% - 15.84125px), calc(50% - -12.10664px) calc(100% - 17.28512px), calc(50% - -9.36042px) calc(100% - 18.44291px), calc(50% - -6.46888px) calc(100% - 19.29464px), calc(50% - -3.45206px) calc(100% - 19.82033px), calc(50% - -0.32999999999998px) calc(100% - 20px), calc(50% - -0.32999999999998px) calc(100% - 20px), calc(50% - 2.79179px) calc(100% - 19.82033px), calc(50% - 5.8079199999999px) calc(100% - 19.29464px), calc(50% - 8.69853px) calc(100% - 18.44291px), calc(50% - 11.44376px) calc(100% - 17.28512px), calc(50% - 14.02375px) calc(100% - 15.84125px), calc(50% - 16.41864px) calc(100% - 14.13128px), calc(50% - 18.60857px) calc(100% - 12.17519px), calc(50% - 20.57368px) calc(100% - 9.9929599999999px), calc(50% - 22.29411px) calc(100% - 7.60457px), calc(50% - 23.75px) calc(100% - 5.03px), calc(50% - 23.75px) calc(100% - 5.03px), calc(50% - 24.25769px) calc(100% - 4.1358599999999px), calc(50% - 24.85712px) calc(100% - 3.3164799999998px), calc(50% - 25.53983px) calc(100% - 2.57642px), calc(50% - 26.29736px) calc(100% - 1.92024px), calc(50% - 27.12125px) calc(100% - 1.3525px), calc(50% - 28.00304px) calc(100% - 0.87775999999997px), calc(50% - 28.93427px) calc(100% - 0.50057999999996px), calc(50% - 29.90648px) calc(100% - 0.22552000000002px), calc(50% - 30.91121px) calc(100% - 0.057140000000004px), calc(50% - 31.94px) calc(100% - 0px), 26.5px calc(100% - 0px), 26.5px calc(100% - 0px), 22.20048px calc(100% - 0.34671999999989px), 18.12224px calc(100% - 1.3505599999999px), 14.31976px calc(100% - 2.95704px), 10.84752px calc(100% - 5.1116799999999px), 7.76px calc(100% - 7.76px), 5.11168px calc(100% - 10.84752px), 2.95704px calc(100% - 14.31976px), 1.35056px calc(100% - 18.12224px), 0.34672px calc(100% - 22.20048px), 4.3855735949631E-31px calc(100% - 26.5px), 0px 26.5px, 0px 26.5px, 0.34672px 22.20048px, 1.35056px 18.12224px, 2.95704px 14.31976px, 5.11168px 10.84752px, 7.76px 7.76px, 10.84752px 5.11168px, 14.31976px 2.95704px, 18.12224px 1.35056px, 22.20048px 0.34672px, 26.5px 4.3855735949631E-31px, calc(50% - 26.74px) 0px, calc(50% - 26.74px) 0px, calc(50% - 25.31263px) 0.07137px, calc(50% - 23.91544px) 0.28176px, calc(50% - 22.55581px) 0.62559px, calc(50% - 21.24112px) 1.09728px, calc(50% - 19.97875px) 1.69125px, calc(50% - 18.77608px) 2.40192px, calc(50% - 17.64049px) 3.22371px, calc(50% - 16.57936px) 4.15104px, calc(50% - 15.60007px) 5.17833px, calc(50% - 14.71px) 6.3px, calc(50% - 14.71px) 6.3px, calc(50% - 13.6371px) 7.64798px, calc(50% - 12.446px) 8.89024px, calc(50% - 11.1451px) 10.01826px, calc(50% - 9.7428px) 11.02352px, calc(50% - 8.2475px) 11.8975px, calc(50% - 6.6676px) 12.63168px, calc(50% - 5.0115px) 13.21754px, calc(50% - 3.2876px) 13.64656px, calc(50% - 1.5043px) 13.91022px, calc(50% - -0.32999999999996px) 14px, calc(50% - -0.32999999999998px) 14px, calc(50% - -2.16431px) 13.9105px, calc(50% - -3.94768px) 13.6476px, calc(50% - -5.67177px) 13.2197px, calc(50% - -7.32824px) 12.6352px, calc(50% - -8.90875px) 11.9025px, calc(50% - -10.40496px) 11.03px, calc(50% - -11.80853px) 10.0261px, calc(50% - -13.11112px) 8.8992px, calc(50% - -14.30439px) 7.6577px, calc(50% - -15.38px) 6.31px, calc(50% - -15.38px) 6.31px, calc(50% - -16.27279px) 5.18562px, calc(50% - -17.25432px) 4.15616px, calc(50% - -18.31733px) 3.22714px, calc(50% - -19.45456px) 2.40408px, calc(50% - -20.65875px) 1.6925px, calc(50% - -21.92264px) 1.09792px, calc(50% - -23.23897px) 0.62586px, calc(50% - -24.60048px) 0.28184px, calc(50% - -25.99991px) 0.07138px, calc(50% - -27.43px) 8.9116630386686E-32px, calc(100% - 26.5px) 0px, calc(100% - 26.5px) 0px, calc(100% - 22.20048px) 0.34672px, calc(100% - 18.12224px) 1.35056px, calc(100% - 14.31976px) 2.95704px, calc(100% - 10.84752px) 5.11168px, calc(100% - 7.76px) 7.76px, calc(100% - 5.11168px) 10.84752px, calc(100% - 2.9570399999999px) 14.31976px, calc(100% - 1.35056px) 18.12224px, calc(100% - 0.34671999999995px) 22.20048px, calc(100% - 5.6843418860808E-14px) 26.5px);
      }
       
    
.fade-bottom {
  position: absolute;
  bottom: 6.5em;
  left: 20px;
  right: 20px;
  height: 3.5em;
  /* Gebruik dezelfde kleur als de popup maar met transparantie */
  background: linear-gradient(to top, ${e.color?$(e.color,1):"transparent"} 0%, transparent 100%);
  pointer-events: none;
  z-index: 2;
  transition: opacity 0.3s ease;
}

.popup-side.ar .fade-bottom {
  background: linear-gradient(to top, ${$(e.arkleur||"#fff200",1)} 0%, ${$(e.arkleur||"#fff200",0)} 100%);
}

/* CSS voor de top fade gradient */
.fade-top {
  position: absolute;
  bottom: 18em;
  left: 20px;
  right: 20px;
  height: 3.5em;
  /* Gespiegelde gradient vergeleken met de bottom fade */
  background: linear-gradient(to bottom, ${e.color?$(e.color,1):"transparent"} 0%, transparent 100%);
  pointer-events: none;
  z-index: 2;
  transition: opacity 0.3s ease;
}

      
  /* Add the mobile media query here */
  @media screen and (max-width: 767px) {
  .fade-top {
  bottom: 14em !important;
   }
 }

/* Voor AR-popups een aparte styling */
.popup-side.ar .fade-top {
  background: linear-gradient(to bottom, ${$(e.arkleur||"#fff200",1)} 0%, ${$(e.arkleur||"#fff200",0)} 100%);
}

    .close-button {
      background: ${e.color||"#6B46C1"};
    }
    
    /* Stijlen voor AR popup - met zwarte tekst */
    .popup-side.ar {
      background-color: ${e.arkleur||"#fff200"};
      color: #000000;
    }
    
    .close-button.ar {
      background: ${e.arkleur||"#fff200"};
    }
    
    /* Kleur aanpassingen voor AR elementen */
    .popup-side.ar .popup-title {
      color: #000000;
    }
    
    .popup-side.ar .popup-description {
      color: #000000;
    }
    
    /* Knoppen in AR popup */
    .popup-side.ar .button-base {
      color: #000000;
      border-color: #000000;
    }
    
    /* Styling voor achterkant van de popup */
    .popup-side.ar.popup-back {
      color: #000000;
      background-color: ${e.arkleur||"#fff200"};
    }
    
    /* Zwarte tekst in AR popup details */
    .popup-side.ar .popup-title.details {
      color: #000000;
    }
    
    /* Maak ook de 'X' in de sluitknop zwart */
    .close-button.ar::before,
    .close-button.ar::after {
      background-color: #000000;
    }
    
    ${t?`
      .ar-button {
        border: 2px solid black;
        font-weight: bold;
        color: #000000;
      }
      .ar-description {
        font-size: 0.9em;
        margin-top: 10px;
        color: #000000;
      }
    `:""}
  </style>
  `;return t?{styles:n,html:`
      <div class="popup-wrapper">
        <button class="close-button ar" aria-label="${o.aria.closePopup}"></button>
        <div class="popup-side ar popup-front">
          <svg class="popup-border-overlay" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M0 227.13V240.82C0 246.99 5 252 11.18 252H19.2C25.38 252 30.38 246.99 30.38 240.82C30.38 246.99 35.4 252 41.56 252H49.6C55.75 252 60.75 247.01 60.76 240.85C60.79 247.01 65.79 252 71.94 252H79.98C86.15 252 91.16 246.99 91.16 240.82C91.16 246.99 96.16 252 102.34 252H110.36C116.53 252 121.53 247.01 121.54 240.84C121.55 247.01 126.55 252 132.72 252H140.74C146.35 252 150.99 247.87 151.79 242.48C152.6 247.87 157.24 252 162.85 252H170.87C177.04 252 182.04 247 182.05 240.84C182.06 247 187.06 252 193.23 252H201.25C207.03 252 211.78 247.62 212.36 242C212.95 247.62 217.7 252 223.48 252H231.5C237.68 252 242.68 246.99 242.68 240.82C242.68 246.99 247.69 252 253.86 252H261.89C268.05 252 273.05 247.01 273.06 240.85C273.08 247.01 278.08 252 284.24 252H292.27C298.44 252 303.45 246.99 303.45 240.82C303.45 246.99 308.46 252 314.63 252H322.66C328.82 252 333.82 247.01 333.83 240.84C333.85 247.01 338.85 252 345.01 252H353.04C359.21 252 364.22 246.99 364.22 240.82V227.13C364.22 220.95 359.21 215.95 353.04 215.95C359.21 215.95 364.22 210.94 364.22 204.77V191.07C364.22 184.9 359.21 179.89 353.04 179.89C359.21 179.89 364.22 174.89 364.22 168.71V155.02C364.22 149.52 360.25 144.96 355.02 144.03C360.25 143.09 364.22 138.53 364.22 133.03V119.34C364.22 113.17 359.22 108.17 353.06 108.16C359.22 108.16 364.22 103.15 364.22 96.98V83.29C364.22 77.11 359.21 72.11 353.04 72.11C359.21 72.11 364.22 67.1 364.22 60.93V47.23C364.22 41.06 359.21 36.05 353.04 36.05C359.21 36.05 364.22 31.05 364.22 24.87V11.18C364.22 5.01 359.21 0 353.04 0H345.01C338.85 0 333.85 4.99 333.83 11.16C333.82 4.99 328.82 0 322.66 0H314.63C308.46 0 303.45 5.01 303.45 11.18C303.45 5.01 298.44 0 292.27 0H284.24C278.08 0 273.08 4.99 273.06 11.16C273.05 4.99 268.05 0 261.89 0H253.86C247.69 0 242.68 5.01 242.68 11.18C242.68 5.01 237.68 0 231.5 0H223.48C217.7 0 212.95 4.38 212.36 10C211.78 4.38 207.03 0 201.25 0H193.23C187.06 0 182.06 5 182.05 11.16C182.04 5 177.04 0 170.87 0H162.85C157.24 0 152.6 4.13 151.79 9.52C150.99 4.13 146.35 0 140.74 0H132.72C126.55 0 121.55 4.99 121.54 11.16C121.53 4.99 116.53 0 110.36 0H102.34C96.16 0 91.16 5.01 91.16 11.18C91.16 5.01 86.15 0 79.98 0H71.94C65.79 0 60.79 4.99 60.76 11.16C60.75 4.99 55.75 0 49.6 0H41.56C35.4 0 30.38 5.01 30.38 11.18C30.38 5.01 25.38 0 19.2 0H11.18C5 0 0 5.01 0 11.18V24.87C0 31.05 5 36.05 11.18 36.05C5 36.05 0 41.06 0 47.23V60.93C0 67.1 5 72.11 11.18 72.11C5 72.11 0 77.11 0 83.29V96.98C0 103.15 4.99 108.15 11.16 108.16C4.99 108.17 0 113.17 0 119.34V133.03C0 138.53 3.97 143.09 9.19 144.03C3.97 144.96 0 149.52 0 155.02V168.71C0 174.89 5 179.89 11.18 179.89C5 179.89 0 184.9 0 191.07V204.77C0 210.94 5 215.95 11.18 215.95C5 215.95 0 220.95 0 227.13ZM333.83 24.89C333.85 31.06 338.85 36.05 345.01 36.05C338.85 36.05 333.85 41.05 333.83 47.21C333.82 41.05 328.82 36.05 322.66 36.05C328.82 36.05 333.82 31.06 333.83 24.89ZM333.83 60.95C333.85 67.11 338.85 72.11 345.01 72.11C338.85 72.11 333.85 77.1 333.83 83.27C333.82 77.1 328.82 72.11 322.66 72.11C328.82 72.11 333.82 67.11 333.83 60.95ZM333.83 119.32C333.82 113.16 328.83 108.17 322.68 108.16C328.83 108.16 333.82 103.16 333.83 97C333.85 103.16 338.83 108.15 344.99 108.16C338.83 108.17 333.85 113.16 333.83 119.32ZM343.03 144.03C337.81 144.96 333.84 149.51 333.83 155C333.82 149.51 329.86 144.96 324.64 144.03C329.86 143.09 333.82 138.54 333.83 133.05C333.83 138.54 337.81 143.09 343.03 144.03ZM333.83 168.73C333.85 174.9 338.85 179.89 345.01 179.89C338.85 179.89 333.85 184.89 333.83 191.05C333.82 184.89 328.82 179.89 322.66 179.89C328.82 179.89 333.82 174.9 333.83 168.73ZM333.83 204.79C333.85 210.95 338.85 215.95 345.01 215.95C338.85 215.95 333.85 220.94 333.83 227.11C333.82 220.94 328.82 215.95 322.66 215.95C328.82 215.95 333.82 210.95 333.83 204.79ZM303.45 24.87C303.45 31.05 308.46 36.05 314.63 36.05C308.46 36.05 303.45 41.06 303.45 47.23C303.45 41.06 298.44 36.05 292.27 36.05C298.44 36.05 303.45 31.05 303.45 24.87ZM303.45 60.93C303.45 67.1 308.46 72.11 314.63 72.11C308.46 72.11 303.45 77.11 303.45 83.29C303.45 77.11 298.44 72.11 292.27 72.11C298.44 72.11 303.45 67.1 303.45 60.93ZM303.45 119.34C303.45 113.17 298.45 108.17 292.29 108.16C298.45 108.16 303.45 103.15 303.45 96.98C303.45 103.15 308.45 108.15 314.61 108.16C308.45 108.17 303.45 113.17 303.45 119.34ZM312.64 144.03C307.42 144.96 303.45 149.52 303.45 155.02C303.45 149.52 299.48 144.96 294.25 144.03C299.48 143.09 303.45 138.53 303.45 133.03C303.45 138.53 307.42 143.09 312.64 144.03ZM303.45 168.71C303.45 174.89 308.46 179.89 314.63 179.89C308.46 179.89 303.45 184.9 303.45 191.07C303.45 184.9 298.44 179.89 292.27 179.89C298.44 179.89 303.45 174.89 303.45 168.71ZM303.45 204.77C303.45 210.94 308.46 215.95 314.63 215.95C308.46 215.95 303.45 220.95 303.45 227.13C303.45 220.95 298.44 215.95 292.27 215.95C298.44 215.95 303.45 210.94 303.45 204.77ZM273.06 24.9C273.08 31.06 278.08 36.05 284.24 36.05C278.08 36.05 273.08 41.05 273.06 47.21C273.05 41.05 268.05 36.05 261.89 36.05C268.05 36.05 273.05 31.06 273.06 24.9ZM273.06 60.95C273.08 67.11 278.08 72.11 284.24 72.11C278.08 72.11 273.08 77.1 273.06 83.26C273.05 77.1 268.05 72.11 261.89 72.11C268.05 72.11 273.05 67.11 273.06 60.95ZM273.06 119.31C273.05 113.16 268.06 108.17 261.91 108.16C268.06 108.16 273.05 103.16 273.06 97.01C273.08 103.16 278.07 108.15 284.22 108.16C278.07 108.17 273.08 113.16 273.06 119.31ZM282.26 144.03C277.04 144.96 273.08 149.51 273.06 154.99C273.05 149.51 269.09 144.96 263.87 144.03C269.09 143.09 273.05 138.54 273.06 133.06C273.08 138.54 277.04 143.09 282.26 144.03ZM273.06 168.74C273.08 174.9 278.08 179.89 284.24 179.89C278.08 179.89 273.08 184.89 273.06 191.05C273.05 184.89 268.05 179.89 261.89 179.89C268.05 179.89 273.05 174.9 273.06 168.74ZM273.06 204.79C273.08 210.95 278.08 215.95 284.24 215.95C278.08 215.95 273.08 220.94 273.06 227.1C273.05 220.94 268.05 215.95 261.89 215.95C268.05 215.95 273.05 210.95 273.06 204.79ZM242.68 24.87C242.68 31.05 247.69 36.05 253.86 36.05C247.69 36.05 242.68 41.06 242.68 47.23C242.68 41.06 237.68 36.05 231.5 36.05C237.68 36.05 242.68 31.05 242.68 24.87ZM242.68 60.93C242.68 67.1 247.69 72.11 253.86 72.11C247.69 72.11 242.68 77.11 242.68 83.29C242.68 77.11 237.68 72.11 231.5 72.11C237.68 72.11 242.68 67.1 242.68 60.93ZM242.68 119.34C242.68 113.17 237.69 108.17 231.52 108.16C237.69 108.16 242.68 103.15 242.68 96.98C242.68 103.15 247.68 108.15 253.84 108.16C247.68 108.17 242.68 113.17 242.68 119.34ZM251.87 144.03C246.65 144.96 242.68 149.52 242.68 155.02C242.68 149.52 238.71 144.96 233.49 144.03C238.71 143.09 242.68 138.53 242.68 133.03C242.68 138.53 246.65 143.09 251.87 144.03ZM242.68 168.71C242.68 174.89 247.69 179.89 253.86 179.89C247.69 179.89 242.68 184.9 242.68 191.07C242.68 184.9 237.68 179.89 231.5 179.89C237.68 179.89 242.68 174.89 242.68 168.71ZM242.68 204.77C242.68 210.94 247.69 215.95 253.86 215.95C247.69 215.95 242.68 220.95 242.68 227.13C242.68 220.95 237.68 215.95 231.5 215.95C237.68 215.95 242.68 210.94 242.68 204.77ZM212.36 26.05C212.95 31.68 217.7 36.05 223.48 36.05C217.7 36.05 212.95 40.43 212.36 46.05C211.78 40.43 207.03 36.05 201.25 36.05C207.03 36.05 211.78 31.68 212.36 26.05ZM212.36 62.11C212.95 67.73 217.7 72.11 223.48 72.11C217.7 72.11 212.95 76.48 212.36 82.11C211.78 76.48 207.03 72.11 201.25 72.11C207.03 72.11 211.78 67.73 212.36 62.11ZM212.36 118.16C211.78 112.54 207.04 108.17 201.28 108.16C207.04 108.16 211.78 103.78 212.36 98.16C212.95 103.78 217.69 108.15 223.46 108.16C217.69 108.17 212.95 112.54 212.36 118.16ZM221.49 144.03C216.64 144.89 212.88 148.88 212.36 153.85C211.86 148.88 208.1 144.89 203.24 144.03C208.1 143.16 211.86 139.17 212.36 134.2C212.88 139.17 216.64 143.16 221.49 144.03ZM212.36 169.89C212.95 175.52 217.7 179.89 223.48 179.89C217.7 179.89 212.95 184.27 212.36 189.89C211.78 184.27 207.03 179.89 201.25 179.89C207.03 179.89 211.78 175.52 212.36 169.89ZM212.36 205.95C212.95 211.57 217.7 215.95 223.48 215.95C217.7 215.95 212.95 220.32 212.36 225.95C211.78 220.32 207.03 215.95 201.25 215.95C207.03 215.95 211.78 211.57 212.36 205.95ZM182.05 24.89C182.06 31.06 187.06 36.05 193.23 36.05C187.06 36.05 182.06 41.05 182.05 47.22C182.04 41.05 177.04 36.05 170.87 36.05C177.04 36.05 182.04 31.06 182.05 24.89ZM182.05 60.95C182.06 67.11 187.06 72.11 193.23 72.11C187.06 72.11 182.06 77.1 182.05 83.27C182.04 77.1 177.04 72.11 170.87 72.11C177.04 72.11 182.04 67.11 182.05 60.95ZM182.05 119.32C182.04 113.16 177.05 108.17 170.9 108.16C177.05 108.16 182.04 103.16 182.05 97C182.06 103.16 187.05 108.15 193.22 108.16C187.05 108.17 182.06 113.16 182.05 119.32ZM191.24 144.03C186.03 144.96 182.06 149.51 182.05 155C182.04 149.51 178.09 144.96 172.86 144.03C178.09 143.09 182.04 138.54 182.05 133.05C182.06 138.54 186.03 143.09 191.24 144.03ZM182.05 168.73C182.06 174.9 187.06 179.89 193.23 179.89C187.06 179.89 182.06 184.89 182.05 191.05C182.04 184.89 177.04 179.89 170.87 179.89C177.04 179.89 182.04 174.9 182.05 168.73ZM182.05 204.79C182.06 210.95 187.06 215.95 193.23 215.95C187.06 215.95 182.06 220.94 182.05 227.11C182.04 220.94 177.04 215.95 170.87 215.95C177.04 215.95 182.04 210.95 182.05 204.79ZM151.79 26.53C152.6 31.92 157.24 36.05 162.85 36.05C157.24 36.05 152.6 40.18 151.79 45.57C150.99 40.18 146.35 36.05 140.74 36.05C146.35 36.05 150.99 31.92 151.79 26.53ZM151.79 62.59C152.6 67.98 157.24 72.11 162.85 72.11C157.24 72.11 152.6 76.24 151.79 81.63C150.99 76.24 146.35 72.11 140.74 72.11C146.35 72.11 150.99 67.98 151.79 62.59ZM151.79 117.68C151 112.3 146.36 108.17 140.76 108.16C146.36 108.16 151 104.02 151.79 98.64C152.6 104.02 157.23 108.15 162.84 108.16C157.23 108.17 152.6 112.3 151.79 117.68ZM160.86 144.03C156.18 144.86 152.5 148.62 151.79 153.35C151.1 148.62 147.41 144.86 142.73 144.03C147.41 143.19 151.1 139.43 151.79 134.7C152.5 139.43 156.18 143.19 160.86 144.03ZM151.79 170.37C152.6 175.76 157.24 179.89 162.85 179.89C157.24 179.89 152.6 184.02 151.79 189.41C150.99 184.02 146.35 179.89 140.74 179.89C146.35 179.89 150.99 175.76 151.79 170.37ZM151.79 206.43C152.6 211.82 157.24 215.95 162.85 215.95C157.24 215.95 152.6 220.08 151.79 225.47C150.99 220.08 146.35 215.95 140.74 215.95C146.35 215.95 150.99 211.82 151.79 206.43ZM121.54 24.89C121.55 31.06 126.55 36.05 132.72 36.05C126.55 36.05 121.55 41.05 121.54 47.21C121.53 41.05 116.53 36.05 110.36 36.05C116.53 36.05 121.53 31.06 121.54 24.89ZM121.54 60.95C121.55 67.11 126.55 72.11 132.72 72.11C126.55 72.11 121.55 77.1 121.54 83.27C121.53 77.1 116.53 72.11 110.36 72.11C116.53 72.11 121.53 67.11 121.54 60.95ZM121.54 119.32C121.53 113.16 116.54 108.17 110.38 108.16C116.54 108.16 121.53 103.16 121.54 97C121.55 103.16 126.54 108.15 132.69 108.16C126.54 108.17 121.55 113.16 121.54 119.32ZM130.73 144.03C125.51 144.96 121.54 149.51 121.54 155C121.53 149.51 117.56 144.96 112.35 144.03C117.56 143.09 121.53 138.54 121.54 133.05C121.54 138.54 125.51 143.09 130.73 144.03ZM121.54 168.73C121.55 174.9 126.55 179.89 132.72 179.89C126.55 179.89 121.55 184.89 121.54 191.05C121.53 184.89 116.53 179.89 110.36 179.89C116.53 179.89 121.53 174.9 121.54 168.73ZM121.54 204.79C121.55 210.95 126.55 215.95 132.72 215.95C126.55 215.95 121.55 220.94 121.54 227.11C121.53 220.94 116.53 215.95 110.36 215.95C116.53 215.95 121.53 210.95 121.54 204.79ZM91.16 24.87C91.16 31.05 96.16 36.05 102.34 36.05C96.16 36.05 91.16 41.06 91.16 47.23C91.16 41.06 86.15 36.05 79.98 36.05C86.15 36.05 91.16 31.05 91.16 24.87ZM91.16 60.93C91.16 67.1 96.16 72.11 102.34 72.11C96.16 72.11 91.16 77.11 91.16 83.29C91.16 77.11 86.15 72.11 79.98 72.11C86.15 72.11 91.16 67.1 91.16 60.93ZM91.16 119.34C91.16 113.17 86.16 108.17 79.99 108.16C86.16 108.16 91.16 103.15 91.16 96.98C91.16 103.15 96.16 108.15 102.31 108.16C96.16 108.17 91.16 113.17 91.16 119.34ZM100.35 144.03C95.12 144.96 91.16 149.52 91.16 155.02C91.16 149.52 87.18 144.96 81.95 144.03C87.18 143.09 91.16 138.53 91.16 133.03C91.16 138.53 95.12 143.09 100.35 144.03ZM91.16 168.71C91.16 174.89 96.16 179.89 102.34 179.89C96.16 179.89 91.16 184.9 91.16 191.07C91.16 184.9 86.15 179.89 79.98 179.89C86.15 179.89 91.16 174.89 91.16 168.71ZM91.16 204.77C91.16 210.94 96.16 215.95 102.34 215.95C96.16 215.95 91.16 220.95 91.16 227.13C91.16 220.95 86.15 215.95 79.98 215.95C86.15 215.95 91.16 210.94 91.16 204.77ZM60.76 24.9C60.79 31.06 65.79 36.05 71.94 36.05C65.79 36.05 60.79 41.05 60.76 47.21C60.75 41.05 55.75 36.05 49.6 36.05C55.75 36.05 60.75 31.06 60.76 24.9ZM60.76 60.95C60.79 67.11 65.79 72.11 71.94 72.11C65.79 72.11 60.79 77.1 60.76 83.26C60.75 77.1 55.75 72.11 49.6 72.11C55.75 72.11 60.75 67.11 60.76 60.95ZM60.76 119.31C60.75 113.16 55.76 108.17 49.61 108.16C55.76 108.16 60.75 103.16 60.76 97.01C60.79 103.16 65.78 108.15 71.92 108.16C65.78 108.17 60.79 113.16 60.76 119.31ZM69.97 144.03C64.74 144.96 60.79 149.51 60.76 154.99C60.75 149.51 56.79 144.96 51.57 144.03C56.79 143.09 60.75 138.54 60.76 133.06C60.79 138.54 64.74 143.09 69.97 144.03ZM60.76 168.74C60.79 174.9 65.79 179.89 71.94 179.89C65.79 179.89 60.79 184.89 60.76 191.05C60.75 184.89 55.75 179.89 49.6 179.89C55.75 179.89 60.75 174.9 60.76 168.74ZM60.76 204.79C60.79 210.95 65.79 215.95 71.94 215.95C65.79 215.95 60.79 220.94 60.76 227.1C60.75 220.94 55.75 215.95 49.6 215.95C55.75 215.95 60.75 210.95 60.76 204.79ZM30.38 24.87C30.38 31.05 35.4 36.05 41.56 36.05C35.4 36.05 30.38 41.06 30.38 47.23C30.38 41.06 25.38 36.05 19.2 36.05C25.38 36.05 30.38 31.05 30.38 24.87ZM30.38 60.93C30.38 67.1 35.4 72.11 41.56 72.11C35.4 72.11 30.38 77.11 30.38 83.29C30.38 77.11 25.38 72.11 19.2 72.11C25.38 72.11 30.38 67.1 30.38 60.93ZM30.38 119.34C30.38 113.17 25.4 108.17 19.23 108.16C25.4 108.16 30.38 103.15 30.38 96.98C30.38 103.15 35.38 108.15 41.54 108.16C35.38 108.17 30.38 113.17 30.38 119.34ZM39.57 144.03C34.35 144.96 30.38 149.52 30.38 155.02C30.38 149.52 26.41 144.96 21.19 144.03C26.41 143.09 30.38 138.53 30.38 133.03C30.38 138.53 34.35 143.09 39.57 144.03ZM30.38 168.71C30.38 174.89 35.4 179.89 41.56 179.89C35.4 179.89 30.38 184.9 30.38 191.07C30.38 184.9 25.38 179.89 19.2 179.89C25.38 179.89 30.38 174.89 30.38 168.71ZM30.38 204.77C30.38 210.94 35.4 215.95 41.56 215.95C35.4 215.95 30.38 220.95 30.38 227.13C30.38 220.95 25.38 215.95 19.2 215.95C25.38 215.95 30.38 210.94 30.38 204.77Z" fill="url(#paint0_linear_3248_5)"/>
              <defs>
              <linearGradient id="paint0_linear_3248_5" x1="182.11" y1="0" x2="182.11" y2="252" gradientUnits="userSpaceOnUse">
                <stop offset="0" stop-color="${e.arkleur||"#fff200"}" stop-opacity="0" />
                <stop offset="0.3" stop-color="${e.arkleur||"#fff200"}" stop-opacity="1" />
                <stop offset="1" stop-color="${e.arkleur||"#fff200"}" stop-opacity="1" />
              </linearGradient>
            </defs>
          </svg>
          ${e.image?`<img src="${e.image}" class="popup-background-image" alt="">`:""}
          <div class="content-wrapper">
            <div class="popup-title">${e.name}</div>
                        <div class="fade-top"></div> 
            <div class="popup-description">${e.description}</div>
                      <div class="fade-bottom"></div>
${e.image?de(e):""}
            <button class="more-info-button button-base">${o.buttons.instruction}</button>
          </div>
        </div>
        
        <div class="popup-side ar popup-back">
          <div class="content-wrapper">
            <div class="popup-title details">${o.titles.instruction}</div>
            <div class="popup-ar-instructie">${e.instructie||o.messages.defaultARInstruction}</div>
            <button class="more-info-button button-base">${o.buttons.back}</button>
${de(e,"impressie-button button-base")}
          </div>
        </div>
      </div>
      `}:{styles:n,html:`
        <div class="popup-wrapper">
          <button class="close-button" aria-label="${o.aria.closePopup}"></button>
          <div class="popup-side popup-front">
            <svg class="popup-border-overlay" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M0 227.13V240.82C0 246.99 5 252 11.18 252H19.2C25.38 252 30.38 246.99 30.38 240.82C30.38 246.99 35.4 252 41.56 252H49.6C55.75 252 60.75 247.01 60.76 240.85C60.79 247.01 65.79 252 71.94 252H79.98C86.15 252 91.16 246.99 91.16 240.82C91.16 246.99 96.16 252 102.34 252H110.36C116.53 252 121.53 247.01 121.54 240.84C121.55 247.01 126.55 252 132.72 252H140.74C146.35 252 150.99 247.87 151.79 242.48C152.6 247.87 157.24 252 162.85 252H170.87C177.04 252 182.04 247 182.05 240.84C182.06 247 187.06 252 193.23 252H201.25C207.03 252 211.78 247.62 212.36 242C212.95 247.62 217.7 252 223.48 252H231.5C237.68 252 242.68 246.99 242.68 240.82C242.68 246.99 247.69 252 253.86 252H261.89C268.05 252 273.05 247.01 273.06 240.85C273.08 247.01 278.08 252 284.24 252H292.27C298.44 252 303.45 246.99 303.45 240.82C303.45 246.99 308.46 252 314.63 252H322.66C328.82 252 333.82 247.01 333.83 240.84C333.85 247.01 338.85 252 345.01 252H353.04C359.21 252 364.22 246.99 364.22 240.82V227.13C364.22 220.95 359.21 215.95 353.04 215.95C359.21 215.95 364.22 210.94 364.22 204.77V191.07C364.22 184.9 359.21 179.89 353.04 179.89C359.21 179.89 364.22 174.89 364.22 168.71V155.02C364.22 149.52 360.25 144.96 355.02 144.03C360.25 143.09 364.22 138.53 364.22 133.03V119.34C364.22 113.17 359.22 108.17 353.06 108.16C359.22 108.16 364.22 103.15 364.22 96.98V83.29C364.22 77.11 359.21 72.11 353.04 72.11C359.21 72.11 364.22 67.1 364.22 60.93V47.23C364.22 41.06 359.21 36.05 353.04 36.05C359.21 36.05 364.22 31.05 364.22 24.87V11.18C364.22 5.01 359.21 0 353.04 0H345.01C338.85 0 333.85 4.99 333.83 11.16C333.82 4.99 328.82 0 322.66 0H314.63C308.46 0 303.45 5.01 303.45 11.18C303.45 5.01 298.44 0 292.27 0H284.24C278.08 0 273.08 4.99 273.06 11.16C273.05 4.99 268.05 0 261.89 0H253.86C247.69 0 242.68 5.01 242.68 11.18C242.68 5.01 237.68 0 231.5 0H223.48C217.7 0 212.95 4.38 212.36 10C211.78 4.38 207.03 0 201.25 0H193.23C187.06 0 182.06 5 182.05 11.16C182.04 5 177.04 0 170.87 0H162.85C157.24 0 152.6 4.13 151.79 9.52C150.99 4.13 146.35 0 140.74 0H132.72C126.55 0 121.55 4.99 121.54 11.16C121.53 4.99 116.53 0 110.36 0H102.34C96.16 0 91.16 5.01 91.16 11.18C91.16 5.01 86.15 0 79.98 0H71.94C65.79 0 60.79 4.99 60.76 11.16C60.75 4.99 55.75 0 49.6 0H41.56C35.4 0 30.38 5.01 30.38 11.18C30.38 5.01 25.38 0 19.2 0H11.18C5 0 0 5.01 0 11.18V24.87C0 31.05 5 36.05 11.18 36.05C5 36.05 0 41.06 0 47.23V60.93C0 67.1 5 72.11 11.18 72.11C5 72.11 0 77.11 0 83.29V96.98C0 103.15 4.99 108.15 11.16 108.16C4.99 108.17 0 113.17 0 119.34V133.03C0 138.53 3.97 143.09 9.19 144.03C3.97 144.96 0 149.52 0 155.02V168.71C0 174.89 5 179.89 11.18 179.89C5 179.89 0 184.9 0 191.07V204.77C0 210.94 5 215.95 11.18 215.95C5 215.95 0 220.95 0 227.13ZM333.83 24.89C333.85 31.06 338.85 36.05 345.01 36.05C338.85 36.05 333.85 41.05 333.83 47.21C333.82 41.05 328.82 36.05 322.66 36.05C328.82 36.05 333.82 31.06 333.83 24.89ZM333.83 60.95C333.85 67.11 338.85 72.11 345.01 72.11C338.85 72.11 333.85 77.1 333.83 83.27C333.82 77.1 328.82 72.11 322.66 72.11C328.82 72.11 333.82 67.11 333.83 60.95ZM333.83 119.32C333.82 113.16 328.83 108.17 322.68 108.16C328.83 108.16 333.82 103.16 333.83 97C333.85 103.16 338.83 108.15 344.99 108.16C338.83 108.17 333.85 113.16 333.83 119.32ZM343.03 144.03C337.81 144.96 333.84 149.51 333.83 155C333.82 149.51 329.86 144.96 324.64 144.03C329.86 143.09 333.82 138.54 333.83 133.05C333.83 138.54 337.81 143.09 343.03 144.03ZM333.83 168.73C333.85 174.9 338.85 179.89 345.01 179.89C338.85 179.89 333.85 184.89 333.83 191.05C333.82 184.89 328.82 179.89 322.66 179.89C328.82 179.89 333.82 174.9 333.83 168.73ZM333.83 204.79C333.85 210.95 338.85 215.95 345.01 215.95C338.85 215.95 333.85 220.94 333.83 227.11C333.82 220.94 328.82 215.95 322.66 215.95C328.82 215.95 333.82 210.95 333.83 204.79ZM303.45 24.87C303.45 31.05 308.46 36.05 314.63 36.05C308.46 36.05 303.45 41.06 303.45 47.23C303.45 41.06 298.44 36.05 292.27 36.05C298.44 36.05 303.45 31.05 303.45 24.87ZM303.45 60.93C303.45 67.1 308.46 72.11 314.63 72.11C308.46 72.11 303.45 77.11 303.45 83.29C303.45 77.11 298.44 72.11 292.27 72.11C298.44 72.11 303.45 67.1 303.45 60.93ZM303.45 119.34C303.45 113.17 298.45 108.17 292.29 108.16C298.45 108.16 303.45 103.15 303.45 96.98C303.45 103.15 308.45 108.15 314.61 108.16C308.45 108.17 303.45 113.17 303.45 119.34ZM312.64 144.03C307.42 144.96 303.45 149.52 303.45 155.02C303.45 149.52 299.48 144.96 294.25 144.03C299.48 143.09 303.45 138.53 303.45 133.03C303.45 138.53 307.42 143.09 312.64 144.03ZM303.45 168.71C303.45 174.89 308.46 179.89 314.63 179.89C308.46 179.89 303.45 184.9 303.45 191.07C303.45 184.9 298.44 179.89 292.27 179.89C298.44 179.89 303.45 174.89 303.45 168.71ZM303.45 204.77C303.45 210.94 308.46 215.95 314.63 215.95C308.46 215.95 303.45 220.95 303.45 227.13C303.45 220.95 298.44 215.95 292.27 215.95C298.44 215.95 303.45 210.94 303.45 204.77ZM273.06 24.9C273.08 31.06 278.08 36.05 284.24 36.05C278.08 36.05 273.08 41.05 273.06 47.21C273.05 41.05 268.05 36.05 261.89 36.05C268.05 36.05 273.05 31.06 273.06 24.9ZM273.06 60.95C273.08 67.11 278.08 72.11 284.24 72.11C278.08 72.11 273.08 77.1 273.06 83.26C273.05 77.1 268.05 72.11 261.89 72.11C268.05 72.11 273.05 67.11 273.06 60.95ZM273.06 119.31C273.05 113.16 268.06 108.17 261.91 108.16C268.06 108.16 273.05 103.16 273.06 97.01C273.08 103.16 278.07 108.15 284.22 108.16C278.07 108.17 273.08 113.16 273.06 119.31ZM282.26 144.03C277.04 144.96 273.08 149.51 273.06 154.99C273.05 149.51 269.09 144.96 263.87 144.03C269.09 143.09 273.05 138.54 273.06 133.06C273.08 138.54 277.04 143.09 282.26 144.03ZM273.06 168.74C273.08 174.9 278.08 179.89 284.24 179.89C278.08 179.89 273.08 184.89 273.06 191.05C273.05 184.89 268.05 179.89 261.89 179.89C268.05 179.89 273.05 174.9 273.06 168.74ZM273.06 204.79C273.08 210.95 278.08 215.95 284.24 215.95C278.08 215.95 273.08 220.94 273.06 227.1C273.05 220.94 268.05 215.95 261.89 215.95C268.05 215.95 273.05 210.95 273.06 204.79ZM242.68 24.87C242.68 31.05 247.69 36.05 253.86 36.05C247.69 36.05 242.68 41.06 242.68 47.23C242.68 41.06 237.68 36.05 231.5 36.05C237.68 36.05 242.68 31.05 242.68 24.87ZM242.68 60.93C242.68 67.1 247.69 72.11 253.86 72.11C247.69 72.11 242.68 77.11 242.68 83.29C242.68 77.11 237.68 72.11 231.5 72.11C237.68 72.11 242.68 67.1 242.68 60.93ZM242.68 119.34C242.68 113.17 237.69 108.17 231.52 108.16C237.69 108.16 242.68 103.15 242.68 96.98C242.68 103.15 247.68 108.15 253.84 108.16C247.68 108.17 242.68 113.17 242.68 119.34ZM251.87 144.03C246.65 144.96 242.68 149.52 242.68 155.02C242.68 149.52 238.71 144.96 233.49 144.03C238.71 143.09 242.68 138.53 242.68 133.03C242.68 138.53 246.65 143.09 251.87 144.03ZM242.68 168.71C242.68 174.89 247.69 179.89 253.86 179.89C247.69 179.89 242.68 184.9 242.68 191.07C242.68 184.9 237.68 179.89 231.5 179.89C237.68 179.89 242.68 174.89 242.68 168.71ZM242.68 204.77C242.68 210.94 247.69 215.95 253.86 215.95C247.69 215.95 242.68 220.95 242.68 227.13C242.68 220.95 237.68 215.95 231.5 215.95C237.68 215.95 242.68 210.94 242.68 204.77ZM212.36 26.05C212.95 31.68 217.7 36.05 223.48 36.05C217.7 36.05 212.95 40.43 212.36 46.05C211.78 40.43 207.03 36.05 201.25 36.05C207.03 36.05 211.78 31.68 212.36 26.05ZM212.36 62.11C212.95 67.73 217.7 72.11 223.48 72.11C217.7 72.11 212.95 76.48 212.36 82.11C211.78 76.48 207.03 72.11 201.25 72.11C207.03 72.11 211.78 67.73 212.36 62.11ZM212.36 118.16C211.78 112.54 207.04 108.17 201.28 108.16C207.04 108.16 211.78 103.78 212.36 98.16C212.95 103.78 217.69 108.15 223.46 108.16C217.69 108.17 212.95 112.54 212.36 118.16ZM221.49 144.03C216.64 144.89 212.88 148.88 212.36 153.85C211.86 148.88 208.1 144.89 203.24 144.03C208.1 143.16 211.86 139.17 212.36 134.2C212.88 139.17 216.64 143.16 221.49 144.03ZM212.36 169.89C212.95 175.52 217.7 179.89 223.48 179.89C217.7 179.89 212.95 184.27 212.36 189.89C211.78 184.27 207.03 179.89 201.25 179.89C207.03 179.89 211.78 175.52 212.36 169.89ZM212.36 205.95C212.95 211.57 217.7 215.95 223.48 215.95C217.7 215.95 212.95 220.32 212.36 225.95C211.78 220.32 207.03 215.95 201.25 215.95C207.03 215.95 211.78 211.57 212.36 205.95ZM182.05 24.89C182.06 31.06 187.06 36.05 193.23 36.05C187.06 36.05 182.06 41.05 182.05 47.22C182.04 41.05 177.04 36.05 170.87 36.05C177.04 36.05 182.04 31.06 182.05 24.89ZM182.05 60.95C182.06 67.11 187.06 72.11 193.23 72.11C187.06 72.11 182.06 77.1 182.05 83.27C182.04 77.1 177.04 72.11 170.87 72.11C177.04 72.11 182.04 67.11 182.05 60.95ZM182.05 119.32C182.04 113.16 177.05 108.17 170.9 108.16C177.05 108.16 182.04 103.16 182.05 97C182.06 103.16 187.05 108.15 193.22 108.16C187.05 108.17 182.06 113.16 182.05 119.32ZM191.24 144.03C186.03 144.96 182.06 149.51 182.05 155C182.04 149.51 178.09 144.96 172.86 144.03C178.09 143.09 182.04 138.54 182.05 133.05C182.06 138.54 186.03 143.09 191.24 144.03ZM182.05 168.73C182.06 174.9 187.06 179.89 193.23 179.89C187.06 179.89 182.06 184.89 182.05 191.05C182.04 184.89 177.04 179.89 170.87 179.89C177.04 179.89 182.04 174.9 182.05 168.73ZM182.05 204.79C182.06 210.95 187.06 215.95 193.23 215.95C187.06 215.95 182.06 220.94 182.05 227.11C182.04 220.94 177.04 215.95 170.87 215.95C177.04 215.95 182.04 210.95 182.05 204.79ZM151.79 26.53C152.6 31.92 157.24 36.05 162.85 36.05C157.24 36.05 152.6 40.18 151.79 45.57C150.99 40.18 146.35 36.05 140.74 36.05C146.35 36.05 150.99 31.92 151.79 26.53ZM151.79 62.59C152.6 67.98 157.24 72.11 162.85 72.11C157.24 72.11 152.6 76.24 151.79 81.63C150.99 76.24 146.35 72.11 140.74 72.11C146.35 72.11 150.99 67.98 151.79 62.59ZM151.79 117.68C151 112.3 146.36 108.17 140.76 108.16C146.36 108.16 151 104.02 151.79 98.64C152.6 104.02 157.23 108.15 162.84 108.16C157.23 108.17 152.6 112.3 151.79 117.68ZM160.86 144.03C156.18 144.86 152.5 148.62 151.79 153.35C151.1 148.62 147.41 144.86 142.73 144.03C147.41 143.19 151.1 139.43 151.79 134.7C152.5 139.43 156.18 143.19 160.86 144.03ZM151.79 170.37C152.6 175.76 157.24 179.89 162.85 179.89C157.24 179.89 152.6 184.02 151.79 189.41C150.99 184.02 146.35 179.89 140.74 179.89C146.35 179.89 150.99 175.76 151.79 170.37ZM151.79 206.43C152.6 211.82 157.24 215.95 162.85 215.95C157.24 215.95 152.6 220.08 151.79 225.47C150.99 220.08 146.35 215.95 140.74 215.95C146.35 215.95 150.99 211.82 151.79 206.43ZM121.54 24.89C121.55 31.06 126.55 36.05 132.72 36.05C126.55 36.05 121.55 41.05 121.54 47.21C121.53 41.05 116.53 36.05 110.36 36.05C116.53 36.05 121.53 31.06 121.54 24.89ZM121.54 60.95C121.55 67.11 126.55 72.11 132.72 72.11C126.55 72.11 121.55 77.1 121.54 83.27C121.53 77.1 116.53 72.11 110.36 72.11C116.53 72.11 121.53 67.11 121.54 60.95ZM121.54 119.32C121.53 113.16 116.54 108.17 110.38 108.16C116.54 108.16 121.53 103.16 121.54 97C121.55 103.16 126.54 108.15 132.69 108.16C126.54 108.17 121.55 113.16 121.54 119.32ZM130.73 144.03C125.51 144.96 121.54 149.51 121.54 155C121.53 149.51 117.56 144.96 112.35 144.03C117.56 143.09 121.53 138.54 121.54 133.05C121.54 138.54 125.51 143.09 130.73 144.03ZM121.54 168.73C121.55 174.9 126.55 179.89 132.72 179.89C126.55 179.89 121.55 184.89 121.54 191.05C121.53 184.89 116.53 179.89 110.36 179.89C116.53 179.89 121.53 174.9 121.54 168.73ZM121.54 204.79C121.55 210.95 126.55 215.95 132.72 215.95C126.55 215.95 121.55 220.94 121.54 227.11C121.53 220.94 116.53 215.95 110.36 215.95C116.53 215.95 121.53 210.95 121.54 204.79ZM91.16 24.87C91.16 31.05 96.16 36.05 102.34 36.05C96.16 36.05 91.16 41.06 91.16 47.23C91.16 41.06 86.15 36.05 79.98 36.05C86.15 36.05 91.16 31.05 91.16 24.87ZM91.16 60.93C91.16 67.1 96.16 72.11 102.34 72.11C96.16 72.11 91.16 77.11 91.16 83.29C91.16 77.11 86.15 72.11 79.98 72.11C86.15 72.11 91.16 67.1 91.16 60.93ZM91.16 119.34C91.16 113.17 86.16 108.17 79.99 108.16C86.16 108.16 91.16 103.15 91.16 96.98C91.16 103.15 96.16 108.15 102.31 108.16C96.16 108.17 91.16 113.17 91.16 119.34ZM100.35 144.03C95.12 144.96 91.16 149.52 91.16 155.02C91.16 149.52 87.18 144.96 81.95 144.03C87.18 143.09 91.16 138.53 91.16 133.03C91.16 138.53 95.12 143.09 100.35 144.03ZM91.16 168.71C91.16 174.89 96.16 179.89 102.34 179.89C96.16 179.89 91.16 184.9 91.16 191.07C91.16 184.9 86.15 179.89 79.98 179.89C86.15 179.89 91.16 174.89 91.16 168.71ZM91.16 204.77C91.16 210.94 96.16 215.95 102.34 215.95C96.16 215.95 91.16 220.95 91.16 227.13C91.16 220.95 86.15 215.95 79.98 215.95C86.15 215.95 91.16 210.94 91.16 204.77ZM60.76 24.9C60.79 31.06 65.79 36.05 71.94 36.05C65.79 36.05 60.79 41.05 60.76 47.21C60.75 41.05 55.75 36.05 49.6 36.05C55.75 36.05 60.75 31.06 60.76 24.9ZM60.76 60.95C60.79 67.11 65.79 72.11 71.94 72.11C65.79 72.11 60.79 77.1 60.76 83.26C60.75 77.1 55.75 72.11 49.6 72.11C55.75 72.11 60.75 67.11 60.76 60.95ZM60.76 119.31C60.75 113.16 55.76 108.17 49.61 108.16C55.76 108.16 60.75 103.16 60.76 97.01C60.79 103.16 65.78 108.15 71.92 108.16C65.78 108.17 60.79 113.16 60.76 119.31ZM69.97 144.03C64.74 144.96 60.79 149.51 60.76 154.99C60.75 149.51 56.79 144.96 51.57 144.03C56.79 143.09 60.75 138.54 60.76 133.06C60.79 138.54 64.74 143.09 69.97 144.03ZM60.76 168.74C60.79 174.9 65.79 179.89 71.94 179.89C65.79 179.89 60.79 184.89 60.76 191.05C60.75 184.89 55.75 179.89 49.6 179.89C55.75 179.89 60.75 174.9 60.76 168.74ZM60.76 204.79C60.79 210.95 65.79 215.95 71.94 215.95C65.79 215.95 60.79 220.94 60.76 227.1C60.75 220.94 55.75 215.95 49.6 215.95C55.75 215.95 60.75 210.95 60.76 204.79ZM30.38 24.87C30.38 31.05 35.4 36.05 41.56 36.05C35.4 36.05 30.38 41.06 30.38 47.23C30.38 41.06 25.38 36.05 19.2 36.05C25.38 36.05 30.38 31.05 30.38 24.87ZM30.38 60.93C30.38 67.1 35.4 72.11 41.56 72.11C35.4 72.11 30.38 77.11 30.38 83.29C30.38 77.11 25.38 72.11 19.2 72.11C25.38 72.11 30.38 67.1 30.38 60.93ZM30.38 119.34C30.38 113.17 25.4 108.17 19.23 108.16C25.4 108.16 30.38 103.15 30.38 96.98C30.38 103.15 35.38 108.15 41.54 108.16C35.38 108.17 30.38 113.17 30.38 119.34ZM39.57 144.03C34.35 144.96 30.38 149.52 30.38 155.02C30.38 149.52 26.41 144.96 21.19 144.03C26.41 143.09 30.38 138.53 30.38 133.03C30.38 138.53 34.35 143.09 39.57 144.03ZM30.38 168.71C30.38 174.89 35.4 179.89 41.56 179.89C35.4 179.89 30.38 184.9 30.38 191.07C30.38 184.9 25.38 179.89 19.2 179.89C25.38 179.89 30.38 174.89 30.38 168.71ZM30.38 204.77C30.38 210.94 35.4 215.95 41.56 215.95C35.4 215.95 30.38 220.95 30.38 227.13C30.38 220.95 25.38 215.95 19.2 215.95C25.38 215.95 30.38 210.94 30.38 204.77Z" fill="url(#paint0_linear_3248_5)"/>
              <defs>
                <linearGradient id="paint0_linear_3248_5" x1="182.11" y1="0" x2="182.11" y2="252" gradientUnits="userSpaceOnUse">
                  <stop offset="0" stop-color="${e.color}" stop-opacity="0" />
                  <stop offset="0.3" stop-color="${e.color}" stop-opacity="1" />
                </linearGradient>
              </defs>
            </svg>
            ${e.image?`<img src="${e.image}" class="popup-background-image" alt="">`:""}
            <div class="content-wrapper">
              <div class="popup-title">${e.name}</div>
                          <div class="fade-top"></div> 
              <div class="popup-description">${e.description}</div>
                        <div class="fade-bottom"></div>

              ${e.image?`<button class="impressie-button button-base">${o.buttons.impression}</button>`:""}
              <button class="more-info-button button-base">${o.buttons.moreInfo}</button>
            </div>
          </div>
          
          <div class="popup-side popup-back">
            <div class="content-wrapper">
              <div class="popup-title details">${e.name||"Naam error"}</div>

               <!-- Add this new social-icons div -->
          <div class="social-icons">
          ${e.website?`
            <a href="${e.website}" target="_blank" aria-label="${o.aria.website}" title="${o.aria.website}">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="2" y1="12" x2="22" y2="12"></line>
                <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>
              </svg>
            </a>`:""}
          ${e.instagram?`
            <a href="${e.instagram}" target="_blank" aria-label="${o.aria.instagram}" title="${o.aria.instagram}">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.28-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
              </svg>
            </a>`:""}
          ${e.facebook?`
            <a href="${e.facebook}" target="_blank" aria-label="${o.aria.facebook}" title="${o.aria.facebook}">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                 <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path>
              </svg>
            </a>`:""}
            </div>
              <div class="info-content"</div>
                <div class="popup-descriptionv2">${e.descriptionv2}</div>
              <button class="more-info-button button-base">${o.buttons.back}</button>
            </div>
          </div>
        </div>
      `}}var me,Y=N(()=>{"use strict";F();A();pe();me={nl:{buttons:{startAR:"Start AR",instruction:"Instructie",back:"Terug",impression:"Impressie",moreInfo:"Meer info"},titles:{instruction:"Instructie"},messages:{arMobileOnly:"Deze AR-ervaring is alleen beschikbaar op mobiele apparaten",snapchatRequired:"Om deze AR ervaring te gebruiken heb je Snapchat nodig. Wil je Snapchat downloaden?",defaultARInstruction:"Bekijk deze AR ervaring op je telefoon of desktop."},aria:{closePopup:"Sluit popup",website:"Website",instagram:"Instagram",facebook:"Facebook"}},en:{buttons:{startAR:"Start AR",instruction:"Instruction",back:"Back",impression:"Impression",moreInfo:"More info"},titles:{instruction:"Instruction"},messages:{arMobileOnly:"This AR experience is only available on mobile devices",snapchatRequired:"You need Snapchat to use this AR experience. Would you like to download Snapchat?",defaultARInstruction:"View this AR experience on your phone or desktop."},aria:{closePopup:"Close popup",website:"Website",instagram:"Instagram",facebook:"Facebook"}},de:{buttons:{startAR:"AR starten",instruction:"Anleitung",back:"Zur\xFCck",impression:"Eindruck",moreInfo:"Mehr Info"},titles:{instruction:"Anleitung"},messages:{arMobileOnly:"Diese AR-Erfahrung ist nur auf mobilen Ger\xE4ten verf\xFCgbar",snapchatRequired:"Sie ben\xF6tigen Snapchat f\xFCr diese AR-Erfahrung. M\xF6chten Sie Snapchat herunterladen?",defaultARInstruction:"Sehen Sie sich diese AR-Erfahrung auf Ihrem Telefon oder Desktop an."},aria:{closePopup:"Popup schlie\xDFen",website:"Webseite",instagram:"Instagram",facebook:"Facebook"}}};});F();function ot(e,t,a,o){let n=p=>p*(Math.PI/180),i=n(a-e),r=n(o-t),l=Math.sin(i/2)*Math.sin(i/2)+Math.cos(n(e))*Math.cos(n(a))*Math.sin(r/2)*Math.sin(r/2);return 6371*(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)))}function Se(e){e.on("moveend",()=>{if(e.isEasing())return;let t=e.getCenter(),a={lng:y.MAP.boundary.center[0],lat:y.MAP.boundary.center[1]};if(ot(t.lat,t.lng,a.lat,a.lng)>1){let n=document.createElement("div");n.id="interaction-blocker",document.body.appendChild(n),e.flyTo({center:y.MAP.center,zoom:17,pitch:45,bearing:-17.6,speed:.8,curve:1.5,essential:!0}),gsap.to(n,{duration:2,backgroundColor:"rgba(255,255,255,0)",onComplete:()=>{n.remove()}})}})}F();A();function C(e,t,a="value",o=null,n=!1,i=-1,r="item"){if(!e)return o;let l=e.querySelector(t);return l&&a in l?l[a]:o}function at(){let e=document.getElementById("location-list"),t=0,a=0;e&&Array.from(e.childNodes).filter(o=>o.nodeType===Node.ELEMENT_NODE).forEach((o,n)=>{let i=C(o,"#locationLatitude","value",null,!0,n,"location"),r=C(o,"#locationLongitude","value",null,!0,n,"location"),l=C(o,"#locationID","value",`missing-id-${n}`,!0,n,"location"),c=parseFloat(i),p=parseFloat(r);if(isNaN(c)||isNaN(p)){a++;return}let u={locationLat:c,locationLong:p,locationID:l,name:C(o,"#name","value","Naamloos",!1,n,"location"),locationInfo:C(o,".locations-map_card","innerHTML","<p>Geen informatie beschikbaar</p>",!1,n,"location"),ondernemerkleur:C(o,"#ondernemerkleur","value","#A0A0A0",!1,n,"location"),descriptionv2:C(o,"#descriptionv2","value","",!1,n,"location"),icon:C(o,"#icon","value",null,!1,n,"location"),image:C(o,"#image","value",null,!1,n,"location"),category:C(o,"#category","value","Overig",!1,n,"location"),telefoonummer:C(o,"#telefoonnummer","value","",!1,n,"location"),locatie:C(o,"#locatie","value","",!1,n,"location"),maps:C(o,"#maps","value",null,!1,n,"location"),website:C(o,"#website","value",null,!1,n,"location"),instagram:C(o,"#instagram","value",null,!1,n,"location"),facebook:C(o,"#facebook","value",null,!1,n,"location")},b={type:"Feature",geometry:{type:"Point",coordinates:[u.locationLong,u.locationLat]},properties:{id:u.locationID,description:u.locationInfo,arrayID:n,color:u.ondernemerkleur,name:u.name,icon:u.icon,image:u.image,category:u.category,telefoonummer:u.telefoonummer,locatie:u.locatie,maps:u.maps,website:u.website,descriptionv2:u.descriptionv2,instagram:u.instagram,facebook:u.facebook}};m.mapLocations.features.some(s=>s.properties.id===u.locationID)?a++:(m.mapLocations.features.push(b),t++)})}function nt(){let e=document.getElementById("location-ar-list"),t=0,a=0,o=m.mapLocations.features.length;e&&Array.from(e.childNodes).filter(n=>n.nodeType===Node.ELEMENT_NODE).forEach((n,i)=>{let r=i,l=C(n,"#latitude_ar","value",null,!0,r,"AR"),c=C(n,"#longitude_ar","value",null,!0,r,"AR"),p=C(n,"#name_ar","value",`AR Item ${r}`,!0,r,"AR"),u=parseFloat(l),b=parseFloat(c);if(isNaN(u)||isNaN(b)){a++;return}let s={latitude_ar:u,longitude_ar:b,name_ar:p,slug_ar:C(n,"#slug_ar","value","",!1,r,"AR"),image_ar:C(n,"#image_ar","value",null,!1,r,"AR"),description_ar:C(n,"#description_ar","value","Geen beschrijving.",!1,r,"AR"),arkleur:C(n,"#arkleur","value","#A0A0A0",!1,i,"location"),icon_ar:C(n,"#icon_ar","value",null,!1,r,"AR"),instructie:C(n,"#instructie","value","Geen instructie beschikbaar.",!1,r,"AR"),link_ar_mobile:C(n,"#link_ar_mobile","value",null,!1,r,"AR"),link_ar_desktop:C(n,"#link_ar_desktop","value",null,!1,r,"AR"),category:C(n,"#category","value",null,!1,r,"AR")};if(!s.link_ar_mobile&&!s.link_ar_desktop){a++;return}let d={type:"Feature",geometry:{type:"Point",coordinates:[s.longitude_ar,s.latitude_ar]},properties:{type:"ar",name:s.name_ar,slug:s.slug_ar,description:s.description_ar,arrayID:o+i,image:s.image_ar,arkleur:s.arkleur,icon:s.icon_ar,instructie:s.instructie,link_ar_mobile:s.link_ar_mobile,link_ar_desktop:s.link_ar_desktop,category:s.category}};m.mapLocations.features.push(d),t++})}async function rt(){return m.mapLocations.features=[],at(),nt(),m.mapLocations}document.addEventListener("DOMContentLoaded",()=>{rt()});F();A();function Pe(){try{let e=Array.from(m.activeFilters);localStorage.setItem(Q,JSON.stringify(e))}catch{}}function Te(e=[]){let t=new Set(e);w.setActiveFilters(t),document.querySelectorAll(".filter-btn").forEach(a=>{let{category:o}=a.dataset;o&&a.classList.toggle("is--active",t.has(o))}),typeof window.applyMapFilters=="function"&&window.applyMapFilters()}function Ae(){try{let e=localStorage.getItem(Q),t=e?JSON.parse(e):[];Te(t)}catch{Te([])}}A();var it=new Map;var ne=[];function q(){let e=m.map;if(!e)return;let t=m.activeFilters,a;!t||t.size===0?a=null:a=["any",["in",["get","category"],["literal",Array.from(t)]],["!",["has","category"]],["==",["get","category"],""]],["location-markers","location-icons","location-labels"].forEach(n=>{if(e.getLayer(n))try{e.setFilter(n,a)}catch{}}),Pe()}function Ie(e){if(!e)return;let t=new Set(m.activeFilters);t.has(e)?t.delete(e):t.add(e),w.setActiveFilters(t),q()}function re(){ne.length>0||(ne=Array.from(document.querySelectorAll(".filter-btn")),ne.forEach(e=>{let t=e.dataset.category;t&&it.set(t,e),e.addEventListener("click",()=>{let a=e.dataset.category;if(!a)return;let o=new Set(m.activeFilters);o.has(a)?(o.delete(a),e.classList.remove("is--active")):(o.add(a),e.classList.add("is--active")),w.setActiveFilters(o),q()})}))}window.applyMapFilters=q;F();A();function Fe(){let e=window.location.pathname;return e.includes("/en/")?"en":e.includes("/de/")?"de":"nl"}var Re={nl:{title:"Kom naar Heerlen",message:"Deze functie is alleen beschikbaar binnen de blauwe cirkel op de kaart. Kom naar het centrum van Heerlen om de interactieve kaart te gebruiken!",locationDenied:"Locatie toegang geweigerd. Schakel het in bij je instellingen.",locationUnavailable:"Locatie niet beschikbaar. Controleer je apparaat instellingen.",locationTimeout:"Verzoek verlopen. Probeer opnieuw.",locationError:"Er is een fout opgetreden bij het ophalen van je locatie."},en:{title:"Come to Heerlen",message:"This feature is only available within the blue circle on the map. Come to the center of Heerlen to use the interactive map!",locationDenied:"Location access denied. Please enable it in your settings.",locationUnavailable:"Location not available. Check your device settings.",locationTimeout:"Request timed out. Please try again.",locationError:"An error occurred while getting your location."},de:{title:"Kommen Sie nach Heerlen",message:"Diese Funktion ist nur innerhalb des blauen Kreises auf der Karte verf\xFCgbar. Kommen Sie ins Zentrum von Heerlen, um die interaktive Karte zu nutzen!",locationDenied:"Standortzugriff verweigert. Bitte aktivieren Sie ihn in Ihren Einstellungen.",locationUnavailable:"Standort nicht verf\xFCgbar. \xDCberpr\xFCfen Sie Ihre Ger\xE4teeinstellungen.",locationTimeout:"Anfrage abgelaufen. Bitte versuchen Sie es erneut.",locationError:"Beim Abrufen Ihres Standorts ist ein Fehler aufgetreten."}},j=class{constructor(t){g(this,"map");g(this,"searchRadiusId");g(this,"searchRadiusOuterId");g(this,"radiusInMeters");g(this,"boundaryLayerIds");g(this,"distanceMarkers");g(this,"isPopupOpen");g(this,"centerPoint");g(this,"boundaryRadius");g(this,"geolocateControl");g(this,"isFirstLocation");g(this,"isTracking");g(this,"userInitiatedGeolocation");g(this,"wasTracking");g(this,"eventListeners",[]);g(this,"timeouts",new Set);g(this,"boundaryPopup");this.map=t,this.searchRadiusId="search-radius",this.searchRadiusOuterId="search-radius-outer",this.radiusInMeters=25,this.boundaryLayerIds=["boundary-fill","boundary-line","boundary-label"],this.distanceMarkers=[],this.isPopupOpen=!1,this.centerPoint=y.MAP.boundary.center,this.boundaryRadius=y.MAP.boundary.radius,this.isFirstLocation=!0,this.isTracking=!1,this.userInitiatedGeolocation=!1,this.initialize()}initialize(){this.setupGeolocateControl(),this.setupSearchRadius(),this.setupBoundaryCheck()}pauseTracking(){this.geolocateControl&&this.geolocateControl._watchState==="ACTIVE_LOCK"&&(this.wasTracking=!0,this.geolocateControl._watchState="ACTIVE_ERROR")}resumeTracking(){this.geolocateControl&&this.wasTracking&&(this.geolocateControl._watchState="ACTIVE_LOCK",this.wasTracking=!1)}updateDistanceMarkers(t){this.clearDistanceMarkers(),m.mapLocations.features.forEach(a=>{let o=a.geometry.coordinates,n=1e3*this.calculateDistance(t[1],t[0],o[1],o[0]);if(n<=this.radiusInMeters){let i=document.createElement("div");i.className="distance-marker",i.innerHTML=`<span class="distance-marker-distance">${Math.round(n)}m</span>`;let r=new window.mapboxgl.Marker({element:i}).setLngLat(o).addTo(this.map);i.addEventListener("click",()=>{this.map.fire("click",{lngLat:o,point:this.map.project(o),features:[a]})}),this.distanceMarkers.push(r)}})}handleUserLocation(t){let a=[t.coords.longitude,t.coords.latitude];if(this.isWithinBoundary(a)){if(this.updateSearchRadius(a),this.updateDistanceMarkers(a),!this.isPopupOpen)if(this.isFirstLocation)this.map.flyTo({center:a,zoom:17.5,pitch:45,duration:2e3,bearing:t.coords.heading||0}),this.isFirstLocation=!1;else{let o=this.map.getCenter();this.calculateDistance(o.lat,o.lng,a[1],a[0])>.05&&this.map.easeTo({center:a,duration:1e3})}}else this.geolocateControl._watchState="OFF",this.geolocateControl._geolocateButton&&(this.geolocateControl._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.geolocateControl._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting")),this.clearSearchRadius(),this.distanceMarkers&&(this.distanceMarkers.forEach(o=>o.remove()),this.distanceMarkers=[]),this.showBoundaryPopup(),this.map.flyTo({center:this.centerPoint,zoom:14,pitch:0,bearing:0,duration:1500})}setupGeolocateControl(){document.querySelectorAll(".mapboxgl-ctrl-top-right .mapboxgl-ctrl-group").forEach(a=>a.remove()),document.querySelectorAll(".mapboxgl-ctrl-bottom-right .mapboxgl-ctrl-group").forEach(a=>a.remove()),this.geolocateControl=new window.mapboxgl.GeolocateControl({positionOptions:{enableHighAccuracy:!0,maximumAge:1e3,timeout:6e3},trackUserLocation:!0,showUserHeading:!0,showAccuracyCircle:!1,fitBoundsOptions:{maxZoom:17.5,animate:!0}}),this.isFirstLocation=!0,this.isTracking=!1,this.userInitiatedGeolocation=!1;let t=this.geolocateControl._onSuccess;this.geolocateControl._onSuccess=a=>{let o=[a.coords.longitude,a.coords.latitude],n=this.isWithinBoundary(o);if(this.userInitiatedGeolocation&&!n){this.geolocateControl._watchState="OFF",this.geolocateControl._geolocateButton&&(this.geolocateControl._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.geolocateControl._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting")),this.showBoundaryLayers(),this.showBoundaryPopup(),this.geolocateControl._userLocationDotMarker&&this.geolocateControl._userLocationDotMarker.remove(),this.userInitiatedGeolocation=!1;return}t.call(this.geolocateControl,a),this.userInitiatedGeolocation=!1},this.geolocateControl.on("error",a=>{this.userInitiatedGeolocation&&this.handleGeolocationError(a),this.userInitiatedGeolocation=!1}),this.map.once("idle",()=>{let a=document.querySelector(".mapboxgl-ctrl-geolocate");a&&a.parentElement&&a.addEventListener("click",o=>{this.userInitiatedGeolocation=!0,this.showBoundaryLayers()},!0)}),this.geolocateControl.on("trackuserlocationstart",()=>{this.isTracking=!0,this.showBoundaryLayers()}),this.geolocateControl.on("trackuserlocationend",()=>{this.isTracking=!1,this.isFirstLocation=!0,this.map.easeTo({bearing:0,pitch:45}),this.clearSearchRadius(),this.distanceMarkers&&(this.distanceMarkers.forEach(a=>a.remove()),this.distanceMarkers=[])}),this.map.addControl(this.geolocateControl,"bottom-right"),this.map.addControl(new window.mapboxgl.NavigationControl,"top-right")}setupSearchRadius(){this.map.on("load",()=>{this.map.getSource(this.searchRadiusId)||(this.map.addSource(this.searchRadiusId,{type:"geojson",data:{type:"Feature",geometry:{type:"Polygon",coordinates:[[]]}}}),this.map.addLayer({id:this.searchRadiusId,type:"fill-extrusion",source:this.searchRadiusId,paint:{"fill-extrusion-color":"#4B83F2","fill-extrusion-opacity":.08,"fill-extrusion-height":1,"fill-extrusion-base":0}}),this.map.addSource(this.searchRadiusOuterId,{type:"geojson",data:{type:"Feature",geometry:{type:"Polygon",coordinates:[[]]}}}),this.map.addLayer({id:this.searchRadiusOuterId,type:"fill-extrusion",source:this.searchRadiusOuterId,paint:{"fill-extrusion-color":"#4B83F2","fill-extrusion-opacity":.04,"fill-extrusion-height":2,"fill-extrusion-base":0}}))})}setupBoundaryCheck(){this.map.on("load",()=>{this.map.getSource("boundary-circle")||(this.map.addSource("boundary-circle",{type:"geojson",data:this.createBoundaryCircle()}),this.map.addLayer({id:"boundary-fill",type:"fill",source:"boundary-circle",paint:{"fill-color":"#4B83F2","fill-opacity":.03},layout:{visibility:"none"}}),this.map.addLayer({id:"boundary-line",type:"line",source:"boundary-circle",paint:{"line-color":"#4B83F2","line-width":2,"line-dasharray":[3,3]},layout:{visibility:"none"}}))})}showBoundaryLayers(){this.boundaryLayerIds.forEach(t=>{if(this.map.getLayer(t)&&(this.map.setLayoutProperty(t,"visibility","visible"),t==="boundary-fill")){let a=0,o=()=>{a<.03&&(a+=.005,this.map.setPaintProperty(t,"fill-opacity",a),requestAnimationFrame(o))};o()}})}hideBoundaryLayers(){this.boundaryLayerIds.forEach(t=>{if(this.map.getLayer(t))if(t==="boundary-fill"){let a=this.map.getPaintProperty(t,"fill-opacity")||.03,o=()=>{if(a>0){a-=.005;let n=Math.max(0,a);this.map.setPaintProperty(t,"fill-opacity",n),n>0?requestAnimationFrame(o):this.map.setLayoutProperty(t,"visibility","none")}else this.map.setLayoutProperty(t,"visibility","none")};o()}else this.map.setLayoutProperty(t,"visibility","none")})}updateSearchRadius(t){if(!this.map.getSource(this.searchRadiusId))return;let o=((n,i,r=64)=>{let l={latitude:n[1],longitude:n[0]},c=i/1e3,p=[],u=c/(111.32*Math.cos(l.latitude*Math.PI/180)),b=c/110.574;for(let s=0;s<r;s++){let d=s/r*(2*Math.PI),f=u*Math.cos(d),h=b*Math.sin(d);p.push([l.longitude+f,l.latitude+h])}return p.push(p[0]),p})(t,this.radiusInMeters);[this.searchRadiusId,this.searchRadiusOuterId].forEach(n=>{let i=this.map.getSource(n);i&&"setData"in i&&i.setData({type:"Feature",geometry:{type:"Polygon",coordinates:[o]}})})}clearSearchRadius(){this.map.getSource(this.searchRadiusId)&&[this.searchRadiusId,this.searchRadiusOuterId].forEach(t=>{let a=this.map.getSource(t);a&&"setData"in a&&a.setData({type:"Feature",geometry:{type:"Polygon",coordinates:[[]]}})})}handleGeolocationError(t){let a=Fe(),o=Re[a],n={1:o.locationDenied,2:o.locationUnavailable,3:o.locationTimeout},i=o.locationError;this.showNotification(n[t.code]||i)}showNotification(t){let a=document.createElement("div");a.className="geolocation-error-notification",a.textContent=t,document.body.appendChild(a),setTimeout(()=>a.remove(),5e3)}createBoundaryCircle(){let t={latitude:this.centerPoint[1],longitude:this.centerPoint[0]},a=this.boundaryRadius,o=[],n=a/(111.32*Math.cos(t.latitude*Math.PI/180)),i=a/110.574;for(let r=0;r<=64;r++){let l=r/64*(2*Math.PI),c=n*Math.cos(l),p=i*Math.sin(l);o.push([t.longitude+c,t.latitude+p])}return{type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[o]}}}isWithinBoundary(t){return this.calculateDistance(t[1],t[0],this.centerPoint[1],this.centerPoint[0])<=this.boundaryRadius}calculateDistance(t,a,o,n){let i=u=>u*(Math.PI/180),r=i(o-t),l=i(n-a),c=Math.sin(r/2)*Math.sin(r/2)+Math.cos(i(t))*Math.cos(i(o))*Math.sin(l/2)*Math.sin(l/2);return 6371*(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)))}showBoundaryPopup(){let t=Fe(),a=Re[t],o=document.querySelector(".location-boundary-popup");o&&o.remove();let n=document.createElement("div");n.className="location-boundary-popup",this.boundaryPopup=n;let i=document.createElement("h3");i.textContent=a.title;let r=document.createElement("p");r.textContent=a.message;let l=this;this.addTrackedTimeout(()=>{window.innerWidth<=768?n.style.transform="translateY(100%)":n.style.transform="translateX(120%)",this.addTrackedTimeout(()=>{n.parentNode&&n.remove(),this.boundaryPopup===n&&(this.boundaryPopup=void 0)},600),this.addTrackedTimeout(()=>{l.hideBoundaryLayers()},200);let c=window.matchMedia("(max-width: 479px)").matches?17:18;l.map.flyTo({center:y.MAP.center,zoom:c,pitch:55,bearing:-17.6,duration:3e3,essential:!0,easing:p=>p*(2-p)})},3e3),n.appendChild(i),n.appendChild(r),document.body.appendChild(n),this.map.getLayer("boundary-fill")&&(this.map.setPaintProperty("boundary-fill","fill-opacity",.05),this.map.setPaintProperty("boundary-line","line-width",3),this.addTrackedTimeout(()=>{this.map.getLayer("boundary-fill")&&this.map.setPaintProperty("boundary-fill","fill-opacity",.03),this.map.getLayer("boundary-line")&&this.map.setPaintProperty("boundary-line","line-width",2)},2e3)),!this.map.isMoving()&&!this.map.isEasing()&&this.map.flyTo({center:this.centerPoint,zoom:14,pitch:0,bearing:0,duration:1500}),requestAnimationFrame(()=>{n.offsetHeight,n.classList.add("show")})}cleanup(){this.clearDistanceMarkers(),this.geolocateControl&&(this.map.removeControl(this.geolocateControl),this.geolocateControl=void 0),this.timeouts.forEach(a=>clearTimeout(a)),this.timeouts.clear(),this.eventListeners.forEach(({element:a,event:o,handler:n})=>{a.removeEventListener(o,n)}),this.eventListeners.length=0,this.boundaryPopup&&this.boundaryPopup.parentNode&&(this.boundaryPopup.parentNode.removeChild(this.boundaryPopup),this.boundaryPopup=void 0),[this.searchRadiusId,this.searchRadiusOuterId].forEach(a=>{this.map.getSource(a)&&this.map.removeSource(a)}),this.boundaryLayerIds.forEach(a=>{this.map.getLayer(a)&&this.map.removeLayer(a)})}clearDistanceMarkers(){this.distanceMarkers.length>0&&(this.distanceMarkers.forEach(t=>t.remove()),this.distanceMarkers.length=0)}addTrackedEventListener(t,a,o){t.addEventListener(a,o),this.eventListeners.push({element:t,event:a,handler:o})}addTrackedTimeout(t,a){let o=window.setTimeout(()=>{this.timeouts.delete(o),t()},a);return this.timeouts.add(o),o}};F();A();mapboxgl.accessToken=Me;function ze(){let e=new mapboxgl.Map(Le);Ee(e);let t=e.flyTo.bind(e);return e._originalFlyTo=t,e.flyTo=function(a){return t(a)},e}F();A();A();F();var D=class D{constructor(){g(this,"imageCache",new WeakMap);g(this,"modelCache",new Map);g(this,"textureCache",new Map);g(this,"loadingPromises",new Map);g(this,"failedResources",new Set);g(this,"loadTimes",new Map);g(this,"loadCounts",new Map)}static getInstance(){return D.instance||(D.instance=new D),D.instance}async loadOptimizedImage(t,a={}){let{maxSize:o=512,timeout:n=1e4}=a;if(this.failedResources.has(t))throw new Error(`Resource previously failed to load: ${t}`);if(this.loadingPromises.has(t))return this.loadingPromises.get(t);if(this.imageCache.has(t))return this.imageCache.get(t);let i=this.loadImageWithOptimization(t,o,n);this.loadingPromises.set(t,i);try{let r=await i;return this.imageCache.set(t,r),this.trackLoadSuccess(t),r}catch(r){throw this.failedResources.add(t),this.trackLoadError(t),r}finally{this.loadingPromises.delete(t)}}loadImageWithOptimization(t,a,o){return new Promise((n,i)=>{let r=new Image;r.crossOrigin="anonymous";let l=setTimeout(()=>{r.src="",i(new Error(`Image load timeout: ${t}`))},o);r.onload=()=>{clearTimeout(l),Math.max(r.width,r.height)>a?n(this.resizeImage(r,a)):n(r)},r.onerror=()=>{clearTimeout(l),i(new Error(`Failed to load image: ${t}`))},r.src=t})}resizeImage(t,a){let o=document.createElement("canvas"),n=o.getContext("2d"),i=Math.min(a/t.width,a/t.height);o.width=t.width*i,o.height=t.height*i,n.drawImage(t,0,0,o.width,o.height);let r=new Image;return r.src=o.toDataURL("image/jpeg",.85),r}async loadModel(t,a){if(this.modelCache.has(t))return this.modelCache.get(t);if(this.loadingPromises.has(t))return await this.loadingPromises.get(t);let o=new Promise((n,i)=>{a.load(t,r=>{n(r)},void 0,r=>i(r))});this.loadingPromises.set(t,o);try{let n=await o;return this.modelCache.set(t,n),this.trackLoadSuccess(t),n}catch(n){throw this.failedResources.add(t),this.trackLoadError(t),n}finally{this.loadingPromises.delete(t)}}optimizeModel(t){t.traverse(a=>{a.isMesh&&(a.frustumCulled=!0,a.material&&a.material.map&&(a.material.map.generateMipmaps=!1,a.material.map.minFilter=window.THREE?.LinearFilter||1006))})}async preloadResources(t){let o=[];for(let n=0;n<t.length;n+=3)o.push(t.slice(n,n+3));for(let n of o){let i=n.map(r=>this.loadOptimizedImage(r).catch(()=>null));await Promise.all(i)}}cleanup(){this.imageCache=new WeakMap,this.modelCache.clear(),this.textureCache.clear(),this.loadingPromises.clear(),this.loadTimes.clear(),this.loadCounts.clear(),this.failedResources.clear()}getStats(){let t=Array.from(this.loadTimes.values()).reduce((o,n)=>o+n,0),a=this.loadTimes.size;return{cachedImages:this.imageCache?-1:0,cachedModels:this.modelCache.size,failedResources:this.failedResources.size,averageLoadTime:a>0?t/a:0}}trackLoadSuccess(t){let a=Date.now();this.loadTimes.set(t,a),this.loadCounts.set(t,(this.loadCounts.get(t)||0)+1)}trackLoadError(t){}};g(D,"instance");var ie=D,G=ie.getInstance();var se=new Map,ce=new Set;async function st(e){let a=[...new Set(m.mapLocations.features.map(n=>n.properties.icon).filter(n=>!!n))].filter(n=>!e.hasImage(n)&&!ce.has(n));if(a.length===0)return;a.forEach(n=>ce.add(n));let o=a.map(n=>ct(e,n).finally(()=>ce.delete(n)));await Promise.allSettled(o)}async function ct(e,t){try{if(se.has(t)){let o=se.get(t);e.hasImage(t)||e.addImage(t,o);return}let a=await lt(t);se.set(t,a),e.hasImage(t)||e.addImage(t,a)}catch{}}function lt(e){return new Promise((t,a)=>{let o=new Image;o.crossOrigin="anonymous",o.onload=()=>t(o),o.onerror=()=>a(new Error(`Failed to load icon: ${e}`)),o.src=e})}async function Oe(e){if(m.markersAdded)return;await st(e),e.addSource("locations",{type:"geojson",data:m.mapLocations}),[{id:"location-markers",type:"circle",paint:{"circle-color":["case",["==",["get","type"],"ar"],["get","arkleur"],["get","color"]],"circle-radius":["interpolate",["linear"],["zoom"],y.MARKER_ZOOM.min,2,y.MARKER_ZOOM.small,5,y.MARKER_ZOOM.medium,8,y.MARKER_ZOOM.large,10],"circle-stroke-width":1,"circle-stroke-color":"#ffffff","circle-opacity":0}},{id:"location-icons",type:"symbol",layout:{"icon-image":["get","icon"],"icon-size":["interpolate",["linear"],["zoom"],y.MARKER_ZOOM.min,.05,y.MARKER_ZOOM.small,.08,y.MARKER_ZOOM.medium,.12,y.MARKER_ZOOM.large,.15],"icon-allow-overlap":!0,"icon-anchor":"center"},paint:{"icon-opacity":0}},{id:"location-labels",type:"symbol",layout:{"text-field":["get","name"],"text-size":["interpolate",["linear"],["zoom"],y.MARKER_ZOOM.min,8,y.MARKER_ZOOM.small,10,y.MARKER_ZOOM.medium,11,y.MARKER_ZOOM.large,12],"text-offset":[0,1],"text-anchor":"top","text-allow-overlap":!1},paint:{"text-color":["get","color"],"text-halo-color":"#ffffff","text-halo-width":2,"text-opacity":0}}].forEach(a=>e.addLayer({...a,source:"locations"})),dt(e),pt(e),m.markersAdded=!0}function pt(e){let t=0,a=0,n=1e3/30,i=r=>{if(r-a<n){t<1&&requestAnimationFrame(i);return}a=r,t+=.08;let l=Math.min(t,1);try{e.getLayer("location-markers")&&e.setPaintProperty("location-markers","circle-opacity",l),e.getLayer("location-icons")&&e.setPaintProperty("location-icons","icon-opacity",l),e.getLayer("location-labels")&&e.setPaintProperty("location-labels","text-opacity",l)}catch{return}t<1&&requestAnimationFrame(i)};setTimeout(()=>requestAnimationFrame(i),100)}function dt(e){e.on("mouseenter","location-markers",()=>{e.getCanvas().style.cursor="pointer"}),e.on("mouseleave","location-markers",()=>{e.getCanvas().style.cursor=""})}Y();var fe=window.$;function $e(e){e.on("load",()=>{e.once("idle",()=>{let t=e.getStyle().layers.find(a=>a.type==="symbol"&&a.id.includes("label"))?.id;e.addLayer({id:"heerlen-buildings",type:"fill-extrusion",source:"composite","source-layer":"building",filter:["!=",["get","type"],"underground"],minzoom:15,paint:{"fill-extrusion-color":"#e8e0cc","fill-extrusion-height":["case",["has","height"],["get","height"],["has","min_height"],["get","min_height"],3],"fill-extrusion-base":["case",["has","min_height"],["get","min_height"],0],"fill-extrusion-opacity":1,"fill-extrusion-vertical-gradient":!0}},t)}),Ae(),Oe(e).then(()=>{re(),q()}).catch(t=>{re()}),setTimeout(()=>{let t=window.matchMedia("(max-width: 479px)").matches?16.5:17,a=[5.975338618538545,50.89054201081809],o=[5.977246733617121,50.888996872875126];e.jumpTo({center:a,zoom:14,pitch:0,bearing:0}),e.flyTo({center:o,zoom:t,pitch:35,bearing:162.4,duration:6e3,essential:!0,easing:n=>n*(2-n)})},3e3)})}function qe(){fe(".close-block").on("click",()=>{O()})}function Ge(e){["dragstart","zoomstart","rotatestart","pitchstart"].forEach(t=>{e.on(t,()=>{let a=fe(".locations-map_item.is--show");if(a.length&&(a.css({opacity:"0",transform:"translateY(40px) scale(0.6)",transition:"all 400ms cubic-bezier(0.68, -0.55, 0.265, 1.55)"}),setTimeout(()=>{a.removeClass("is--show")},400)),m.activePopup){let o=m.activePopup.getElement().querySelector(".mapboxgl-popup-content");o.style.transition="all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55)",o.style.transform="rotate(-5deg) translateY(40px) scale(0.6)",o.style.opacity="0",setTimeout(()=>{m.activePopup.remove(),E(null)},400)}})}),e.on("click",t=>{if(e.queryRenderedFeatures(t.point,{layers:["location-markers"]}).length===0&&m.activePopup){let o=m.activePopup.getElement(),n=t.originalEvent.target;if(!o.contains(n)){let i=o.querySelector(".mapboxgl-popup-content");i&&(i.style.transition="all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55)",i.style.transform="rotate(-5deg) translateY(40px) scale(0.6)",i.style.opacity="0"),setTimeout(()=>{m.activePopup&&(m.activePopup.remove(),E(null))},400);let r=fe(".locations-map_item.is--show");r.length&&(r.css({opacity:"0",transform:"translateY(40px) scale(0.6)",transition:"all 400ms cubic-bezier(0.68, -0.55, 0.265, 1.55)"}),setTimeout(()=>{r.removeClass("is--show")},400))}}})}var gt=["Brasserie Mijn Streek","De Twee Gezusters","SCHUNCK Bibliotheek Heerlen Glaspaleis","Glaspaleis Schunck","Bagels & Beans","Terras Bagels & Beans","Brunch Bar","Berden","Aroma","Brasserie Goya","Poppodium Nieuwe Nor","Nederlands Mijnmuseum","Smaak & Vermaak","Caf\xE9 ","De Kromme Toeter","Caf\xE9 Pelt","Het Romeins Museum","Pat's Tosti Bar","Sint-Pancratiuskerk","Cafe Bluff"],be=!1,xe=null;function ht(){if(xe)return xe;let e=["all"];return gt.forEach(t=>{e.push(["all",["!=",["get","brand"],t],["!=",["get","name"],t]])}),e.push(["has","name"]),xe=e,e}function je(e){let t=ht();["poi-label","poi-scalerank1","poi-scalerank2","poi-scalerank3","poi-scalerank4"].forEach(o=>{e.getLayer(o)&&e.setFilter(o,t)}),be=!0}function Ye(e){if(e.loaded()&&!be){je(e);return}let t=()=>{e.loaded()&&!be&&(je(e),e.off("style.load",t),e.off("idle",t))};e.on("style.load",t),e.on("idle",t)}Y();A();var k=window.THREE,We=window.mapboxgl,ft=[{id:"schunck",origin:[50.88778235149691,5.979389928151281],altitude:0,rotate:[Math.PI/2,.45,0],url:"https://cdn.jsdelivr.net/gh/Artwalters/3dmodels_heerlen@main/schunckv5.glb",scale:1.3},{id:"theater",origin:[50.886541206107225,5.972454838314243],altitude:0,rotate:[Math.PI/2,2.05,0],url:"https://cdn.jsdelivr.net/gh/Artwalters/3dmodels_heerlen@main/theaterheerlenv4.glb",scale:.6}],xt={id:"image1",origin:[50.88801513786042,5.980644311376565],altitude:6.5,rotate:[Math.PI/2,.35,0],imageUrl:"https://daks2k3a4ib2z.cloudfront.net/671769e099775386585f574d/67adf2bff5be8a200ec2fa55_osgameos_mural-p-130x130q80.png",width:13,height:13};function bt(e){let t=We.MercatorCoordinate.fromLngLat([e.origin[1],e.origin[0]],e.altitude),a=t.meterInMercatorCoordinateUnits(),o=e.width*a,n=e.height*a;return G.loadOptimizedImage(e.imageUrl,{maxSize:1024}).then(i=>{let r=new k.Texture(i);r.needsUpdate=!0,r.generateMipmaps=!1,r.minFilter=k.LinearFilter,r.magFilter=k.LinearFilter;let l=new k.MeshBasicMaterial({map:r,transparent:!0,side:k.DoubleSide}),c=new k.PlaneGeometry(o,n),p=new k.Mesh(c,l);return p.userData.transform={translateX:t.x,translateY:t.y,translateZ:t.z,rotate:e.rotate,scale:1},p})}function Ct(){return{id:"3d-models",type:"custom",renderingMode:"3d",onAdd:function(e,t){this.map=e,this.scene=new k.Scene,this.camera=new k.Camera;let a=new k.AmbientLight(16777215,.57);this.scene.add(a);let o=new k.DirectionalLight(16777215,.55);o.color.setHex(16579836);let n=210*(Math.PI/180),i=50*(Math.PI/180);o.position.set(Math.sin(n)*Math.sin(i),Math.cos(n)*Math.sin(i),Math.cos(i)).normalize(),this.scene.add(o),this.renderer=new k.WebGLRenderer({canvas:e.getCanvas(),context:t,antialias:!0}),this.renderer.autoClear=!1;let r=new k.GLTFLoader;ft.forEach(l=>{let c=We.MercatorCoordinate.fromLngLat([l.origin[1],l.origin[0]],l.altitude);G.loadModel(l.url,r).then(p=>{let u=p.scene;u.userData.transform={translateX:c.x,translateY:c.y,translateZ:c.z,rotate:l.rotate,scale:c.meterInMercatorCoordinateUnits()*l.scale},this.scene.add(u)}).catch(p=>{})}),bt(xt).then(l=>{this.scene.add(l)}).catch(l=>{})},render:function(e,t){let a=new k.Matrix4().fromArray(t);this.scene.traverse(o=>{if(o.userData.transform){let n=o.userData.transform,i=new k.Matrix4().makeTranslation(n.translateX,n.translateY,n.translateZ),r=new k.Matrix4().makeScale(n.scale,-n.scale,n.scale),l=new k.Matrix4().makeRotationX(n.rotate[0]),c=new k.Matrix4().makeRotationY(n.rotate[1]),p=new k.Matrix4().makeRotationZ(n.rotate[2]),u=new k.Matrix4().multiply(i).multiply(r).multiply(l).multiply(c).multiply(p);o.matrix=new k.Matrix4().copy(a).multiply(u),o.matrixAutoUpdate=!1}}),this.renderer.resetState(),this.renderer.render(this.scene,this.camera)}}}function Ke(e){e.on("style.load",()=>{let t=Ct();e.addLayer(t)})}var z=!0,Ce=[];function ye(e){z=e,localStorage.setItem("heerlen_map_3d_enabled",e.toString()),Ve(),Ce.length===0&&ve(),window.map.getLayer("3d-models")&&window.map.setLayoutProperty("3d-models","visibility",e?"visible":"none"),Ce.forEach(t=>{window.map.setLayoutProperty(t,"visibility",e?"visible":"none")})}function ve(){let{layers:e}=window.map.getStyle();Ce=e.filter(t=>t.type==="fill-extrusion"&&(t.id.includes("building")||t.id.includes("3d"))).map(t=>t.id)}function Ve(){let e=document.querySelector(".toggle-3d-button");e&&(e.classList.toggle("is-active",z),e.setAttribute("aria-pressed",z.toString()),e.title=z?"3D uit":"3D aan",e.innerHTML=z?'<svg viewBox="0 0 24 24" width="16" height="16"><path fill="currentColor" d="M21 16.5c0 .38-.21.71-.53.88l-7.9 4.44c-.16.12-.36.18-.57.18-.21 0-.41-.06-.57-.18l-7.9-4.44A.991.991 0 0 1 3 16.5v-9c0-.38.21-.71.53-.88l7.9-4.44c.16-.12.36-.18.57-.18.21 0 .41.06.57.18l7.9 4.44c.32.17.53.5.53.88v9M12 4.15l-6.04 3.4 6.04 3.4 6.04-3.4L12 4.15Z"/></svg>':'<svg viewBox="0 0 24 24" width="16" height="16"><path fill="none" stroke="currentColor" stroke-width="1.5" d="M21 16.5c0 .38-.21.71-.53.88l-7.9 4.44c-.16.12-.36.18-.57.18-.21 0-.41-.06-.57-.18l-7.9-4.44A.991.991 0 0 1 3 16.5v-9c0-.38.21-.71.53-.88l7.9-4.44c.16-.12.36-.18.57-.18.21 0 .41.06.57.18l7.9 4.44c.32.17.53.5.53.88v9M12 4.15l-6.04 3.4 6.04 3.4 6.04-3.4L12 4.15Z"/></svg>')}function yt(){let e=localStorage.getItem("heerlen_map_3d_enabled");e!==null&&(z=e!=="false")}function vt(e){let t=document.querySelector(".mapboxgl-ctrl-group .toggle-3d-button");if(t){let i=t.closest(".mapboxgl-ctrl-group");i&&i.remove()}let a=document.createElement("div");a.className="mapboxgl-ctrl mapboxgl-ctrl-group";let o=document.createElement("button");o.className="mapboxgl-ctrl-icon toggle-3d-button",o.type="button",o.setAttribute("aria-label","3D aan/uit"),Ve(),o.addEventListener("click",()=>{ye(!z)}),a.appendChild(o);let n=document.querySelector(".mapboxgl-ctrl-top-right");n&&n.appendChild(a)}function Ue(e){window.map=e,yt(),e.once("load",()=>{vt(e);let t=()=>{e.getLayer("3d-models")&&(ve(),ye(z),e.off("styledata",t))};e.on("styledata",t),e.getLayer("3d-models")&&(ve(),ye(z))})}F();function U(){let e=window.location.pathname;return e.includes("/en/")?"en":e.includes("/de/")?"de":"nl"}var X={nl:{welcomeMessage:"Welkom in <strong>Heerlen</strong> deze kaart heeft veel unieke functies die ik je graag uitleg",startTour:"Start tour",skipTour:"Skip tour",helpButtonTitle:"Start rondleiding",helpButtonAriaLabel:"Start kaart rondleiding",tourSteps:{welcome:"Ontdek <strong>Heerlen</strong> met deze interactieve kaart. We leiden je even rond!.",mapControls:"Gebruik deze <strong>knoppen</strong> om in/uit te zoomen en de kaart te draaien.",filters:"gebruik <strong>filters</strong> om per categorie te zoeken en te ontdekken!",geolocation:"Klik hier om je <strong>locatie</strong> aan te zetten en direct te zien waar jij je bevindt op de kaart.",tryMarker:"klik op een van de <strong>gekleurde</strong> rondjes.",markerInstruction:"Klik op een marker om door te gaan",markerHint:'Klik op "Skip" als je geen marker kunt vinden',popupInfo:"Bekijk <strong>informatie</strong> over deze plek en druk op de <strong>like-knop</strong> om deze locatie op te slaan.",likeHeart:"Klik op het <strong>hartje</strong> om al je opgeslagen favoriete locaties te bekijken.",finish:"Je bent nu klaar om <strong>Heerlen te verkennen</strong>! Klik op markers om locaties te ontdekken. Je kunt deze rondleiding opnieuw starten via het <strong>?</strong> icoon."},buttons:{start:"Start",skip:"Skip",back:"\u2190",next:"\u2192",ready:"Klaar"},progressBarClose:"Sluit rondleiding"},en:{welcomeMessage:"Welcome to <strong>Heerlen</strong>! This map has many unique features that I'd like to show you",startTour:"Start tour",skipTour:"Skip tour",helpButtonTitle:"Start tour",helpButtonAriaLabel:"Start map tour",tourSteps:{welcome:"Discover <strong>Heerlen</strong> with this interactive map. Let me show you around!",mapControls:"Use these <strong>buttons</strong> to zoom in/out and rotate the map.",filters:"Use <strong>filters</strong> to search and discover by category!",geolocation:"Click here to enable your <strong>location</strong> and see where you are on the map.",tryMarker:"Click on one of the <strong>colored</strong> circles.",markerInstruction:"Click on a marker to continue",markerHint:`Click "Skip" if you can't find a marker`,popupInfo:"View <strong>information</strong> about this place and click the <strong>like button</strong> to save this location.",likeHeart:"Click on the <strong>heart</strong> to view all your saved favorite locations.",finish:"You're now ready to <strong>explore Heerlen</strong>! Click on markers to discover locations. You can restart this tour anytime via the <strong>?</strong> icon."},buttons:{start:"Start",skip:"Skip",back:"\u2190",next:"\u2192",ready:"Done"},progressBarClose:"Close tour"},de:{welcomeMessage:"Willkommen in <strong>Heerlen</strong>! Diese Karte hat viele einzigartige Funktionen, die ich Ihnen gerne zeigen m\xF6chte",startTour:"Tour starten",skipTour:"Tour \xFCberspringen",helpButtonTitle:"Tour starten",helpButtonAriaLabel:"Kartentour starten",tourSteps:{welcome:"Entdecken Sie <strong>Heerlen</strong> mit dieser interaktiven Karte. Lassen Sie mich Ihnen alles zeigen!",mapControls:"Verwenden Sie diese <strong>Tasten</strong> zum Zoomen und Drehen der Karte.",filters:"Verwenden Sie <strong>Filter</strong>, um nach Kategorien zu suchen und zu entdecken!",geolocation:"Klicken Sie hier, um Ihren <strong>Standort</strong> zu aktivieren und zu sehen, wo Sie sich auf der Karte befinden.",tryMarker:"Klicken Sie auf einen der <strong>farbigen</strong> Kreise.",markerInstruction:"Klicken Sie auf einen Marker, um fortzufahren",markerHint:'Klicken Sie auf "\xDCberspringen", wenn Sie keinen Marker finden k\xF6nnen',popupInfo:"Sehen Sie sich <strong>Informationen</strong> \xFCber diesen Ort an und klicken Sie auf die <strong>Like-Schaltfl\xE4che</strong>, um diesen Ort zu speichern.",likeHeart:"Klicken Sie auf das <strong>Herz</strong>, um alle Ihre gespeicherten Lieblingsorte anzuzeigen.",finish:"Sie sind jetzt bereit, <strong>Heerlen zu erkunden</strong>! Klicken Sie auf Marker, um Orte zu entdecken. Sie k\xF6nnen diese Tour jederzeit \xFCber das <strong>?</strong> Symbol neu starten."},buttons:{start:"Start",skip:"\xDCberspringen",back:"\u2190",next:"\u2192",ready:"Fertig"},progressBarClose:"Tour schlie\xDFen"}},K=new Set,V=new Set,Xe=[];function Je(e){if(typeof window.mapboxgl<"u"){wt();let t=setInterval(function(){let a=document.getElementById("map");if(a&&a.querySelector(".mapboxgl-canvas")&&e&&e.loaded()){clearInterval(t),K.delete(t);let o=setTimeout(function(){V.delete(o),kt(e)},2e3);V.add(o)}},500);K.add(t)}}function wt(){if(!document.getElementById("tour-styles")){let e=document.createElement("link");e.id="tour-styles",e.rel="stylesheet",e.type="text/css",e.href="tour-styles.css",document.head.appendChild(e)}}function kt(e){let t=localStorage.getItem("heerlenMapWalkthroughShown");Lt(e),(!t||window.location.hash==="#tutorial")&&Mt(function(){Qe(e),localStorage.setItem("heerlenMapWalkthroughShown","true")})}function Mt(e){let t=U(),a=X[t],o=document.createElement("div");o.className="welcome-overlay",o.innerHTML=`
    <div class="welcome-card">
      <p>${a.welcomeMessage}</p>
      <div class="welcome-buttons">
        <button class="welcome-start-btn">${a.startTour}</button>
        <button class="welcome-skip-btn">${a.skipTour}</button>
      </div>
    </div>
  `,document.body.appendChild(o),setTimeout(()=>{o.style.opacity="1";let n=o.querySelector(".welcome-card");n.style.transform="translateY(0)",n.style.opacity="1"},100),o.querySelector(".welcome-start-btn").addEventListener("click",function(){o.style.opacity="0",setTimeout(()=>{o.remove(),e()},500)}),o.querySelector(".welcome-skip-btn").addEventListener("click",function(){o.style.opacity="0",setTimeout(()=>{o.remove()},500)})}function Lt(e){let t=U(),a=X[t],o=document.querySelector(".help-button");o&&o.remove();let n=document.createElement("button");n.className="help-button",n.innerHTML="?",n.title=a.helpButtonTitle,n.setAttribute("aria-label",a.helpButtonAriaLabel),n.addEventListener("click",()=>{if(window.activeTour&&window.activeTour.isActive()){let r=window.activeTour.getCurrentStep();r?window.activeTour.show(r.id):window.activeTour.start()}else Qe(e)});let i=document.querySelector(".mapboxgl-ctrl-top-right");if(i){let r=document.createElement("div");r.className="mapboxgl-ctrl mapboxgl-ctrl-group help-button-container",r.appendChild(n),i.appendChild(r)}}function Qe(e){let t=U(),a=X[t],o=new window.Shepherd.Tour({useModalOverlay:!1,defaultStepOptions:{cancelIcon:{enabled:!0},classes:"shepherd-theme-heerlen",scrollTo:!1,title:null,popperOptions:{modifiers:[{name:"offset",options:{offset:[0,12]}},{name:"preventOverflow",options:{boundary:document.body,padding:10}}]}}}),n=s=>{if(!o||!o.isActive())return;let d=s.target;if(d.classList.contains("shepherd-modal-overlay-container")){o.cancel();return}let f=d.closest(".shepherd-element"),h=d.closest(".help-button"),v=d.closest(".shepherd-progress-bar"),M=d.closest(".welcome-overlay"),L=d.closest(".shepherd-content, .shepherd-text, .shepherd-footer, .shepherd-button");!f&&!h&&!v&&!M&&!L&&o.cancel()},i=()=>{o&&o.isActive()&&o.cancel()};o.on("start",()=>{setTimeout(()=>{document.addEventListener("click",n)},100),e.on("dragstart",i)}),o.on("cancel",()=>{document.removeEventListener("click",n),e.off("dragstart",i)}),o.on("complete",()=>{document.removeEventListener("click",n),e.off("dragstart",i)}),window.activeTour=o;function r(){let s=document.querySelector(".shepherd-modal-overlay-container");s&&(s.style.transition="opacity 0.3s ease",s.classList.add("shepherd-modal-is-visible"),s.style.pointerEvents="auto",s.onclick=d=>{d.target===s&&o.cancel()})}function l(){let s=document.querySelector(".shepherd-modal-overlay-container");s&&(s.classList.remove("shepherd-modal-is-visible"),s.style.pointerEvents="none",s.onclick=null)}function c(s,d){let f=document.querySelector(s);if(f)return{element:f,on:"bottom"};if(d){let h=document.querySelector(d);if(h)return{element:h,on:"bottom"}}return null}o.addStep({id:"welcome",text:a.tourSteps.welcome,buttons:[{text:a.buttons.start,action:o.next,classes:"shepherd-button-primary"}],when:{show:r}}),[{id:"map-controls",attachTo:c(".mapboxgl-ctrl-top-right",".mapboxgl-ctrl-group"),text:a.tourSteps.mapControls},{id:"filters",attachTo:c(".map-filter-wrap-2",".filter-btn"),text:a.tourSteps.filters},{id:"geolocation",attachTo:c(".mapboxgl-ctrl-geolocate",".mapboxgl-ctrl-bottom-right"),text:a.tourSteps.geolocation}].forEach(s=>{s.attachTo&&o.addStep({...s,buttons:[{text:a.buttons.back,action:o.back,classes:"shepherd-button-secondary"},{text:a.buttons.next,action:o.next,classes:"shepherd-button-primary"}],when:{show:r,hide:()=>{let d=s.attachTo?.element;d&&(d.classList.add("tour-highlight-pulse"),setTimeout(()=>{d.classList.remove("tour-highlight-pulse")},1e3))}}})}),o.addStep({id:"try-marker",text:`
      <div class="tour-marker-instruction">
        <p>${a.tourSteps.tryMarker}</p>
        <div class="marker-animation">
          <span class="pulse-dot"></span>
          <span class="instruction-arrow">\u2193</span>
        </div>
      </div>
    `,buttons:[{text:a.buttons.back,action:o.back,classes:"shepherd-button-secondary"},{text:a.buttons.skip,action:()=>{window.tourWaitingForMarkerClick=!1,o.show("popup-info")},classes:"shepherd-button-secondary"}],when:{show:function(){l();let s=document.createElement("div");s.className="tour-instruction-message",s.textContent=a.tourSteps.markerInstruction,document.body.appendChild(s),setTimeout(()=>{s.parentNode&&s.parentNode.removeChild(s)},4e3),setTimeout(()=>{let d=e.queryRenderedFeatures({layers:["location-markers","location-icons"]});if(d.length>0){let f=Math.floor(Math.random()*d.length),h=d[f],v=h.geometry.coordinates;e.fire("click",{lngLat:v,point:e.project(v),features:[h],originalEvent:new MouseEvent("click")}),setTimeout(()=>{o.getCurrentStep()&&o.getCurrentStep().id==="try-marker"&&(r(),o.show("popup-info"))},800)}},500),window.tourWaitingForMarkerClick=!0,window.markerClickFallbackTimer=window.setTimeout(()=>{if(window.tourWaitingForMarkerClick){let d=document.createElement("div");d.className="tour-instruction-message",d.textContent=a.tourSteps.markerHint,document.body.appendChild(d),setTimeout(()=>{d.parentNode&&d.parentNode.removeChild(d)},5e3)}},15e3)},hide:function(){window.markerClickFallbackTimer&&clearTimeout(window.markerClickFallbackTimer),document.querySelectorAll(".tour-instruction-message").forEach(d=>{d.parentNode&&d.parentNode.removeChild(d)})}},canClickTarget:!1,advanceOn:null}),o.addStep({id:"popup-info",attachTo:function(){let s=document.querySelector(".mapboxgl-popup-content");return s?{element:s,on:"top"}:null},text:a.tourSteps.popupInfo,buttons:[{text:a.buttons.back,action:o.back,classes:"shepherd-button-secondary"},{text:a.buttons.next,action:o.next,classes:"shepherd-button-primary"}],when:{show:function(){if(r(),!document.querySelector(".mapboxgl-popup-content")&&e){let s=document.querySelector(".mapboxgl-marker, .mapboxgl-user-location-dot");s&&(s.click(),setTimeout(()=>{if(!document.querySelector(".mapboxgl-popup-content")&&e.getLayer("location-markers")){let d=e.queryRenderedFeatures({layers:["location-markers"]});if(d.length>0){let f=d[0];e.fire("click",{lngLat:f.geometry.coordinates,point:e.project(f.geometry.coordinates),features:[f]})}}},300))}}}}),o.addStep({id:"like-heart-svg",attachTo:c(".heart-svg.w-embed",".like-heart-svg"),text:a.tourSteps.likeHeart,buttons:[{text:a.buttons.back,action:o.back,classes:"shepherd-button-secondary"},{text:a.buttons.next,action:o.next,classes:"shepherd-button-primary"}],when:{show:r,hide:()=>{let s=document.querySelector(".heart-svg.w-embed");s&&(s.classList.add("tour-highlight-pulse"),setTimeout(()=>{s.classList.remove("tour-highlight-pulse")},1e3))}}}),o.addStep({id:"finish",text:a.tourSteps.finish,buttons:[{text:a.buttons.ready,action:o.complete,classes:"shepherd-button-primary"}],when:{show:r}}),o.on("start",()=>{St(o)});function u(){window.markerClickListener&&e.off("click","location-markers",window.markerClickListener),window.markerClickListener=()=>{window.tourWaitingForMarkerClick&&(window.tourWaitingForMarkerClick=!1,clearTimeout(window.markerClickFallbackTimer),setTimeout(()=>{o.getCurrentStep()&&o.getCurrentStep().id==="try-marker"&&(r(),o.show("popup-info"))},500))},e.on("click","location-markers",window.markerClickListener)}u();function b(){window.tourWaitingForMarkerClick=!1,window.markerClickFallbackTimer&&clearTimeout(window.markerClickFallbackTimer),document.querySelectorAll(".tour-instruction-message").forEach(f=>{f.parentNode&&f.parentNode.removeChild(f)});let d=document.querySelector(".shepherd-progress-bar");d&&d.parentNode&&d.parentNode.removeChild(d)}o.on("complete",b),o.on("cancel",b),o.start()}function St(e){let t=U(),a=X[t],o=document.querySelector(".shepherd-progress-bar");o&&o.remove();let n=document.createElement("div");n.className="shepherd-progress-bar";let i=document.createElement("div");i.className="progress-inner",i.innerHTML='<div class="progress-fill"></div>';let r=document.createElement("button");r.className="progress-bar-close-btn",r.innerHTML="\xD7",r.setAttribute("aria-label",a.progressBarClose),r.title=a.progressBarClose,r.addEventListener("click",()=>{e.cancel()}),n.appendChild(i),n.appendChild(r),document.body.appendChild(n);function l(){let c=e.getCurrentStep();if(!c)return;let p=e.steps.indexOf(c),u=e.steps.length,b=u>1?Math.round(p/(u-1)*100):100,s=n.querySelector(".progress-fill");s&&(s.style.width=`${b}%`)}e.on("show",l),l()}function Et(){if(K.forEach(e=>clearInterval(e)),K.clear(),V.forEach(e=>clearTimeout(e)),V.clear(),Xe.forEach(({element:e,event:t,handler:a})=>{e.removeEventListener(t,a)}),Xe.length=0,window.markerClickFallbackTimer&&(clearTimeout(window.markerClickFallbackTimer),delete window.markerClickFallbackTimer),window.activeTour){try{window.activeTour.cancel()}catch{}delete window.activeTour}delete window.tourWaitingForMarkerClick,delete window.markerClickListener,delete window.tourCleanup}window.tourCleanup=Et;te();window.Webflow||(window.Webflow=[]);window.Webflow.push(async()=>{try{let e=ze();window.map=e;let t=new j(e);window.geolocationManager=t,$e(e),Ge(e),qe(),Se(e),Ye(e),Ke(e),Ue(e),Je(e),e.on("zoom",()=>{let a=e.getZoom();}),e.on("click",a=>{let o=e.queryRenderedFeatures(a.point);if(o.length>0){let n=o[0];ge(n,e)}else W()}),R.emit(_.MAP_LOADED,e)}catch(e){R.emit("app:error",e)}});window.addEventListener("beforeunload",()=>{G.cleanup(),R.cleanup(),window.geolocationManager&&window.geolocationManager.cleanup(),window.tourCleanup&&window.tourCleanup()});window.HeerlenMap={getState:()=>m,getConfig:()=>y,closePopup:W,toggleFilter:Ie};window.handleSnapchatLink=he;window.showImagePopup=B;window.closeItem=O;})();
//! ============= POPUP MANAGEMENT =============
